/*
: Copyright (c) 2012-2017 Dan Grossman. All rights reserved.
 @license: Licensed under the MIT license. See http://www.opensource.org/licenses/mit-license.php
 @website: http://www.daterangepicker.com/
*/
var $jscomp={scope:{},findInternal:function(b,d,c){b instanceof String&&(b=String(b));for(var e=b.length,a=0;a<e;a++){var g=b[a];if(d.call(c,g,a,b))return{i:a,v:g}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,d,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[d]=c.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,d,c,e){if(d){c=$jscomp.global;b=b.split(".");for(e=0;e<b.length-1;e++){var a=b[e];a in c||(c[a]={});c=c[a]}b=b[b.length-1];e=c[b];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(b,c,e){var a=this.length||0;0>c&&(c=Math.max(0,a+c));if(null==e||e>a)e=a;e=Number(e);0>e&&(e=Math.max(0,a+e));for(c=Number(c||0);c<e;c++)this[c]=b;return this}},"es6-impl","es3");
(function(b,d){if("function"===typeof define&&define.amd)define(["moment","jquery"],function(a,b){b.fn||(b.fn={});return d(a,b)});else if("object"===typeof module&&module.exports){var c="undefined"!=typeof window?window.jQuery:void 0;c||(c=require("jquery"),c.fn||(c.fn={}));var e="undefined"!=typeof window&&"undefined"!=typeof window.moment?window.moment:require("moment");module.exports=d(e,c)}else b.daterangepicker=d(b.moment,b.jQuery)})(this,function(b,d){var c=function(e,a,c){this.parentEl="body";
this.element=d(e);this.startDate=b().startOf("day");this.endDate=b().endOf("day");this.showISOWeekNumbers=this.showWeekNumbers=this.showDropdowns=this.singleDatePicker=this.autoApply=this.dateLimit=this.maxDate=this.minDate=!1;this.showCustomRangeLabel=!0;this.timePicker24Hour=this.timePicker=!1;this.timePickerIncrement=1;this.timePickerSeconds=!1;this.autoUpdateInput=this.linkedCalendars=!0;this.alwaysShowCalendars=!1;this.manualInputs=!0;this.ranges={};this.opens="right";this.element.hasClass("pull-right")&&
(this.opens="left");this.drops="down";this.element.hasClass("dropup")&&(this.drops="up");this.buttonClasses="btn btn-sm";this.applyClass="btn-success";this.cancelClass="btn-default";this.locale={direction:"ltr",format:b.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:b.weekdaysMin(),monthNames:b.monthsShort(),firstDay:b.localeData().firstDayOfWeek()};this.callback=function(){};this.isShowing=!1;this.leftCalendar=
{};this.rightCalendar={};if("object"!==typeof a||null===a)a={};a=d.extend(this.element.data(),a);"string"===typeof a.template||a.template instanceof d||(a.template='<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_start" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_end" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>');
this.parentEl=a.parentEl&&d(a.parentEl).length?d(a.parentEl):d(this.parentEl);this.container=d(a.template).appendTo(this.parentEl);if("object"===typeof a.locale&&("string"===typeof a.locale.direction&&(this.locale.direction=a.locale.direction),"string"===typeof a.locale.format&&(this.locale.format=a.locale.format),"string"===typeof a.locale.separator&&(this.locale.separator=a.locale.separator),"object"===typeof a.locale.daysOfWeek&&(this.locale.daysOfWeek=a.locale.daysOfWeek.slice()),"object"===typeof a.locale.monthNames&&
(this.locale.monthNames=a.locale.monthNames.slice()),"number"===typeof a.locale.firstDay&&(this.locale.firstDay=a.locale.firstDay),"string"===typeof a.locale.applyLabel&&(this.locale.applyLabel=a.locale.applyLabel),"string"===typeof a.locale.cancelLabel&&(this.locale.cancelLabel=a.locale.cancelLabel),"string"===typeof a.locale.weekLabel&&(this.locale.weekLabel=a.locale.weekLabel),"string"===typeof a.locale.customRangeLabel)){var f=document.createElement("textarea");f.innerHTML=a.locale.customRangeLabel;
f=f.value;this.locale.customRangeLabel=f}this.container.addClass(this.locale.direction);"string"===typeof a.startDate&&(this.startDate=b(a.startDate,this.locale.format));"string"===typeof a.endDate&&(this.endDate=b(a.endDate,this.locale.format));"string"===typeof a.minDate&&(this.minDate=b(a.minDate,this.locale.format));"string"===typeof a.maxDate&&(this.maxDate=b(a.maxDate,this.locale.format));"object"===typeof a.startDate&&(this.startDate=b(a.startDate));"object"===typeof a.endDate&&(this.endDate=
b(a.endDate));"object"===typeof a.minDate&&(this.minDate=b(a.minDate));"object"===typeof a.maxDate&&(this.maxDate=b(a.maxDate));this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone());this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone());"string"===typeof a.applyClass&&(this.applyClass=a.applyClass);"string"===typeof a.cancelClass&&(this.cancelClass=a.cancelClass);"object"===typeof a.dateLimit&&(this.dateLimit=a.dateLimit);"string"===
typeof a.opens&&(this.opens=a.opens);"string"===typeof a.drops&&(this.drops=a.drops);"boolean"===typeof a.showWeekNumbers&&(this.showWeekNumbers=a.showWeekNumbers);"boolean"===typeof a.showISOWeekNumbers&&(this.showISOWeekNumbers=a.showISOWeekNumbers);"string"===typeof a.buttonClasses&&(this.buttonClasses=a.buttonClasses);"object"===typeof a.buttonClasses&&(this.buttonClasses=a.buttonClasses.join(" "));"boolean"===typeof a.showDropdowns&&(this.showDropdowns=a.showDropdowns);"boolean"===typeof a.showCustomRangeLabel&&
(this.showCustomRangeLabel=a.showCustomRangeLabel);"boolean"===typeof a.singleDatePicker&&(this.singleDatePicker=a.singleDatePicker)&&(this.endDate=this.startDate.clone());"boolean"===typeof a.timePicker&&(this.timePicker=a.timePicker);"boolean"===typeof a.timePickerSeconds&&(this.timePickerSeconds=a.timePickerSeconds);"number"===typeof a.timePickerIncrement&&(this.timePickerIncrement=a.timePickerIncrement);"boolean"===typeof a.timePicker24Hour&&(this.timePicker24Hour=a.timePicker24Hour);"boolean"===
typeof a.autoApply&&(this.autoApply=a.autoApply);"boolean"===typeof a.autoUpdateInput&&(this.autoUpdateInput=a.autoUpdateInput);"boolean"===typeof a.linkedCalendars&&(this.linkedCalendars=a.linkedCalendars);"function"===typeof a.isInvalidDate&&(this.isInvalidDate=a.isInvalidDate);"function"===typeof a.isCustomDate&&(this.isCustomDate=a.isCustomDate);"boolean"===typeof a.alwaysShowCalendars&&(this.alwaysShowCalendars=a.alwaysShowCalendars);"boolean"===typeof a.manualInputs&&(this.manualInputs=a.manualInputs);
if(0!=this.locale.firstDay)for(e=this.locale.firstDay;0<e;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),e--;var k,l;if("undefined"===typeof a.startDate&&"undefined"===typeof a.endDate&&d(this.element).is("input[type=text]")){var f=d(this.element).val(),h=f.split(this.locale.separator);e=k=null;2==h.length?(e=b(h[0],this.locale.format),k=b(h[1],this.locale.format)):this.singleDatePicker&&""!==f&&(e=b(f,this.locale.format),k=b(f,this.locale.format));null!==e&&null!==k&&(this.setStartDate(e),
this.setEndDate(k))}if("object"===typeof a.ranges){for(l in a.ranges)e="string"===typeof a.ranges[l][0]?b(a.ranges[l][0],this.locale.format):b(a.ranges[l][0]),k="string"===typeof a.ranges[l][1]?b(a.ranges[l][1],this.locale.format):b(a.ranges[l][1]),this.minDate&&e.isBefore(this.minDate)&&(e=this.minDate.clone()),f=this.maxDate,this.dateLimit&&f&&e.clone().add(this.dateLimit).isAfter(f)&&(f=e.clone().add(this.dateLimit)),f&&k.isAfter(f)&&(k=f.clone()),this.minDate&&k.isBefore(this.minDate,this.timepicker?
"minute":"day")||f&&e.isAfter(f,this.timepicker?"minute":"day")||(f=document.createElement("textarea"),f.innerHTML=l,f=f.value,this.ranges[f]=[e,k]);e="<ul>";for(l in this.ranges)e+='<li data-range-key="'+l+'">'+l+"</li>";this.showCustomRangeLabel&&(e+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>");e+="</ul>";this.container.find(".ranges").prepend(e)}"function"===typeof c&&(this.callback=c);this.timePicker||(this.startDate=this.startDate.startOf("day"),
this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide());this.timePicker&&this.autoApply&&(this.autoApply=!1);this.autoApply&&"object"!==typeof a.ranges?this.container.find(".ranges").hide():this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide");this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".calendar.left").addClass("single"),this.container.find(".calendar.left").show(),this.container.find(".calendar.right").hide(),
this.container.find(".daterangepicker_input input, .daterangepicker_input > i").hide(),this.timePicker?this.container.find(".ranges ul").hide():this.container.find(".ranges").hide());this.manualInputs||this.container.find(".daterangepicker_input input, .daterangepicker_input > i").hide();("undefined"===typeof a.ranges&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar");this.container.addClass("opens"+this.opens);"undefined"!==typeof a.ranges&&"right"==this.opens&&
this.container.find(".ranges").prependTo(this.container.find(".calendar.left").parent());this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses);this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass);this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass);this.container.find(".applyBtn").html(this.locale.applyLabel);this.container.find(".cancelBtn").html(this.locale.cancelLabel);this.container.find(".calendar").on("click.daterangepicker",
".prev",d.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",d.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",d.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",d.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",d.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",d.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",d.proxy(this.monthOrYearChanged,
this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",d.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",d.proxy(this.showCalendars,this)).on("focus.daterangepicker",".daterangepicker_input input",d.proxy(this.formInputsFocused,this)).on("blur.daterangepicker",".daterangepicker_input input",d.proxy(this.formInputsBlurred,this)).on("change.daterangepicker",".daterangepicker_input input",d.proxy(this.formInputsChanged,
this)).on("keydown.daterangepicker",".daterangepicker_input input",d.proxy(this.formInputsKeydown,this));this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",d.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",d.proxy(this.clickCancel,this)).on("click.daterangepicker","li",d.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",d.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",d.proxy(this.updateFormInputs,this));if(this.element.is("input")||
this.element.is("button"))this.element.on({"click.daterangepicker":d.proxy(this.show,this),"focus.daterangepicker":d.proxy(this.show,this),"keyup.daterangepicker":d.proxy(this.elementChanged,this),"keydown.daterangepicker":d.proxy(this.keydown,this)});else this.element.on("click.daterangepicker",d.proxy(this.toggle,this)),this.element.on("keydown.daterangepicker",d.proxy(this.toggle,this));this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+
this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))};c.prototype={constructor:c,setStartDate:function(e){"string"===typeof e&&(this.startDate=b(e,this.locale.format));"object"===typeof e&&(this.startDate=b(e));this.timePicker||(this.startDate=this.startDate.startOf("day"));this.timePicker&&this.timePickerIncrement&&
this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement));this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/
this.timePickerIncrement)*this.timePickerIncrement));this.isShowing||this.updateElement();this.updateMonthsInView()},setEndDate:function(e){"string"===typeof e&&(this.endDate=b(e,this.locale.format));"object"===typeof e&&(this.endDate=b(e));this.timePicker||(this.endDate=this.endDate.add(1,"d").startOf("day").subtract(1,"second"));this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);this.endDate.isBefore(this.startDate)&&
(this.endDate=this.startDate.clone());this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone());this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit));this.previousRightTime=this.endDate.clone();this.isShowing||this.updateElement();this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),
this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled"));this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("active"),this.container.find('input[name="daterangepicker_start"]').addClass("active")):(this.container.find('input[name="daterangepicker_end"]').addClass("active"),this.container.find('input[name="daterangepicker_start"]').removeClass("active"));
this.updateMonthsInView();this.updateCalendars();this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;
this.leftCalendar.month=this.startDate.clone().date(2);this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),
this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){if(this.timePicker){var b,a,d;if(this.endDate){if(b=parseInt(this.container.find(".left .hourselect").val(),10),a=parseInt(this.container.find(".left .minuteselect").val(),10),
d=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour){var c=this.container.find(".left .ampmselect").val();"PM"===c&&12>b&&(b+=12);"AM"===c&&12===b&&(b=0)}}else b=parseInt(this.container.find(".right .hourselect").val(),10),a=parseInt(this.container.find(".right .minuteselect").val(),10),d=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,this.timePicker24Hour||(c=this.container.find(".right .ampmselect").val(),
"PM"===c&&12>b&&(b+=12),"AM"===c&&12===b&&(b=0));this.leftCalendar.month.hour(b).minute(a).second(d);this.rightCalendar.month.hour(b).minute(a).second(d)}this.renderCalendar("left");this.renderCalendar("right");this.container.find(".ranges li").removeClass("active");null!=this.endDate&&this.calculateChosenLabel()},renderCalendar:function(e){var a="left"==e?this.leftCalendar:this.rightCalendar,c=a.month.month(),f=a.month.year(),k=a.month.hour(),l=a.month.minute(),h=a.month.second(),a=b([f,c]).daysInMonth(),
q=b([f,c,1]),v=b([f,c,a]),c=b(q).subtract(1,"month").month(),f=b(q).subtract(1,"month").year(),p=b([f,c]).daysInMonth(),w=q.day(),a=[];a.firstDay=q;a.lastDay=v;for(q=0;6>q;q++)a[q]=[];q=p-w+this.locale.firstDay+1;q>p&&(q-=7);w==this.locale.firstDay&&(q=p-6);p=b([f,c,q,12,l,h]);for(f=c=q=0;42>q;q++,c++,p=b(p).add(24,"hour"))0<q&&0===c%7&&(c=0,f++),a[f][c]=p.clone().hour(k).minute(l).second(h),p.hour(12),this.minDate&&a[f][c].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&a[f][c].isBefore(this.minDate)&&
"left"==e&&(a[f][c]=this.minDate.clone()),this.maxDate&&a[f][c].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&a[f][c].isAfter(this.maxDate)&&"right"==e&&(a[f][c]=this.maxDate.clone());"left"==e?this.leftCalendar.calendar=a:this.rightCalendar.calendar=a;var f="left"==e?this.minDate:this.startDate,k=this.maxDate,l="ltr"==this.locale.direction?{left:"chevron-left",right:"chevron-right"}:{left:"chevron-right",right:"chevron-left"},r='<table class="table-condensed">',r=r+"<thead>",r=r+"<tr>";
if(this.showWeekNumbers||this.showISOWeekNumbers)r+="<th></th>";r=f&&!f.isBefore(a.firstDay)||this.linkedCalendars&&"left"!=e?r+"<th></th>":r+('<th class="prev available"><i class="fa fa-'+l.left+" glyphicon glyphicon-"+l.left+'"></i></th>');h=this.locale.monthNames[a[1][1].month()]+a[1][1].format(" YYYY");if(this.showDropdowns){for(var w=a[1][1].month(),h=a[1][1].year(),q=k&&k.year()||h+5,p=f&&f.year()||h-50,v=h==p,u=h==q,c='<select class="monthselect">',n=0;12>n;n++)c=(!v||n>=f.month())&&(!u||n<=
k.month())?c+("<option value='"+n+"'"+(n===w?" selected='selected'":"")+">"+this.locale.monthNames[n]+"</option>"):c+("<option value='"+n+"'"+(n===w?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[n]+"</option>");for(f='<select class="yearselect">';p<=q;p++)f+='<option value="'+p+'"'+(p===h?' selected="selected"':"")+">"+p+"</option>";h=c+"</select>"+(f+"</select>")}r+='<th colspan="5" class="month">'+h+"</th>";r=k&&!k.isAfter(a.lastDay)||this.linkedCalendars&&"right"!=e&&
!this.singleDatePicker?r+"<th></th>":r+('<th class="next available"><i class="fa fa-'+l.right+" glyphicon glyphicon-"+l.right+'"></i></th>');r+="</tr>";r+="<tr>";if(this.showWeekNumbers||this.showISOWeekNumbers)r+='<th class="week">'+this.locale.weekLabel+"</th>";d.each(this.locale.daysOfWeek,function(a,b){r+="<th>"+b+"</th>"});r+="</tr>";r+="</thead>";r+="<tbody>";null==this.endDate&&this.dateLimit&&(l=this.startDate.clone().add(this.dateLimit).endOf("day"),!k||l.isBefore(k))&&(k=l);for(f=0;6>f;f++){r+=
"<tr>";this.showWeekNumbers?r+='<td class="week">'+a[f][0].week()+"</td>":this.showISOWeekNumbers&&(r+='<td class="week">'+a[f][0].isoWeek()+"</td>");for(c=0;7>c;c++){l=[];a[f][c].isSame(new Date,"day")&&l.push("today");5<a[f][c].isoWeekday()&&l.push("weekend");a[f][c].month()!=a[1][1].month()&&l.push("off");this.minDate&&a[f][c].isBefore(this.minDate,"day")&&l.push("off","disabled");k&&a[f][c].isAfter(k,"day")&&l.push("off","disabled");this.isInvalidDate(a[f][c])&&l.push("off","disabled");a[f][c].format("YYYY-MM-DD")==
this.startDate.format("YYYY-MM-DD")&&l.push("active","start-date");null!=this.endDate&&a[f][c].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&l.push("active","end-date");null!=this.endDate&&a[f][c]>this.startDate&&a[f][c]<this.endDate&&l.push("in-range");h=this.isCustomDate(a[f][c]);!1!==h&&("string"===typeof h?l.push(h):Array.prototype.push.apply(l,h));h="";p=!1;for(q=0;q<l.length;q++)h+=l[q]+" ","disabled"==l[q]&&(p=!0);p||(h+="available");r+='<td class="'+h.replace(/^\s+|\s+$/g,"")+'" data-title="r'+
f+"c"+c+'">'+a[f][c].date()+"</td>"}r+="</tr>"}r+="</tbody>";r+="</table>";this.container.find(".calendar."+e+" .calendar-table").html(r)},renderTimePicker:function(b){if("right"!=b||this.endDate){var a,c,d,k=this.maxDate;!this.dateLimit||this.maxDate&&!this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)||(k=this.startDate.clone().add(this.dateLimit));"left"==b?(c=this.startDate.clone(),d=this.minDate):"right"==b&&(c=this.endDate.clone(),d=this.startDate,a=this.container.find(".calendar.right .calendar-time div"),
""!=a.html()&&(c.hour(a.find(".hourselect option:selected").val()||c.hour()),c.minute(a.find(".minuteselect option:selected").val()||c.minute()),c.second(a.find(".secondselect option:selected").val()||c.second()),this.timePicker24Hour||(a=a.find(".ampmselect option:selected").val(),"PM"===a&&12>c.hour()&&c.hour(c.hour()+12),"AM"===a&&12===c.hour()&&c.hour(0))),c.isBefore(this.startDate)&&(c=this.startDate.clone()),k&&c.isAfter(k)&&(c=k.clone()));a='<select class="hourselect">';for(var l=this.timePicker24Hour?
23:12,h=this.timePicker24Hour?0:1;h<=l;h++){var q=h;this.timePicker24Hour||(q=12<=c.hour()?12==h?12:h+12:12==h?0:h);var v=c.clone().hour(q),p=!1;d&&v.minute(59).isBefore(d)&&(p=!0);k&&v.minute(0).isAfter(k)&&(p=!0);a=q!=c.hour()||p?p?a+('<option value="'+h+'" disabled="disabled" class="disabled">'+h+"</option>"):a+('<option value="'+h+'">'+h+"</option>"):a+('<option value="'+h+'" selected="selected">'+h+"</option>")}a+='</select> : <select class="minuteselect">';for(h=0;60>h;h+=this.timePickerIncrement)l=
10>h?"0"+h:h,v=c.clone().minute(h),p=!1,d&&v.second(59).isBefore(d)&&(p=!0),k&&v.second(0).isAfter(k)&&(p=!0),a=c.minute()!=h||p?p?a+('<option value="'+h+'" disabled="disabled" class="disabled">'+l+"</option>"):a+('<option value="'+h+'">'+l+"</option>"):a+('<option value="'+h+'" selected="selected">'+l+"</option>");a+="</select> ";if(this.timePickerSeconds){a+=': <select class="secondselect">';for(h=0;60>h;h++)l=10>h?"0"+h:h,v=c.clone().second(h),p=!1,d&&v.isBefore(d)&&(p=!0),k&&v.isAfter(k)&&(p=
!0),a=c.second()!=h||p?p?a+('<option value="'+h+'" disabled="disabled" class="disabled">'+l+"</option>"):a+('<option value="'+h+'">'+l+"</option>"):a+('<option value="'+h+'" selected="selected">'+l+"</option>");a+="</select> "}this.timePicker24Hour||(a+='<select class="ampmselect">',v=h="",d&&c.clone().hour(12).minute(0).second(0).isBefore(d)&&(h=' disabled="disabled" class="disabled"'),k&&c.clone().hour(0).minute(0).second(0).isAfter(k)&&(v=' disabled="disabled" class="disabled"'),a=12<=c.hour()?
a+('<option value="AM"'+h+'>AM</option><option value="PM" selected="selected"'+v+">PM</option>"):a+('<option value="AM" selected="selected"'+h+'>AM</option><option value="PM"'+v+">PM</option>"),a+="</select>");this.container.find(".calendar."+b+" .calendar-time div").html(a)}},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),
this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled"))},move:function(){var b=0,a=0,c=d(window).width();this.parentEl.is("body")||(b=this.parentEl.offset().top-this.parentEl.scrollTop(),a=this.parentEl.offset().left-
this.parentEl.scrollLeft(),c=this.parentEl[0].clientWidth+this.parentEl.offset().left);b="up"==this.drops?this.element.offset().top-this.container.outerHeight()-b:this.element.offset().top+this.element.outerHeight()-b;this.container["up"==this.drops?"addClass":"removeClass"]("dropup");"left"==this.opens?(this.container.css({top:b,right:c-this.element.offset().left-this.element.outerWidth(),left:"auto"}),0>this.container.offset().left&&this.container.css({right:"auto",left:9})):"center"==this.opens?
(this.container.css({top:b,left:this.element.offset().left-a+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),0>this.container.offset().left&&this.container.css({right:"auto",left:9})):(this.container.css({top:b,left:this.element.offset().left-a,right:"auto"}),this.container.offset().left+this.container.outerWidth()>d(window).width()&&this.container.css({left:"auto",right:0}))},show:function(b){this.isShowing||(this._outsideClickProxy=d.proxy(function(a){this.outsideClick(a)},
this),d(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),d(window).on("resize.daterangepicker",d.proxy(function(a){this.move(a)},this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),
this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(b){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.updateElement(),d(document).off(".daterangepicker"),d(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",
this),this.isShowing=!1)},toggle:function(b){this.isShowing?this.hide():this.show()},outsideClick:function(b){var a=d(b.target);"focusin"==b.type||a.closest(this.element).length||a.closest(this.container).length||a.closest(".calendar-table").length||(this.hide(),this.element.trigger("outsideClick.daterangepicker",this))},showCalendars:function(){this.container.addClass("show-calendar");this.move();this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar");
this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(b){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(b=b.target.getAttribute("data-range-key"),b==this.locale.customRangeLabel?this.updateView():(b=this.ranges[b],this.container.find("input[name=daterangepicker_start]").val(b[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(b[1].format(this.locale.format))))},
clickRange:function(b){this.chosenLabel=b=b.target.getAttribute("data-range-key");b==this.locale.customRangeLabel?this.showCalendars():(b=this.ranges[b],this.startDate=b[0],this.endDate=b[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply())},clickPrev:function(b){d(b.target).parents(".calendar").hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,
"month")):this.rightCalendar.month.subtract(1,"month");this.updateCalendars()},clickNext:function(b){d(b.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month"));this.updateCalendars()},hoverDate:function(b){if(d(b.target).hasClass("available")){var a=d(b.target).attr("data-title"),c=a.substr(1,1),a=a.substr(3,1),f=d(b.target).parents(".calendar").hasClass("left")?this.leftCalendar.calendar[c][a]:
this.rightCalendar.calendar[c][a];this.endDate&&!this.container.find("input[name=daterangepicker_start]").is(":focus")?this.container.find("input[name=daterangepicker_start]").val(f.format(this.locale.format)):this.endDate||this.container.find("input[name=daterangepicker_end]").is(":focus")||this.container.find("input[name=daterangepicker_end]").val(f.format(this.locale.format));var k=this.leftCalendar,l=this.rightCalendar,h=this.startDate;this.endDate||this.container.find(".calendar tbody td").each(function(b,
a){if(!d(a).hasClass("week")){var c=d(a).attr("data-title"),e=c.substr(1,1),c=c.substr(3,1),e=d(a).parents(".calendar").hasClass("left")?k.calendar[e][c]:l.calendar[e][c];e.isAfter(h)&&e.isBefore(f)||e.isSame(f,"day")?d(a).addClass("in-range"):d(a).removeClass("in-range")}})}},clickDate:function(b){if(d(b.target).hasClass("available")){var a=d(b.target).attr("data-title"),c=a.substr(1,1),a=a.substr(3,1),c=d(b.target).parents(".calendar").hasClass("left")?this.leftCalendar.calendar[c][a]:this.rightCalendar.calendar[c][a];
if(this.endDate||c.isBefore(this.startDate,"day")){if(this.timePicker){a=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour){var f=this.container.find(".left .ampmselect").val();"PM"===f&&12>a&&(a+=12);"AM"===f&&12===a&&(a=0)}var f=parseInt(this.container.find(".left .minuteselect").val(),10),k=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,c=c.clone().hour(a).minute(f).second(k)}this.endDate=null;this.setStartDate(c.clone())}else!this.endDate&&
c.isBefore(this.startDate)?this.setEndDate(this.startDate.clone()):(this.timePicker&&(a=parseInt(this.container.find(".right .hourselect").val(),10),this.timePicker24Hour||(f=this.container.find(".right .ampmselect").val(),"PM"===f&&12>a&&(a+=12),"AM"===f&&12===a&&(a=0)),f=parseInt(this.container.find(".right .minuteselect").val(),10),k=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,c=c.clone().hour(a).minute(f).second(k)),this.setEndDate(c.clone()),this.autoApply&&
(this.calculateChosenLabel(),this.clickApply()));this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply());this.updateView();b.stopPropagation()}},calculateChosenLabel:function(){var b=!0,a=0,c;for(c in this.ranges){if(this.timePicker){var d=this.timePickerSeconds?"YYYY-MM-DD hh:mm:ss":"YYYY-MM-DD hh:mm";if(this.startDate.format(d)==this.ranges[c][0].format(d)&&this.endDate.format(d)==this.ranges[c][1].format(d)){b=!1;this.chosenLabel=this.container.find(".ranges li:eq("+
a+")").addClass("active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[c][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[c][1].format("YYYY-MM-DD")){b=!1;this.chosenLabel=this.container.find(".ranges li:eq("+a+")").addClass("active").html();break}a++}b&&(this.chosenLabel=this.showCustomRangeLabel?this.container.find(".ranges li:last").addClass("active").html():null,this.showCalendars())},clickApply:function(b){this.hide();this.element.trigger("apply.daterangepicker",
this)},clickCancel:function(b){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.hide();this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(b){b=d(b.target).closest(".calendar").hasClass("left");var a=this.container.find(".calendar."+(b?"left":"right")),c=parseInt(a.find(".monthselect").val(),10),a=a.find(".yearselect").val();!b&&(a<this.startDate.year()||a==this.startDate.year()&&c<this.startDate.month())&&(c=this.startDate.month(),a=this.startDate.year());
this.minDate&&(a<this.minDate.year()||a==this.minDate.year()&&c<this.minDate.month())&&(c=this.minDate.month(),a=this.minDate.year());this.maxDate&&(a>this.maxDate.year()||a==this.maxDate.year()&&c>this.maxDate.month())&&(c=this.maxDate.month(),a=this.maxDate.year());b?(this.leftCalendar.month.month(c).year(a),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(c).year(a),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,
"month")));this.updateCalendars()},timeChanged:function(b){var a=d(b.target).closest(".calendar"),c=a.hasClass("left");b=parseInt(a.find(".hourselect").val(),10);var f=parseInt(a.find(".minuteselect").val(),10),k=this.timePickerSeconds?parseInt(a.find(".secondselect").val(),10):0;this.timePicker24Hour||(a=a.find(".ampmselect").val(),"PM"===a&&12>b&&(b+=12),"AM"===a&&12===b&&(b=0));c?(c=this.startDate.clone(),c.hour(b),c.minute(f),c.second(k),this.setStartDate(c),this.singleDatePicker?this.endDate=
this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==c.format("YYYY-MM-DD")&&this.endDate.isBefore(c)&&this.setEndDate(c.clone())):this.endDate&&(c=this.endDate.clone(),c.hour(b),c.minute(f),c.second(k),this.setEndDate(c));this.updateCalendars();this.updateFormInputs();this.renderTimePicker("left");this.renderTimePicker("right")},formInputsChanged:function(c){c=d(c.target).closest(".calendar").hasClass("right");var a=b(this.container.find('input[name="daterangepicker_start"]').val(),
this.locale.format),g=b(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);a.isValid()&&g.isValid()&&(c&&g.isBefore(a)&&(a=g.clone()),this.setStartDate(a),this.setEndDate(g),c?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format)));this.updateView()},formInputsFocused:function(b){this.container.find('input[name="daterangepicker_start"], input[name="daterangepicker_end"]').removeClass("active");
d(b.target).addClass("active");d(b.target).closest(".calendar").hasClass("right")&&(this.endDate=null,this.setStartDate(this.startDate.clone()),this.updateView())},formInputsBlurred:function(c){this.endDate||(c=this.container.find('input[name="daterangepicker_end"]').val(),c=b(c,this.locale.format),c.isValid()&&(this.setEndDate(c),this.updateView()))},formInputsKeydown:function(b){13===b.keyCode&&(b.preventDefault(),this.formInputsChanged(b))},elementChanged:function(){if(this.element.is("input")&&
this.element.val().length){var c=this.element.val().split(this.locale.separator),a=null,d=null;2===c.length&&(a=b(c[0],this.locale.format),d=b(c[1],this.locale.format));if(this.singleDatePicker||null===a||null===d)d=a=b(this.element.val(),this.locale.format);a.isValid()&&d.isValid()&&(this.setStartDate(a),this.setEndDate(d),this.updateView())}},keydown:function(b){9!==b.keyCode&&13!==b.keyCode||this.hide();27===b.keyCode&&(b.preventDefault(),b.stopPropagation(),this.hide())},updateElement:function(){this.element.is("input")&&
!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))},remove:function(){this.container.remove();this.element.off(".daterangepicker");this.element.removeData()}};d.fn.daterangepicker=function(b,a){var g=d.extend(!0,
{},d.fn.daterangepicker.defaultOptions,b);this.each(function(){var b=d(this);b.data("daterangepicker")&&b.data("daterangepicker").remove();b.data("daterangepicker",new c(b,g,a))});return this};return c});(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof exports?b(require("jquery")):b(jQuery)})(function(b,d){function c(){return new Date(Date.UTC.apply(Date,arguments))}function e(){var b=new Date;return c(b.getFullYear(),b.getMonth(),b.getDate())}function a(b,a){return b.getUTCFullYear()===a.getUTCFullYear()&&b.getUTCMonth()===a.getUTCMonth()&&b.getUTCDate()===a.getUTCDate()}function g(a,c){return function(){c!==d&&b.fn.datepicker.deprecated(c);return this[a].apply(this,
arguments)}}function f(a,c){function d(b,a){return a.toLowerCase()}var e=b(a).data(),f={},g,h=new RegExp("^"+c.toLowerCase()+"([A-Z])");c=new RegExp("^"+c.toLowerCase());for(var k in e)c.test(k)&&(g=k.replace(h,d),f[g]=e[k]);return f}function k(a){var c={};if(!u[a]&&(a=a.split("-")[0],!u[a]))return;var d=u[a];b.each(r,function(b,a){a in d&&(c[a]=d[a])});return c}var l=function(){var a={get:function(b){return this.slice(b)[0]},contains:function(b){b=b&&b.valueOf();for(var a=0,c=this.length;a<c;a++)if(0<=
this[a].valueOf()-b&&864E5>this[a].valueOf()-b)return a;return-1},remove:function(b){this.splice(b,1)},replace:function(a){a&&(b.isArray(a)||(a=[a]),this.clear(),this.push.apply(this,a))},clear:function(){this.length=0},copy:function(){var b=new l;b.replace(this);return b}};return function(){var c=[];c.push.apply(c,arguments);b.extend(c,a);return c}}(),h=function(a,c){b.data(a,"datepicker",this);this._process_options(c);this.dates=new l;this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=
b(a);this.inputField=(this.isInput=this.element.is("input"))?this.element:this.element.find("input");(this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1)&&0===this.component.length&&(this.component=!1);this.isInline=!this.component&&this.element.is("div");this.picker=b(n.template);this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow);this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow);
this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(b,a){return Number(a)+1});this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,
daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled});this._allow_update=!1;this.setViewMode(this.o.startView);this._allow_update=!0;this.fillDow();this.fillMonths();this.update();this.isInline&&this.show()};h.prototype={constructor:h,_resolveViewName:function(a){b.each(n.viewModes,function(c,d){if(a===c||-1!==b.inArray(a,d.names))return a=c,!1});return a},_resolveDaysOfWeek:function(a){b.isArray(a)||(a=a.split(/[,\s]*/));return b.map(a,Number)},_check_template:function(a){try{return a===
d||""===a?!1:0>=(a.match(/[<>]/g)||[]).length?!0:0<b(a).length}catch(c){return!1}},_process_options:function(a){this._o=b.extend({},this._o,a);var m=this.o=b.extend({},this._o);a=m.language;u[a]||(a=a.split("-")[0],u[a]||(a=w.language));m.language=a;m.startView=this._resolveViewName(m.startView);m.minViewMode=this._resolveViewName(m.minViewMode);m.maxViewMode=this._resolveViewName(m.maxViewMode);m.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,m.startView));!0!==m.multidate&&(m.multidate=
Number(m.multidate)||!1,!1!==m.multidate&&(m.multidate=Math.max(0,m.multidate)));m.multidateSeparator=String(m.multidateSeparator);m.weekStart%=7;m.weekEnd=(m.weekStart+6)%7;var d=n.parseFormat(m.format);-Infinity!==m.startDate&&(m.startDate=m.startDate?m.startDate instanceof Date?this._local_to_utc(this._zero_time(m.startDate)):n.parseDate(m.startDate,d,m.language,m.assumeNearbyYear):-Infinity);Infinity!==m.endDate&&(m.endDate=m.endDate?m.endDate instanceof Date?this._local_to_utc(this._zero_time(m.endDate)):
n.parseDate(m.endDate,d,m.language,m.assumeNearbyYear):Infinity);m.daysOfWeekDisabled=this._resolveDaysOfWeek(m.daysOfWeekDisabled||[]);m.daysOfWeekHighlighted=this._resolveDaysOfWeek(m.daysOfWeekHighlighted||[]);m.datesDisabled=m.datesDisabled||[];b.isArray(m.datesDisabled)||(m.datesDisabled=m.datesDisabled.split(","));m.datesDisabled=b.map(m.datesDisabled,function(b){return n.parseDate(b,d,m.language,m.assumeNearbyYear)});a=String(m.orientation).toLowerCase().split(/\s+/g);var f=m.orientation.toLowerCase();
a=b.grep(a,function(b){return/^auto|left|right|top|bottom$/.test(b)});m.orientation={x:"auto",y:"auto"};if(f&&"auto"!==f)if(1===a.length)switch(a[0]){case "top":case "bottom":m.orientation.y=a[0];break;case "left":case "right":m.orientation.x=a[0]}else f=b.grep(a,function(b){return/^left|right$/.test(b)}),m.orientation.x=f[0]||"auto",f=b.grep(a,function(b){return/^top|bottom$/.test(b)}),m.orientation.y=f[0]||"auto";m.defaultViewDate instanceof Date||"string"===typeof m.defaultViewDate?m.defaultViewDate=
n.parseDate(m.defaultViewDate,d,m.language,m.assumeNearbyYear):m.defaultViewDate?(a=m.defaultViewDate.year||(new Date).getFullYear(),m.defaultViewDate=c(a,m.defaultViewDate.month||0,m.defaultViewDate.day||1)):m.defaultViewDate=e()},_events:[],_secondaryEvents:[],_applyEvents:function(b){for(var a=0,c,e,f;a<b.length;a++)c=b[a][0],2===b[a].length?(e=d,f=b[a][1]):3===b[a].length&&(e=b[a][1],f=b[a][2]),c.on(f,e)},_unapplyEvents:function(b){for(var a=0,c,e,f;a<b.length;a++)c=b[a][0],2===b[a].length?(f=
d,e=b[a][1]):3===b[a].length&&(f=b[a][1],e=b[a][2]),c.off(e,f)},_buildEvents:function(){var a={keyup:b.proxy(function(a){-1===b.inArray(a.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:b.proxy(this.keydown,this),paste:b.proxy(this.paste,this)};!0===this.o.showOnFocus&&(a.focus=b.proxy(this.show,this));this._events=this.isInput?[[this.element,a]]:this.component&&this.inputField.length?[[this.inputField,a],[this.component,{click:b.proxy(this.show,this)}]]:[[this.element,{click:b.proxy(this.show,
this),keydown:b.proxy(this.keydown,this)}]];this._events.push([this.element,"*",{blur:b.proxy(function(b){this._focused_from=b.target},this)}],[this.element,{blur:b.proxy(function(b){this._focused_from=b.target},this)}]);this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":b.proxy(function(b){this.update(b.date)},this)}]);this._secondaryEvents=[[this.picker,{click:b.proxy(this.click,this)}],[this.picker,".prev, .next",{click:b.proxy(this.navArrowsClick,this)}],[this.picker,
".day:not(.disabled)",{click:b.proxy(this.dayCellClick,this)}],[b(window),{resize:b.proxy(this.place,this)}],[b(document),{"mousedown touchstart":b.proxy(function(b){this.element.is(b.target)||this.element.find(b.target).length||this.picker.is(b.target)||this.picker.find(b.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();
this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(a,c){var d=c||this.dates.get(-1),d=this._utc_to_local(d);this.element.trigger({type:a,date:d,viewMode:this.viewMode,dates:b.map(this.dates,this._utc_to_local),format:b.proxy(function(b,a){0===arguments.length?(b=this.dates.length-1,a=this.o.format):"string"===typeof b&&(a=b,b=this.dates.length-1);a=a||this.o.format;var c=this.dates.get(b);return n.formatDate(c,
a,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&b(this.element).blur(),this},hide:function(){if(this.isInline||!this.picker.is(":visible"))return this;this.focusDate=
null;this.picker.hide().detach();this._detachSecondaryEvents();this.setViewMode(this.o.startView);this.o.forceParse&&this.inputField.val()&&this.setValue();this._trigger("hide");return this},destroy:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date;return this},paste:function(a){var c;if(a.originalEvent.clipboardData&&a.originalEvent.clipboardData.types&&-1!==b.inArray("text/plain",
a.originalEvent.clipboardData.types))c=a.originalEvent.clipboardData.getData("text/plain");else if(window.clipboardData)c=window.clipboardData.getData("Text");else return;this.setDate(c);this.update();a.preventDefault()},_utc_to_local:function(b){if(!b)return b;var a=new Date(b.getTime()+6E4*b.getTimezoneOffset());a.getTimezoneOffset()!==b.getTimezoneOffset()&&(a=new Date(b.getTime()+6E4*a.getTimezoneOffset()));return a},_local_to_utc:function(b){return b&&new Date(b.getTime()-6E4*b.getTimezoneOffset())},
_zero_time:function(b){return b&&new Date(b.getFullYear(),b.getMonth(),b.getDate())},_zero_utc_time:function(b){return b&&c(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate())},getDates:function(){return b.map(this.dates,this._utc_to_local)},getUTCDates:function(){return b.map(this.dates,function(b){return new Date(b)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var b=this.dates.get(-1);return b!==d?new Date(b):null},clearDates:function(){this.inputField.val("");
this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()},setDates:function(){var a=b.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,a);this._trigger("changeDate");this.setValue();return this},setUTCDates:function(){var a=b.isArray(arguments[0])?arguments[0]:arguments;this.setDates.apply(this,b.map(a,this._utc_to_local));return this},setDate:g("setDates"),setUTCDate:g("setUTCDates"),remove:g("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),
setValue:function(){var b=this.getFormattedDate();this.inputField.val(b);return this},getFormattedDate:function(a){a===d&&(a=this.o.format);var c=this.o.language;return b.map(this.dates,function(b){return n.formatDate(b,a,c)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(b){this._process_options({startDate:b});this.update();this.updateNavArrows();return this},getEndDate:function(){return this.o.endDate},setEndDate:function(b){this._process_options({endDate:b});
this.update();this.updateNavArrows();return this},setDaysOfWeekDisabled:function(b){this._process_options({daysOfWeekDisabled:b});this.update();return this},setDaysOfWeekHighlighted:function(b){this._process_options({daysOfWeekHighlighted:b});this.update();return this},setDatesDisabled:function(b){this._process_options({datesDisabled:b});this.update();return this},place:function(){if(this.isInline)return this;var a=this.picker.outerWidth(),c=this.picker.outerHeight(),d=b(this.o.container),e=d.width(),
f="body"===this.o.container?b(document).scrollTop():d.scrollTop(),g=d.offset(),h=[0];this.element.parents().each(function(){var a=b(this).css("z-index");"auto"!==a&&0!==Number(a)&&h.push(Number(a))});var d=Math.max.apply(Math,h)+this.o.zIndexOffset,k=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),t=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),n=k.left-g.left,g=k.top-g.top;
"body"!==this.o.container&&(g+=f);this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(n-=a-t)):0>k.left?(this.picker.addClass("datepicker-orient-left"),n-=k.left-10):n+a>e?(this.picker.addClass("datepicker-orient-right"),n+=t-a):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");
a=this.o.orientation.y;"auto"===a&&(a=0>-f+g-c?"bottom":"top");this.picker.addClass("datepicker-orient-"+a);g="top"===a?g-(c+parseInt(this.picker.css("padding-top"))):g+l;this.o.rtl?this.picker.css({top:g,right:e-(n+t),zIndex:d}):this.picker.css({top:g,left:n,zIndex:d});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var a=this.dates.copy(),c=[],d=!1;arguments.length?(b.each(arguments,b.proxy(function(b,a){a instanceof Date&&(a=this._local_to_utc(a));c.push(a)},
this)),d=!0):(c=(c=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?c.split(this.o.multidateSeparator):[c],delete this.element.data().date);c=b.map(c,b.proxy(function(b){return n.parseDate(b,this.o.format,this.o.language,this.o.assumeNearbyYear)},this));c=b.grep(c,b.proxy(function(b){return!this.dateWithinRange(b)||!b},this),!0);this.dates.replace(c);this.o.updateViewDate&&(this.viewDate=this.dates.length?new Date(this.dates.get(-1)):this.viewDate<
this.o.startDate?new Date(this.o.startDate):this.viewDate>this.o.endDate?new Date(this.o.endDate):this.o.defaultViewDate);d?(this.setValue(),this.element.change()):this.dates.length&&String(a)!==String(this.dates)&&d&&(this._trigger("changeDate"),this.element.change());!this.dates.length&&a.length&&(this._trigger("clearDate"),this.element.change());this.fill();return this},fillDow:function(){if(this.o.showWeekDays){var a=this.o.weekStart,c="<tr>";for(this.o.calendarWeeks&&(c+='<th class="cw">&#160;</th>');a<
this.o.weekStart+7;)c+='<th class="dow',-1!==b.inArray(a,this.o.daysOfWeekDisabled)&&(c+=" disabled"),c+='">'+u[this.o.language].daysMin[a++%7]+"</th>";c+="</tr>";this.picker.find(".datepicker-days thead").append(c)}},fillMonths:function(){for(var b=this._utc_to_local(this.viewDate),a="",c,d=0;12>d;d++)c=b&&b.getMonth()===d?" focused":"",a+='<span class="month'+c+'">'+u[this.o.language].monthsShort[d]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(a){a&&a.length?this.range=
b.map(a,function(b){return b.valueOf()}):delete this.range;this.fill()},getClassNames:function(c){var d=[],f=this.viewDate.getUTCFullYear(),g=this.viewDate.getUTCMonth(),h=e();c.getUTCFullYear()<f||c.getUTCFullYear()===f&&c.getUTCMonth()<g?d.push("old"):(c.getUTCFullYear()>f||c.getUTCFullYear()===f&&c.getUTCMonth()>g)&&d.push("new");this.focusDate&&c.valueOf()===this.focusDate.valueOf()&&d.push("focused");this.o.todayHighlight&&a(c,h)&&d.push("today");-1!==this.dates.contains(c)&&d.push("active");
this.dateWithinRange(c)||d.push("disabled");this.dateIsDisabled(c)&&d.push("disabled","disabled-date");-1!==b.inArray(c.getUTCDay(),this.o.daysOfWeekHighlighted)&&d.push("highlighted");this.range&&(c>this.range[0]&&c<this.range[this.range.length-1]&&d.push("range"),-1!==b.inArray(c.valueOf(),this.range)&&d.push("selected"),c.valueOf()===this.range[0]&&d.push("range-start"),c.valueOf()===this.range[this.range.length-1]&&d.push("range-end"));return d},_fill_yearsView:function(a,c,e,f,g,h,k){var l="",
n=e/10;a=this.picker.find(a);e*=Math.floor(f/e);f=e+9*n;for(var t=Math.floor(this.viewDate.getFullYear()/n)*n,p=b.map(this.dates,function(b){return Math.floor(b.getUTCFullYear()/n)*n}),q,r,u,y=e-n;y<=f+n;y+=n)q=[c],r=null,y===e-n?q.push("old"):y===f+n&&q.push("new"),-1!==b.inArray(y,p)&&q.push("active"),(y<g||y>h)&&q.push("disabled"),y===t&&q.push("focused"),k!==b.noop&&(u=k(new Date(y,0,1)),u===d?u={}:"boolean"===typeof u?u={enabled:u}:"string"===typeof u&&(u={classes:u}),!1===u.enabled&&q.push("disabled"),
u.classes&&(q=q.concat(u.classes.split(/\s+/))),u.tooltip&&(r=u.tooltip)),l+='<span class="'+q.join(" ")+'"'+(r?' title="'+r+'"':"")+">"+y+"</span>";a.find(".datepicker-switch").text(e+"-"+f);a.find("td").html(l)},fill:function(){var a=new Date(this.viewDate),e=a.getUTCFullYear(),f=a.getUTCMonth(),g=-Infinity!==this.o.startDate?this.o.startDate.getUTCFullYear():-Infinity,h=-Infinity!==this.o.startDate?this.o.startDate.getUTCMonth():-Infinity,k=Infinity!==this.o.endDate?this.o.endDate.getUTCFullYear():
Infinity,l=Infinity!==this.o.endDate?this.o.endDate.getUTCMonth():Infinity,q=u[this.o.language].today||u.en.today||"",p=u[this.o.language].clear||u.en.clear||"",t=u[this.o.language].titleFormat||u.en.titleFormat,r;if(!isNaN(e)&&!isNaN(f)){this.picker.find(".datepicker-days .datepicker-switch").text(n.formatDate(a,t,this.o.language));this.picker.find("tfoot .today").text(q).css("display",!0===this.o.todayBtn||"linked"===this.o.todayBtn?"table-cell":"none");this.picker.find("tfoot .clear").text(p).css("display",
!0===this.o.clearBtn?"table-cell":"none");this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"===typeof this.o.title&&""!==this.o.title?"table-cell":"none");this.updateNavArrows();this.fillMonths();a=c(e,f,0);f=a.getUTCDate();a.setUTCDate(f-(a.getUTCDay()-this.o.weekStart+7)%7);f=new Date(a);100>a.getUTCFullYear()&&f.setUTCFullYear(a.getUTCFullYear());f.setUTCDate(f.getUTCDate()+42);for(var f=f.valueOf(),q=[],x;a.valueOf()<f;){p=a.getUTCDay();if(p===this.o.weekStart&&
(q.push("<tr>"),this.o.calendarWeeks)){var t=new Date(+a+(this.o.weekStart-p-7)%7*864E5),t=new Date(Number(t)+(11-t.getUTCDay())%7*864E5),v=new Date(Number(v=c(t.getUTCFullYear(),0,1))+(11-v.getUTCDay())%7*864E5);q.push('<td class="cw">'+((t-v)/864E5/7+1)+"</td>")}x=this.getClassNames(a);x.push("day");var w=a.getUTCDate();this.o.beforeShowDay!==b.noop&&(t=this.o.beforeShowDay(this._utc_to_local(a)),t===d?t={}:"boolean"===typeof t?t={enabled:t}:"string"===typeof t&&(t={classes:t}),!1===t.enabled&&
x.push("disabled"),t.classes&&(x=x.concat(t.classes.split(/\s+/))),t.tooltip&&(r=t.tooltip),t.content&&(w=t.content));x=b.isFunction(b.uniqueSort)?b.uniqueSort(x):b.unique(x);q.push('<td class="'+x.join(" ")+'"'+(r?' title="'+r+'"':"")+' data-date="'+a.getTime().toString()+'">'+w+"</td>");r=null;p===this.o.weekEnd&&q.push("</tr>");a.setUTCDate(a.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(q.join(""));r=u[this.o.language].monthsTitle||u.en.monthsTitle||"Months";var y=this.picker.find(".datepicker-months").find(".datepicker-switch").text(2>
this.o.maxViewMode?r:e).end().find("tbody span").removeClass("active");b.each(this.dates,function(a,b){b.getUTCFullYear()===e&&y.eq(b.getUTCMonth()).addClass("active")});(e<g||e>k)&&y.addClass("disabled");e===g&&y.slice(0,h).addClass("disabled");e===k&&y.slice(l+1).addClass("disabled");if(this.o.beforeShowMonth!==b.noop){var A=this;b.each(y,function(a,c){var f=A.o.beforeShowMonth(new Date(e,a,1));f===d?f={}:"boolean"===typeof f?f={enabled:f}:"string"===typeof f&&(f={classes:f});!1!==f.enabled||b(c).hasClass("disabled")||
b(c).addClass("disabled");f.classes&&b(c).addClass(f.classes);f.tooltip&&b(c).prop("title",f.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,e,g,k,this.o.beforeShowYear);this._fill_yearsView(".datepicker-decades","decade",100,e,g,k,this.o.beforeShowDecade);this._fill_yearsView(".datepicker-centuries","century",1E3,e,g,k,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),a=a.getUTCMonth(),c=-Infinity!==this.o.startDate?
this.o.startDate.getUTCFullYear():-Infinity,d=-Infinity!==this.o.startDate?this.o.startDate.getUTCMonth():-Infinity,e=Infinity!==this.o.endDate?this.o.endDate.getUTCFullYear():Infinity,f=Infinity!==this.o.endDate?this.o.endDate.getUTCMonth():Infinity,g,k,h=1;switch(this.viewMode){case 0:g=b<=c&&a<=d;k=b>=e&&a>=f;break;case 4:h*=10;case 3:h*=10;case 2:h*=10;case 1:g=Math.floor(b/h)*h<=c,k=Math.floor(b/h)*h+h>=e}this.picker.find(".prev").toggleClass("disabled",g);this.picker.find(".next").toggleClass("disabled",
k)}},click:function(a){a.preventDefault();a.stopPropagation();var d;d=b(a.target);d.hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1);d.hasClass("today")&&!d.hasClass("day")&&(this.setViewMode(0),this._setDate(e(),"linked"===this.o.todayBtn?null:"view"));d.hasClass("clear")&&this.clearDates();!d.hasClass("disabled")&&(d.hasClass("month")||d.hasClass("year")||d.hasClass("decade")||d.hasClass("century"))&&(this.viewDate.setUTCDate(1),1===this.viewMode?
(a=d.parent().find("span").index(d),d=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(a)):(a=0,d=Number(d.text()),this.viewDate.setUTCFullYear(d)),this._trigger(n.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(c(d,a,1)):(this.setViewMode(this.viewMode-1),this.fill()));this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus();delete this._focused_from},dayCellClick:function(a){a=b(a.currentTarget).data("date");a=new Date(a);this.o.updateViewDate&&
(a.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),a.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate));this._setDate(a)},navArrowsClick:function(a){a=b(a.currentTarget).hasClass("prev")?-1:1;0!==this.viewMode&&(a*=12*n.viewModes[this.viewMode].navStep);this.viewDate=this.moveMonth(this.viewDate,a);this._trigger(n.viewModes[this.viewMode].e,this.viewDate);this.fill()},_toggle_multidate:function(a){var b=this.dates.contains(a);
a||this.dates.clear();-1!==b?(!0===this.o.multidate||1<this.o.multidate||this.o.toggleActive)&&this.dates.remove(b):(!1===this.o.multidate&&this.dates.clear(),this.dates.push(a));if("number"===typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(a,b){b&&"date"!==b||this._toggle_multidate(a&&new Date(a));if(!b&&this.o.updateViewDate||"view"===b)this.viewDate=a&&new Date(a);this.fill();this.setValue();b&&"view"===b||this._trigger("changeDate");this.inputField.trigger("change");
!this.o.autoclose||b&&"date"!==b||this.hide()},moveDay:function(a,b){var c=new Date(a);c.setUTCDate(a.getUTCDate()+b);return c},moveWeek:function(a,b){return this.moveDay(a,7*b)},moveMonth:function(a,b){if(!a||isNaN(a.getTime()))return this.o.defaultViewDate;if(!b)return a;var c=new Date(a.valueOf()),d=c.getUTCDate(),e=c.getUTCMonth(),f=Math.abs(b),g;b=0<b?1:-1;if(1===f)f=-1===b?function(){return c.getUTCMonth()===e}:function(){return c.getUTCMonth()!==g},g=e+b,c.setUTCMonth(g),g=(g+12)%12;else{for(var h=
0;h<f;h++)c=this.moveMonth(c,b);g=c.getUTCMonth();c.setUTCDate(d);f=function(){return g!==c.getUTCMonth()}}for(;f();)c.setUTCDate(--d),c.setUTCMonth(g);return c},moveYear:function(a,b){return this.moveMonth(a,12*b)},moveAvailableDate:function(a,b,c){do{a=this[c](a,b);if(!this.dateWithinRange(a))return!1;c="moveDay"}while(this.dateIsDisabled(a));return a},weekOfDateIsDisabled:function(a){return-1!==b.inArray(a.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(c){return this.weekOfDateIsDisabled(c)||
0<b.grep(this.o.datesDisabled,function(b){return a(c,b)}).length},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":visible")){var b=!1,c,d,e=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide();a.preventDefault();a.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;
c=37===a.keyCode||38===a.keyCode?-1:1;if(0===this.viewMode)a.ctrlKey?(d=this.moveAvailableDate(e,c,"moveYear"))&&this._trigger("changeYear",this.viewDate):a.shiftKey?(d=this.moveAvailableDate(e,c,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===a.keyCode||39===a.keyCode?d=this.moveAvailableDate(e,c,"moveDay"):this.weekOfDateIsDisabled(e)||(d=this.moveAvailableDate(e,c,"moveWeek"));else if(1===this.viewMode){if(38===a.keyCode||40===a.keyCode)c*=4;d=this.moveAvailableDate(e,c,"moveMonth")}else if(2===
this.viewMode){if(38===a.keyCode||40===a.keyCode)c*=4;d=this.moveAvailableDate(e,c,"moveYear")}d&&(this.focusDate=this.viewDate=d,this.setValue(),this.fill(),a.preventDefault());break;case 13:if(!this.o.forceParse)break;e=this.focusDate||this.dates.get(-1)||this.viewDate;this.o.keyboardNavigation&&(this._toggle_multidate(e),b=!0);this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(a.preventDefault(),a.stopPropagation(),this.o.autoclose&&
this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}b&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))}else if(40===a.keyCode||27===a.keyCode)this.show(),a.stopPropagation()},setViewMode:function(a){this.viewMode=a;this.picker.children("div").hide().filter(".datepicker-"+n.viewModes[this.viewMode].clsName).show();this.updateNavArrows();this._trigger("changeViewMode",new Date(this.viewDate))}};
var q=function(a,c){b.data(a,"datepicker",this);this.element=b(a);this.inputs=b.map(c.inputs,function(a){return a.jquery?a[0]:a});delete c.inputs;this.keepEmptyValues=c.keepEmptyValues;delete c.keepEmptyValues;p.call(b(this.inputs),c).on("changeDate",b.proxy(this.dateUpdated,this));this.pickers=b.map(this.inputs,function(a){return b.data(a,"datepicker")});this.updateDates()};q.prototype={updateDates:function(){this.dates=b.map(this.pickers,function(a){return a.getUTCDate()});this.updateRanges()},
updateRanges:function(){var a=b.map(this.dates,function(a){return a.valueOf()});b.each(this.pickers,function(b,c){c.setRange(a)})},dateUpdated:function(a){if(!this.updating){this.updating=!0;var c=b.data(a.target,"datepicker");if(c!==d){var e=c.getUTCDate(),f=this.keepEmptyValues;a=b.inArray(a.target,this.inputs);var g=a-1,h=a+1,k=this.inputs.length;if(-1!==a){b.each(this.pickers,function(a,b){b.getUTCDate()||b!==c&&f||b.setUTCDate(e)});if(e<this.dates[g])for(;0<=g&&e<this.dates[g];)this.pickers[g--].setUTCDate(e);
else if(e>this.dates[h])for(;h<k&&e>this.dates[h];)this.pickers[h++].setUTCDate(e);this.updateDates();delete this.updating}}}},destroy:function(){b.map(this.pickers,function(a){a.destroy()});b(this.inputs).off("changeDate",this.dateUpdated);delete this.element.data().datepicker},remove:g("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var v=b.fn.datepicker,p=function(a){var c=Array.apply(null,arguments);c.shift();var e;this.each(function(){var d=
b(this),g=d.data("datepicker"),l="object"===typeof a&&a;if(!g){var g=f(this,"date"),n=b.extend({},w,g,l),n=k(n.language),l=b.extend({},w,n,g,l);d.hasClass("input-daterange")||l.inputs?(b.extend(l,{inputs:l.inputs||d.find("input").toArray()}),g=new q(this,l)):g=new h(this,l);d.data("datepicker",g)}"string"===typeof a&&"function"===typeof g[a]&&(e=g[a].apply(g,c))});if(e===d||e instanceof h||e instanceof q)return this;if(1<this.length)throw Error("Using only allowed for the collection of a single element ("+
a+" function)");return e};b.fn.datepicker=p;var w=b.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:b.noop,beforeShowMonth:b.noop,beforeShowYear:b.noop,beforeShowDecade:b.noop,beforeShowCentury:b.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",
orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},r=b.fn.datepicker.locale_opts=["format","rtl","weekStart"];b.fn.datepicker.Constructor=h;var u=b.fn.datepicker.dates={en:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
daysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),daysMin:"Su Mo Tu We Th Fr Sa".split(" "),months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},n={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",
e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1E3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(a){if("function"===typeof a.toValue&&"function"===typeof a.toDisplay)return a;var b=a.replace(this.validParts,"\x00").split("\x00");a=a.match(this.validParts);if(!b||!b.length||!a||0===
a.length)throw Error("Invalid date format.");return{separators:b,parts:a}},parseDate:function(a,c,f,g){function k(a,b){!0===b&&(b=10);100>a&&(a+=2E3,a>(new Date).getFullYear()+b&&(a-=100));return a}function l(){var a=this.slice(0,r[t].length),b=r[t].slice(0,a.length);return a.toLowerCase()===b.toLowerCase()}if(!a)return d;if(a instanceof Date)return a;"string"===typeof c&&(c=n.parseFormat(c));if(c.toValue)return c.toValue(a,c,f);var q={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},p={yesterday:"-1d",
today:"+0d",tomorrow:"+1d"},r,t;a in p&&(a=p[a]);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(a)){r=a.match(/([\-+]\d+)([dmwy])/gi);a=new Date;for(t=0;t<r.length;t++)c=r[t].match(/([\-+]\d+)([dmwy])/i),f=Number(c[1]),p=q[c[2].toLowerCase()],a=h.prototype[p](a,f);return h.prototype._zero_utc_time(a)}r=a&&a.match(this.nonpunctuation)||[];var q={},v="yyyy yy M MM m mm d dd".split(" "),p={yyyy:function(a,b){return a.setUTCFullYear(g?k(b,g):b)},m:function(a,b){if(isNaN(a))return a;for(--b;0>b;)b+=
12;b%=12;for(a.setUTCMonth(b);a.getUTCMonth()!==b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}},x;p.yy=p.yyyy;p.M=p.MM=p.mm=p.m;p.dd=p.d;a=e();var w=c.parts.slice();r.length!==w.length&&(w=b(w).filter(function(a,c){return-1!==b.inArray(c,v)}).toArray());if(r.length===w.length){var z;t=0;for(z=w.length;t<z;t++){x=parseInt(r[t],10);c=w[t];if(isNaN(x))switch(c){case "MM":x=b(u[f].months).filter(l);x=b.inArray(x[0],u[f].months)+1;break;case "M":x=b(u[f].monthsShort).filter(l),
x=b.inArray(x[0],u[f].monthsShort)+1}q[c]=x}for(t=0;t<v.length;t++)c=v[t],c in q&&!isNaN(q[c])&&(f=new Date(a),p[c](f,q[c]),isNaN(f)||(a=f))}return a},formatDate:function(a,c,d){if(!a)return"";"string"===typeof c&&(c=n.parseFormat(c));if(c.toDisplay)return c.toDisplay(a,c,d);d={d:a.getUTCDate(),D:u[d].daysShort[a.getUTCDay()],DD:u[d].days[a.getUTCDay()],m:a.getUTCMonth()+1,M:u[d].monthsShort[a.getUTCMonth()],MM:u[d].months[a.getUTCMonth()],yy:a.getUTCFullYear().toString().substring(2),yyyy:a.getUTCFullYear()};
d.dd=(10>d.d?"0":"")+d.d;d.mm=(10>d.m?"0":"")+d.m;a=[];for(var e=b.extend([],c.separators),f=0,g=c.parts.length;f<=g;f++)e.length&&a.push(e.shift()),a.push(d[c.parts[f]]);return a.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+w.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+w.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};
n.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+n.headTemplate+"<tbody></tbody>"+n.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+n.headTemplate+n.contTemplate+n.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+n.headTemplate+n.contTemplate+n.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+n.headTemplate+n.contTemplate+
n.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+n.headTemplate+n.contTemplate+n.footTemplate+"</table></div></div>";b.fn.datepicker.DPGlobal=n;b.fn.datepicker.noConflict=function(){b.fn.datepicker=v;return this};b.fn.datepicker.version="1.7.1";b.fn.datepicker.deprecated=function(a){var b=window.console;b&&b.warn&&b.warn("DEPRECATED: "+a)};b(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(a){var c=
b(this);c.data("datepicker")||(a.preventDefault(),p.call(c,"show"))});b(function(){p.call(b('[data-provide="datepicker-inline"]'))})});var glCourse_List=[],LOAD_DEVICE_NUM=20,RECORD_PAGE_COUNT=5,PreLoadIndex=-1,CurrentLoadIndex=0,glCurrentCourse_clicktime=new Date("2019/01/01"),glCurrentCourse_id="",glTargetStartDate=null,glTargetEndDate=null,glCurrentCourse_Records=[],glDataLoading=0,glTargetDate=getTodayDate(),glShowDataMode=0;check_loading_status();
function check_loading_status(){switch(CurrentLoadIndex){case 0:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_courses());break;case 1:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,click_course(""),CurrentLoadIndex=2);case 2:PreLoadIndex!=CurrentLoadIndex&&
(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),check_cookies(),PreLoadIndex=CurrentLoadIndex)}1!=CurrentLoadIndex?setTimeout(check_loading_status,100):console.log("check_loading_status() Stop.")}
function load_courses(){$.getJSON(gl_target_server+"/php/course.php","loadcourses=1&project_id="+project_id,function(b){$.each(b,function(b,c){var e={};e.courseId=c.courseId;e.resourceId=c.resourceId;e.title=c.title;e.description=c.description;e.startDate=c.start;e.endDate=c.end;e.startTime=c.startTime;e.endTime=c.endTime;e.startRecur=c.startRecur;e.endRecur=c.endRecur;e.backgroundColor=c.backgroundColor;e.borderColor=c.borderColor;e.allDay=!1;"1"===c.allDay&&(e.allDay=!0);glCourse_List.push(e)})}).success(function(){add_courses_to_table();
CurrentLoadIndex=1}).error(function(){CurrentLoadIndex=1}).complete(function(){CurrentLoadIndex=1})}
function add_courses_to_table(){for(var b=document.getElementById("course_list_content");1<=b.rows.length;)b.deleteRow(0);console.log("add_courses_to_table() glCourse_List.length:"+glCourse_List.length);for(var d=0;d<glCourse_List.length;d++){var c=glCourse_List[d],e=document.createElement("tr");b.appendChild(e);var a=document.createElement("td");a.textContent=d+1;a.setAttribute("id","id_row_courseid_"+c.courseId);a.setAttribute("onclick",'click_course("'+c.courseId+'");return false;');e.appendChild(a);
a=document.createElement("td");a.setAttribute("id","id_row_title_"+c.courseId);a.setAttribute("onclick",'click_course("'+c.courseId+'");return false;');e.appendChild(a);var g=document.createElement("span");g.setAttribute("style","display:inline;padding:.1em .6em .3em;font-size:95%;font-weight:700;line-height:1;position:relative;top:-1px;color:#fff;border-radius:2px;background-color:"+c.backgroundColor);g.textContent=c.title;a.appendChild(g);a=document.createElement("td");a.setAttribute("id","id_row_description_"+
c.courseId);a.setAttribute("onclick",'click_course("'+c.courseId+'");return false;');a.textContent=c.description;e.appendChild(a);a=document.createElement("td");a.setAttribute("id","id_row_datetime_"+c.courseId);a.setAttribute("onclick",'click_course("'+c.courseId+'");return false;');e.appendChild(a);if(0<c.startRecur.length&&0<c.endRecur.length){var f=document.createElement("span");f.textContent="\u65e5\u671f\u5f9e ";a.appendChild(f);f=document.createElement("span");f.setAttribute("class","label label-info");
f.textContent=c.startRecur;a.appendChild(f);g=document.createElement("span");g.textContent=" \u5230 ";a.appendChild(g);g=document.createElement("span");g.setAttribute("class","label label-info");g.textContent=c.endRecur;a.appendChild(g);e=document.createElement("br");a.appendChild(e);c.allDay?(c=document.createElement("span"),c.setAttribute("class","badge bg-green"),c.textContent="All Day",a.appendChild(c),e=document.createElement("br")):(e=document.createElement("span"),e.textContent="\u6642\u9593\u5f9e ",
a.appendChild(e),e=document.createElement("span"),e.setAttribute("class","label label-success"),e.textContent=c.startTime,a.appendChild(e),e=document.createElement("span"),e.textContent=" \u5230 ",a.appendChild(e),e=document.createElement("span"),e.setAttribute("class","label label-success"),e.textContent=c.endTime)}else g=convertPrettyDateOnly(c.startDate),e=convertPrettyDateOnly(c.endDate),g===e?(e=document.createElement("span"),e.textContent="\u65e5\u671f ",a.appendChild(e),f=document.createElement("span"),
f.setAttribute("class","label label-warning"),f.textContent=g,a.appendChild(f)):(f=document.createElement("span"),f.textContent="\u65e5\u671f\u5f9e ",a.appendChild(f),f=document.createElement("span"),f.setAttribute("class","label label-info"),f.textContent=g,a.appendChild(f),g=document.createElement("span"),g.textContent=" \u5230 ",a.appendChild(g),g=document.createElement("span"),g.setAttribute("class","label label-info"),g.textContent=e,a.appendChild(g)),e=document.createElement("br"),a.appendChild(e),
c.allDay?(c=document.createElement("span"),c.setAttribute("class","badge bg-green"),c.textContent="All Day",a.appendChild(c),e=document.createElement("br")):(e=document.createElement("span"),e.textContent="\u6642\u9593\u5f9e ",a.appendChild(e),e=document.createElement("span"),e.setAttribute("class","label label-success"),e.textContent=convertPrettyTimeOnly(c.startDate),a.appendChild(e),e=document.createElement("span"),e.textContent=" \u5230 ",a.appendChild(e),e=document.createElement("span"),e.setAttribute("class",
"label label-success"),e.textContent=convertPrettyTimeOnly(c.endDate));a.appendChild(e)}}
function click_course(b){var d=Math.abs((new Date).getTime()-glCurrentCourse_clicktime.getTime());if(500>d||1==glDataLoading)console.log("click_course() diffTimeInMS:"+d);else{glDataLoading=1;glCurrentCourse_clicktime=new Date;for(d=0;d<glCourse_List.length;d++){var c=glCourse_List[d],e=document.getElementById("id_row_courseid_"+c.courseId),a=document.getElementById("id_row_title_"+c.courseId),g=document.getElementById("id_row_description_"+c.courseId),f=document.getElementById("id_row_datetime_"+
c.courseId),k="background-color:#FFFFFF;";if(0==glCurrentCourse_id.length||c.courseId===b)glCurrentCourse_id=c.courseId,k="background-color:#CCEEFF;";e.setAttribute("style",k);a.setAttribute("style",k);g.setAttribute("style",k);f.setAttribute("style",k)}b=document.getElementById("daily_targetdate");void 0!=b&&(b.textContent=convertToTimelineDate(glTargetDate));load_course_record()}}
function load_course_record(){console.log("load_course_record() glCurrentCourse_id:"+glCurrentCourse_id);var b=document.getElementById("record_box_title");void 0!=b&&(b.textContent="Loading...");glCurrentCourse_Records=[];glTargetEndDate=glTargetStartDate=null;load_recent_record_express(glCurrentCourse_id);clear_timeline()}
function load_recent_record_express(b){void 0==glTargetStartDate&&(glTargetStartDate=getCourseTargetDate(0));var d=RECORD_PAGE_COUNT,c=glTargetStartDate;1==glShowDataMode&&(d=1,c=glTargetDate);$.getJSON(gl_target_server+"/php/course.php","checkrecentrollcallrecord=1&courseId="+b+"&recentdays="+d+"&startdate="+c+"&project_id="+project_id,function(b){glTargetEndDate=glTargetStartDate;var a=Number(glTargetEndDate),c;for(c in b){var d=b[c],k=d.infoOfDate;if(1!=glShowDataMode||k===glTargetDate){var l=
{};l.date=k;l.tags=d.tags;l.tagnames=d.tagnames;d=Number(k);d<a&&(a=d,glTargetEndDate=k);glCurrentCourse_Records.push(l)}}update_show_data()})}function reload_course_info(){glCurrentCourse_Records=[];glTargetStartDate=getCourseTargetDateV1(glTargetEndDate,-1);glTargetEndDate=getCourseTargetDateV1(glTargetStartDate,RECORD_PAGE_COUNT);removeElement("reload_btn_id");load_recent_record_express(glCurrentCourse_id)}
function load_course_rollcall_detail(b,d){var c=document.getElementById("timeline_footer_btn1_"+d);if(void 0!=c){if("\u8b80\u53d6\u4e2d..."===c.textContent||"\u8b80\u53d6\u5b8c\u6210"===c.textContent)return;c.textContent="\u8b80\u53d6\u4e2d..."}show_detail_course(d,b)}
function show_detail_course(b,d){var c=convertToTimelineDate(d);console.log("show_detail_course() uiid:"+b+", query_date:"+c);var e="record_box_table_course_"+b;if(void 0!=document.getElementById(e))console.log("show_detail_course() table_id:"+e+", existed!");else{var a=[];$.getJSON(gl_target_server+"/php/fpnodes.php","loadcoursetrack=1&courseid="+glCurrentCourse_id+"&targetdate="+c+"&project_id="+project_id,function(c){$.each(c,function(b,c){var d={};d.nodeid=c.nodeid;d.nodename=c.nodename;d.count=
c.count;d.max_time=c.max_time;d.min_time=c.min_time;d.total_time=c.total_time;a.push(d)});console.log("show_detail_course() CurrentCourse_Records.length:"+a.length);put_record_to_table(b,glCurrentCourse_id,a)})}}
function put_record_to_table(b,d,c){d=document.getElementById("timeline_footer_"+b);var e=create_record_table_rollcall(b);d.appendChild(e);d=c.length;var a=50*(d+1)+100;5<d&&(a=300);e.setAttribute("style","height:"+a+"px;overflow:scroll");e=document.getElementById("record_table_rollcall_body_"+b);a=1;for(index in c){var g=c[index],g=create_course_rollcall_row(a,g);e.appendChild(g);a++}update_footer_btn1_ui(b,"\u8b80\u53d6\u5b8c\u6210");0==d&&(g={nodeid:"",nodename:"\u7121\u8cc7\u6599",count:"",max_time:"",
min_time:"",total_time:""},g=create_course_rollcall_row(0,g),e.appendChild(g))}
function create_course_rollcall_row(b,d){var c=0,e=document.createElement("tr");0==b%2&&e.setAttribute("bgcolor","#ebebe0");e.setAttribute("id","table_row_"+b);e.appendChild(document.createElement("td"));e.cells[c].appendChild(document.createTextNode(""+b));c++;e.appendChild(document.createElement("td"));var a=document.createElement("span");a.setAttribute("class","badge bg-green");a.textContent=d.nodename;e.cells[c].appendChild(a);c++;a=document.createElement("td");e.appendChild(a);var g=document.createElement("span");
g.setAttribute("class","label label-warning");g.textContent=convertPrettyCourseTime(d.min_time);a.appendChild(g);c++;a=document.createElement("td");e.appendChild(a);g=document.createElement("span");g.setAttribute("class","label label-info");g.textContent=convertPrettyCourseTime(d.max_time);a.appendChild(g);c++;e.appendChild(document.createElement("td"));e.cells[c].appendChild(document.createTextNode(convertPrettyTime(d.total_time)));return e}
function create_record_table_rollcall(b){var d=document.createElement("div");d.setAttribute("id","record_box_table_course_"+b);var c=document.createElement("div");c.setAttribute("class","box");d.appendChild(c);var e=document.createElement("div");e.setAttribute("class","box-body no-padding");c.appendChild(e);c=document.createElement("table");c.setAttribute("class","table table-bordered");e.appendChild(c);var a=document.createElement("thead");c.appendChild(a);e=document.createElement("tr");e.setAttribute("bgcolor",
"#cce6ff");e.setAttribute("id","record_table_head");a.appendChild(e);a=document.createElement("th");a.setAttribute("style","width: 10px");a.textContent="#";e.appendChild(a);a=document.createElement("th");a.setAttribute("style","width: 150px");a.textContent="\u4eba\u54e1\u540d\u7a31";e.appendChild(a);a=document.createElement("th");a.setAttribute("style","width: 120px; text-align:center");a.textContent="\u958b\u59cb\u4e0a\u8ab2\u6642\u9593";e.appendChild(a);a=document.createElement("th");a.setAttribute("style",
"width: 120px; text-align:center");a.textContent="\u96e2\u958b\u8ab2\u7a0b\u6642\u9593";e.appendChild(a);a=document.createElement("th");a.textContent="\u4e0a\u8ab2\u7e3d\u6642\u9593";e.appendChild(a);e=document.createElement("tbody");e.setAttribute("id","record_table_rollcall_body_"+b);c.appendChild(e);return d}function update_footer_btn1_ui(b,d){var c=document.getElementById("timeline_footer_btn1_"+b);void 0!=c&&(c.textContent=d)}
function update_show_data(){show_data_on_timeline();glDataLoading=0;var b=document.getElementById("record_box_title");if(void 0!=b){for(var d="",c=0;c<glCourse_List.length;c++){var e=glCourse_List[c];glCurrentCourse_id===e.courseId&&(d=e.title)}b.textContent=d}}
function show_data_on_timeline(){var b=document.getElementById("main_timeline");if(0==glCurrentCourse_Records.length){var d=create_nodata_btn();b.appendChild(d)}else{for(d in glCurrentCourse_Records){var c=glCurrentCourse_Records[d],e=create_time_label(convertToTimelineDate(c.date));b.appendChild(e);c=create_course_rollcall_data_info("table_"+c.date,c.date,c);b.appendChild(c)}0==glShowDataMode&&(d=glCurrentCourse_Records.length<RECORD_PAGE_COUNT?create_nodata_btn():create_reload_btn(),b.appendChild(d))}}
function create_course_rollcall_data_info(b,d,c){var e=document.createElement("li"),a=document.createElement("i");a.setAttribute("class","fa fa-calendar bg-teal");e.appendChild(a);a=document.createElement("div");a.setAttribute("class","timeline-item");e.appendChild(a);var g=create_timeline_time_header("\u8ab2\u7a0b\u7d00\u9304");a.appendChild(g);g=create_timeline_time_body(b,"\u5171 "+c.tags.length+" \u500b\u5b78\u54e1");a.appendChild(g);c=create_tag_badge(c.tags,c.tagnames);a.appendChild(c);b=create_timeline_time_footer(d,
b);a.appendChild(b);return e}function create_timeline_time_header(b){var d=document.createElement("h3");d.setAttribute("class","timeline-header");d.textContent=b;return d}function create_timeline_time_body(b,d){var c=document.createElement("div");c.setAttribute("class","timeline-body");c.textContent=d;return c}
function create_timeline_time_footer(b,d){var c=document.createElement("div");c.setAttribute("class","timeline-footer");var e=document.createElement("a");e.setAttribute("class","btn btn-primary btn-xs");e.setAttribute("onclick",'load_course_rollcall_detail("'+b+'","'+d+'");');e.setAttribute("id","timeline_footer_btn1_"+d);e.textContent="\u67e5\u770b\u8a73\u7d30\u8cc7\u6599";c.appendChild(e);e=document.createElement("div");e.setAttribute("id","timeline_footer_"+d);c.appendChild(e);return c}
function create_tag_badge(b,d){var c=document.createElement("div"),e=document.createElement("table");c.appendChild(e);var a=document.createElement("tr");e.appendChild(a);var g=document.createElement("td");g.setAttribute("style","width:50px;text-align:center;");g.textContent="\u5b78\u54e1:";a.appendChild(g);var f;for(f=0;f<b.length;f++){0!=f&&0==f%5&&(a=document.createElement("tr"),e.appendChild(a));g=document.createElement("td");a.appendChild(g);var k=document.createElement("span");k.setAttribute("class",
"badge bg-green");k.textContent=d[f];g.appendChild(k)}return c}function create_nodata_btn(){var b=document.createElement("li"),d=document.createElement("span");d.setAttribute("class","bg-red");b.appendChild(d);var c=document.createElement("button");c.setAttribute("type","button");c.setAttribute("class","btn btn-default btn-lrg ajax");c.textContent=DEFINE_STRING_nodata;d.appendChild(c);return b}
function create_reload_btn(){var b=document.createElement("li");b.setAttribute("id","reload_btn_id");b.setAttribute("class","time-label");var d=document.createElement("span");d.setAttribute("class","bg-green");b.appendChild(d);var c=document.createElement("button");c.setAttribute("type","button");c.setAttribute("onclick","reload_course_info();");c.setAttribute("class","btn btn-default btn-lrg ajax");c.setAttribute("title","Ajax Request");c.setAttribute("id","AjaxLoadMode");c.textContent=DEFINE_STRING_reload;
d.appendChild(c);d=document.createElement("i");d.setAttribute("class","fa fa-spin fa-refresh");c.appendChild(d);return b}function clear_timeline(){for(var b=document.getElementById("main_timeline");b.firstChild;)b.removeChild(b.firstChild)}function create_time_label(b){var d=document.createElement("li");d.setAttribute("class","time-label");var c=document.createElement("span");c.setAttribute("class","bg-yellow");c.textContent=b;d.appendChild(c);return d}
function removeElement(b){b=document.getElementById(b);return b.parentNode.removeChild(b)}function convertPrettyDateOnly(b){var d=moment(b,"YYYY-MM-DD HH:mm:ss");b=d.format("YYYY");var c=d.format("M"),d=d.format("D");return b+"\u5e74"+c+"\u6708"+d+"\u65e5 "}function convertPrettyTimeOnly(b){var d=moment(b,"YYYY-MM-DD HH:mm:ss");b=d.hour();var c=d.minutes(),d=d.seconds(),e="";0<=b&&(e+=b+"\u9ede");0<=c&&(e+=c+"\u5206");0<=d&&(e+=d+"\u79d2");return e}
function add_search_tag_to_table(b){for(var d=document.getElementById("search_list_content");1<=d.rows.length;)d.deleteRow(0);for(var c=0;c<glCourse_List.length;c++){var e=glCourse_List[c];if(!(0>e.title.indexOf(b))){var a=document.createElement("tr");d.appendChild(a);var g=document.createElement("td");g.setAttribute("id","id_row_course_name_"+e.courseId);g.setAttribute("onclick",'click_course("'+e.courseId+'");return false;');a.appendChild(g);a=document.createElement("span");a.setAttribute("class",
"badge bg-green");a.textContent=e.title;a.setAttribute("onclick",'click_course("'+e.courseId+'");return false;');g.appendChild(a)}}}var $source=document.querySelector("#tab_search_text");$source.addEventListener("input",course_search_text_change);function course_search_text_change(b){b=document.getElementById("tab_search_text").value;add_search_tag_to_table(b);setCookie("course_search_text",b,10)}
function check_cookies(){var b=getCookie("course_search_text");document.getElementById("tab_search_text").value=b;add_search_tag_to_table(b)}function setCookie(b,d,c){var e="";c&&(e=new Date,e.setTime(e.getTime()+864E5*c),e="; expires="+e.toUTCString());document.cookie=b+"="+(d||"")+e+"; path=/"}
function getCookie(b){b+="=";for(var d=document.cookie.split(";"),c=0;c<d.length;c++){for(var e=d[c];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return null}function eraseCookie(b){document.cookie=b+"=; Max-Age=-99999999;"}
function click_show_target_date(){console.log("click_show_target_date()");var b=document.getElementById("show_target_date");void 0==b?console.log("click_show_target_date() checkbox_ui == undefined"):(b.checked?(glShowDataMode=1,document.getElementById("course_pdf_report_UI").style.display="block"):(glShowDataMode=0,document.getElementById("course_pdf_report_UI").style.display="none"),load_course_record())}
function get_course_pdf_report(){document.getElementById("course_pdf_report_status").textContent="\u7522\u751f\u5831\u8868\u4e2d...";var b=convertToTimelineDate(glTargetDate),d={};d.project_id=""+project_id;d.loadcoursepdfreport=1;d.courseId=glCurrentCourse_id;d.date=b;jQuery.ajax({url:gl_target_server+"/php/course.php",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(d),success:function(b){console.log("get_course_pdf_report() success:"+b.success+" pdfreport:"+b.pdfreport);
for(var d=document.getElementById("course_pdf_report_status");d.firstChild;)d.removeChild(d.firstChild);if("true"===b.success){var a=document.createElement("a");a.setAttribute("href",b.pdfreport);a.setAttribute("target","_blank");a.textContent="\u4e0b\u8f09\u5831\u8868";d.appendChild(a);b=document.createElement("i");b.setAttribute("class","fa fa-file-pdf-o");a.appendChild(b)}else document.getElementById("course_pdf_report_status").textContent="\u7522\u751f\u5831\u8868\u5931\u6557!"}});return!1}
function move_daily_forward(){glTargetDate=moment(glTargetDate,"YYYYMMDD").add(1,"day").format("YYYYMMDD");var b=document.getElementById("daily_targetdate");void 0!=b&&(b.textContent=convertToTimelineDate(glTargetDate));load_course_record()}function move_daily_backward(){glTargetDate=moment(glTargetDate,"YYYYMMDD").subtract(1,"day").format("YYYYMMDD");var b=document.getElementById("daily_targetdate");void 0!=b&&(b.textContent=convertToTimelineDate(glTargetDate));load_course_record()}
$("#daily_targetdate").datepicker({autoclose:!0,format:"YYYY-MM-DD",language:"zh-TW"}).on("changeDate",function(b){glTargetDate=moment(new Date(b.date.valueOf())).format("YYYYMMDD");b=document.getElementById("daily_targetdate");void 0!=b&&(b.textContent=convertToTimelineDate(glTargetDate));load_course_record()});function getTodayDate(){return moment().format("YYYYMMDD")}function convertTargetDateTime(b){return moment(b,"YYYYMMDD").format("YYYY-MM-DD HH:mm:ss")}
function convertToTimelineDate(b){return moment(b,"YYYYMMDD").format("YYYY-MM-DD")}function getCourseTargetDate(b){return moment().add(b,"d").format("YYYYMMDD")}function getCourseTargetDateV1(b,d){return moment(b,"YYYYMMDD").add(d,"d").format("YYYYMMDD")}function getTargetDateTime(b,d){return moment(b,"YYYY-MM-DD").add(d,"d").format("YYYY-MM-DD HH:mm:ss")}
function convertPrettyTime(b){if(0==b.length)return"";var d=moment(b,"HH:mm:ss");b=d.hour();var c=d.minutes(),d=d.seconds(),e="";0<b&&(e+=b+"\u5c0f\u6642");0<c&&(e+=c+"\u5206");0<d&&(e+=d+"\u79d2");return e}function convertPrettyCourseTime(b){if(0==b.length)return"";var d=moment(b,"YYYY-MM-DD HH:mm:ss");b=d.hour();var c=d.minutes(),d=d.seconds();return b=""+(b+"\u9ede")+(c+"\u5206")+(d+"\u79d2")}
function open_footprintcourses_page(){window.open("/index.php/vilsfootprintcourses/"+project_id,"_blank").focus()};
