var $jscomp={scope:{},findInternal:function(a,b,c){a instanceof String&&(a=String(a));for(var e=a.length,d=0;d<e;d++){var f=a[d];if(b.call(c,f,d,a))return{i:d,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,e){if(b){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];d in c||(c[d]={});c=c[d]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,c,e){var d=this.length||0;0>c&&(c=Math.max(0,d+c));if(null==e||e>d)e=d;e=Number(e);0>e&&(e=Math.max(0,d+e));for(c=Number(c||0);c<e;c++)this[c]=a;return this}},"es6-impl","es3");
(function(a,b,c,e){var d=function(b,c){this.widget="";this.$element=a(b);this.defaultTime=c.defaultTime;this.disableFocus=c.disableFocus;this.isOpen=c.isOpen;this.minuteStep=c.minuteStep;this.modalBackdrop=c.modalBackdrop;this.secondStep=c.secondStep;this.showInputs=c.showInputs;this.showMeridian=c.showMeridian;this.showSeconds=c.showSeconds;this.template=c.template;this.appendWidgetTo=c.appendWidgetTo;this.upArrowStyle=c.upArrowStyle;this.downArrowStyle=c.downArrowStyle;this.containerClass=c.containerClass;
this._init()};d.prototype={constructor:d,_init:function(){var b=this;if(this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend")){if(this.$element.parent(".input-append, .input-prepend").find(".add-on").length)this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":a.proxy(this.showWidget,this)});else this.$element.closest(this.containerClass).find(".add-on").on({"click.timepicker":a.proxy(this.showWidget,this)});this.$element.on({"focus.timepicker":a.proxy(this.highlightUnit,
this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,this),"blur.timepicker":a.proxy(this.blurElement,this)})}else if(this.template)this.$element.on({"focus.timepicker":a.proxy(this.showWidget,this),"click.timepicker":a.proxy(this.showWidget,this),"blur.timepicker":a.proxy(this.blurElement,this)});else this.$element.on({"focus.timepicker":a.proxy(this.highlightUnit,this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,
this),"blur.timepicker":a.proxy(this.blurElement,this)});this.$widget=!1!==this.template?a(this.getTemplate()).prependTo(this.$element.parents(this.appendWidgetTo)).on("click",a.proxy(this.widgetClick,this)):!1;this.showInputs&&!1!==this.$widget&&this.$widget.find("input").each(function(){a(this).on({"click.timepicker":function(){a(this).select()},"keydown.timepicker":a.proxy(b.widgetKeydown,b)})});this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=e;this.updateFromElementVal()},
decrementHour:function(){if(this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else 0===this.hour?this.hour=23:this.hour--;this.update()},decrementMinute:function(a){a=a?this.minute-a:this.minute-this.minuteStep;0>a?(this.decrementHour(),this.minute=a+60):this.minute=a;this.update()},decrementSecond:function(){var a=this.second-this.secondStep;0>a?(this.decrementMinute(!0),
this.second=a+60):this.second=a;this.update()},elementKeydown:function(a){switch(a.keyCode){case 9:this.updateFromElementVal();switch(this.highlightedUnit){case "hour":a.preventDefault();this.highlightNextUnit();break;case "minute":if(this.showMeridian||this.showSeconds)a.preventDefault(),this.highlightNextUnit();break;case "second":this.showMeridian&&(a.preventDefault(),this.highlightNextUnit())}break;case 27:this.updateFromElementVal();break;case 37:a.preventDefault();this.highlightPrevUnit();this.updateFromElementVal();
break;case 38:a.preventDefault();switch(this.highlightedUnit){case "hour":this.incrementHour();this.highlightHour();break;case "minute":this.incrementMinute();this.highlightMinute();break;case "second":this.incrementSecond();this.highlightSecond();break;case "meridian":this.toggleMeridian(),this.highlightMeridian()}break;case 39:a.preventDefault();this.updateFromElementVal();this.highlightNextUnit();break;case 40:switch(a.preventDefault(),this.highlightedUnit){case "hour":this.decrementHour();this.highlightHour();
break;case "minute":this.decrementMinute();this.highlightMinute();break;case "second":this.decrementSecond();this.highlightSecond();break;case "meridian":this.toggleMeridian(),this.highlightMeridian()}}},formatTime:function(a,b,c,e){return(10>a?"0"+a:a)+":"+(10>b?"0"+b:b)+(this.showSeconds?":"+(10>c?"0"+c:c):"")+(this.showMeridian?" "+e:"")},getCursorPosition:function(){var a=this.$element.get(0);if("selectionStart"in a)return a.selectionStart;if(c.selection){a.focus();var b=c.selection.createRange(),
e=c.selection.createRange().text.length;b.moveStart("character",-a.value.length);return b.text.length-e}},getTemplate:function(){var a,b,c,e,d;this.showInputs?(b='<input type="text" name="hour" class="bootstrap-timepicker-hour form-control" maxlength="2"/>',c='<input type="text" name="minute" class="bootstrap-timepicker-minute form-control" maxlength="2"/>',e='<input type="text" name="second" class="bootstrap-timepicker-second form-control" maxlength="2"/>',d='<input type="text" name="meridian" class="bootstrap-timepicker-meridian form-control" maxlength="2"/>'):
(b='<span class="bootstrap-timepicker-hour"></span>',c='<span class="bootstrap-timepicker-minute"></span>',e='<span class="bootstrap-timepicker-second"></span>',d='<span class="bootstrap-timepicker-meridian"></span>');b='<table><tr><td><a href="#" data-action="incrementHour"><i class="'+this.upArrowStyle+'"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="'+this.upArrowStyle+'"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="'+
this.upArrowStyle+'"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="'+this.upArrowStyle+'"></i></a></td>':"")+"</tr><tr><td>"+b+'</td> <td class="separator">:</td><td>'+c+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+e+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+d+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="'+this.downArrowStyle+
'"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="'+this.downArrowStyle+'"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="'+this.downArrowStyle+'"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="'+this.downArrowStyle+'"></i></a></td>':"")+"</tr></table>";switch(this.template){case "modal":a='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+
(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">\u00d7</a><h3>Pick a Time</h3></div><div class="modal-content">'+b+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case "dropdown":a='<div class="bootstrap-timepicker-widget dropdown-menu">'+b+"</div>"}return a},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},hideWidget:function(){!1!==
this.isOpen&&(this.showInputs&&this.updateFromWidgetInputs(),this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template&&this.$widget.modal?this.$widget.modal("hide"):this.$widget.removeClass("open"),a(c).off("mousedown.timepicker"),this.isOpen=!1)},highlightUnit:function(){this.position=this.getCursorPosition();0<=this.position&&2>=this.position?this.highlightHour():3<=this.position&&
5>=this.position?this.highlightMinute():6<=this.position&&8>=this.position?this.showSeconds?this.highlightSecond():this.highlightMeridian():9<=this.position&&11>=this.position&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case "hour":this.highlightMinute();break;case "minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case "second":this.showMeridian?this.highlightMeridian():this.highlightHour();
break;case "meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case "hour":this.highlightMeridian();break;case "minute":this.highlightHour();break;case "second":this.highlightMinute();break;case "meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var a=this.$element.get(0);this.highlightedUnit="hour";a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(0,2)},0)},highlightMinute:function(){var a=this.$element.get(0);
this.highlightedUnit="minute";a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(3,5)},0)},highlightSecond:function(){var a=this.$element.get(0);this.highlightedUnit="second";a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(6,8)},0)},highlightMeridian:function(){var a=this.$element.get(0);this.highlightedUnit="meridian";a.setSelectionRange&&(this.showSeconds?setTimeout(function(){a.setSelectionRange(9,11)},0):setTimeout(function(){a.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(11===
this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}23===this.hour?this.hour=0:(this.hour++,this.update())},incrementMinute:function(a){a=a?this.minute+a:this.minute+this.minuteStep-this.minute%this.minuteStep;59<a?(this.incrementHour(),this.minute=a-60):this.minute=a;this.update()},incrementSecond:function(){var a=this.second+this.secondStep-this.second%this.secondStep;59<a?(this.incrementMinute(!0),this.second=a-60):this.second=a;this.update()},remove:function(){a("document").off(".timepicker");
this.$widget&&this.$widget.remove();delete this.$element.data().timepicker},setDefaultTime:function(a){if(this.$element.val())this.updateFromElementVal();else if("current"===a){var b=new Date;a=b.getHours();var c=Math.floor(b.getMinutes()/this.minuteStep)*this.minuteStep,b=Math.floor(b.getSeconds()/this.secondStep)*this.secondStep,e="AM";this.showMeridian&&(0===a?a=12:12<=a?(12<a&&(a-=12),e="PM"):e="AM");this.hour=a;this.minute=c;this.second=b;this.meridian=e;this.update()}else!1===a?(this.second=
this.minute=this.hour=0,this.meridian="AM"):this.setTime(a)},setTime:function(a){var b;this.showMeridian?(a=a.split(" "),b=a[0].split(":"),this.meridian=a[1]):b=a.split(":");this.hour=parseInt(b[0],10);this.minute=parseInt(b[1],10);this.second=parseInt(b[2],10);isNaN(this.hour)&&(this.hour=0);isNaN(this.minute)&&(this.minute=0);if(this.showMeridian){12<this.hour?this.hour=12:1>this.hour&&(this.hour=12);if("am"===this.meridian||"a"===this.meridian)this.meridian="AM";else if("pm"===this.meridian||"p"===
this.meridian)this.meridian="PM";"AM"!==this.meridian&&"PM"!==this.meridian&&(this.meridian="AM")}else 24<=this.hour?this.hour=23:0>this.hour&&(this.hour=0);0>this.minute?this.minute=0:60<=this.minute&&(this.minute=59);this.showSeconds&&(isNaN(this.second)?this.second=0:0>this.second?this.second=0:60<=this.second&&(this.second=59));this.update()},showWidget:function(){if(!this.isOpen&&!this.$element.is(":disabled")){var b=this;a(c).on("mousedown.timepicker",function(c){0===a(c.target).closest(".bootstrap-timepicker-widget").length&&
b.hideWidget()});this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});this.disableFocus&&this.$element.blur();this.updateFromElementVal();if("modal"===this.template&&this.$widget.modal)this.$widget.modal("show").on("hidden",a.proxy(this.hideWidget,this));else!1===this.isOpen&&this.$widget.addClass("open");this.isOpen=!0}},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM";this.update()},
update:function(){this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});this.updateElement();this.updateWidget()},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){var a=this.$element.val();a&&this.setTime(a)},updateWidget:function(){if(!1!==this.$widget){var a=10>this.hour?"0"+this.hour:this.hour,b=10>this.minute?"0"+this.minute:this.minute,
c=10>this.second?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(a),this.$widget.find("input.bootstrap-timepicker-minute").val(b),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(c),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(a),this.$widget.find("span.bootstrap-timepicker-minute").text(b),this.showSeconds&&
this.$widget.find("span.bootstrap-timepicker-second").text(c),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(!1!==this.$widget){var b=a("input.bootstrap-timepicker-hour",this.$widget).val()+":"+a("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+a("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+a("input.bootstrap-timepicker-meridian",this.$widget).val():
"");this.setTime(b)}},widgetClick:function(b){b.stopPropagation();b.preventDefault();if(b=a(b.target).closest("a").data("action"))this[b]()},widgetKeydown:function(b){var c=a(b.target).closest("input").attr("name");switch(b.keyCode){case 9:if(this.showMeridian){if("meridian"===c)return this.hideWidget()}else if(this.showSeconds){if("second"===c)return this.hideWidget()}else if("minute"===c)return this.hideWidget();this.updateFromWidgetInputs();break;case 27:this.hideWidget();break;case 38:b.preventDefault();
switch(c){case "hour":this.incrementHour();break;case "minute":this.incrementMinute();break;case "second":this.incrementSecond();break;case "meridian":this.toggleMeridian()}break;case 40:switch(b.preventDefault(),c){case "hour":this.decrementHour();break;case "minute":this.decrementMinute();break;case "second":this.decrementSecond();break;case "meridian":this.toggleMeridian()}}}};a.fn.timepicker=function(b){var c=Array.apply(null,arguments);c.shift();return this.each(function(){var e=a(this),q=e.data("timepicker"),
v="object"===typeof b&&b;q||e.data("timepicker",q=new d(this,a.extend({},a.fn.timepicker.defaults,v,a(this).data())));"string"===typeof b&&q[b].apply(q,c)})};a.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,secondStep:15,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:".bootstrap-timepicker",upArrowStyle:"glyphicon glyphicon-chevron-up",downArrowStyle:"glyphicon glyphicon-chevron-down",containerClass:"bootstrap-timepicker"};
a.fn.timepicker.Constructor=d})(jQuery,window,document);(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a,b){function c(){return new Date(Date.UTC.apply(Date,arguments))}function e(){var a=new Date;return c(a.getFullYear(),a.getMonth(),a.getDate())}function d(a,b){return a.getUTCFullYear()===b.getUTCFullYear()&&a.getUTCMonth()===b.getUTCMonth()&&a.getUTCDate()===b.getUTCDate()}function f(B,h){return function(){h!==b&&a.fn.datepicker.deprecated(h);return this[B].apply(this,
arguments)}}function g(b,h){function c(a,b){return b.toLowerCase()}var e=a(b).data(),d={},f,g=new RegExp("^"+h.toLowerCase()+"([A-Z])");h=new RegExp("^"+h.toLowerCase());for(var k in e)h.test(k)&&(f=k.replace(g,c),d[f]=e[k]);return d}function r(b){var h={};if(!k[b]&&(b=b.split("-")[0],!k[b]))return;var c=k[b];a.each(m,function(a,b){b in c&&(h[b]=c[b])});return h}var q=function(){var b={get:function(a){return this.slice(a)[0]},contains:function(a){a=a&&a.valueOf();for(var b=0,B=this.length;b<B;b++)if(0<=
this[b].valueOf()-a&&864E5>this[b].valueOf()-a)return b;return-1},remove:function(a){this.splice(a,1)},replace:function(b){b&&(a.isArray(b)||(b=[b]),this.clear(),this.push.apply(this,b))},clear:function(){this.length=0},copy:function(){var a=new q;a.replace(this);return a}};return function(){var h=[];h.push.apply(h,arguments);a.extend(h,b);return h}}(),v=function(b,h){a.data(b,"datepicker",this);this._process_options(h);this.dates=new q;this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=
a(b);this.inputField=(this.isInput=this.element.is("input"))?this.element:this.element.find("input");(this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1)&&0===this.component.length&&(this.component=!1);this.isInline=!this.component&&this.element.is("div");this.picker=a(l.template);this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow);this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow);
this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(a,b){return Number(b)+1});this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,
daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled});this._allow_update=!1;this.setViewMode(this.o.startView);this._allow_update=!0;this.fillDow();this.fillMonths();this.update();this.isInline&&this.show()};v.prototype={constructor:v,_resolveViewName:function(b){a.each(l.viewModes,function(h,c){if(b===h||-1!==a.inArray(b,c.names))return b=h,!1});return b},_resolveDaysOfWeek:function(b){a.isArray(b)||(b=b.split(/[,\s]*/));return a.map(b,Number)},_check_template:function(B){try{return B===
b||""===B?!1:0>=(B.match(/[<>]/g)||[]).length?!0:0<a(B).length}catch(h){return!1}},_process_options:function(b){this._o=a.extend({},this._o,b);var h=this.o=a.extend({},this._o);b=h.language;k[b]||(b=b.split("-")[0],k[b]||(b=y.language));h.language=b;h.startView=this._resolveViewName(h.startView);h.minViewMode=this._resolveViewName(h.minViewMode);h.maxViewMode=this._resolveViewName(h.maxViewMode);h.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,h.startView));!0!==h.multidate&&(h.multidate=
Number(h.multidate)||!1,!1!==h.multidate&&(h.multidate=Math.max(0,h.multidate)));h.multidateSeparator=String(h.multidateSeparator);h.weekStart%=7;h.weekEnd=(h.weekStart+6)%7;var d=l.parseFormat(h.format);-Infinity!==h.startDate&&(h.startDate=h.startDate?h.startDate instanceof Date?this._local_to_utc(this._zero_time(h.startDate)):l.parseDate(h.startDate,d,h.language,h.assumeNearbyYear):-Infinity);Infinity!==h.endDate&&(h.endDate=h.endDate?h.endDate instanceof Date?this._local_to_utc(this._zero_time(h.endDate)):
l.parseDate(h.endDate,d,h.language,h.assumeNearbyYear):Infinity);h.daysOfWeekDisabled=this._resolveDaysOfWeek(h.daysOfWeekDisabled||[]);h.daysOfWeekHighlighted=this._resolveDaysOfWeek(h.daysOfWeekHighlighted||[]);h.datesDisabled=h.datesDisabled||[];a.isArray(h.datesDisabled)||(h.datesDisabled=h.datesDisabled.split(","));h.datesDisabled=a.map(h.datesDisabled,function(a){return l.parseDate(a,d,h.language,h.assumeNearbyYear)});b=String(h.orientation).toLowerCase().split(/\s+/g);var f=h.orientation.toLowerCase();
b=a.grep(b,function(a){return/^auto|left|right|top|bottom$/.test(a)});h.orientation={x:"auto",y:"auto"};if(f&&"auto"!==f)if(1===b.length)switch(b[0]){case "top":case "bottom":h.orientation.y=b[0];break;case "left":case "right":h.orientation.x=b[0]}else f=a.grep(b,function(a){return/^left|right$/.test(a)}),h.orientation.x=f[0]||"auto",f=a.grep(b,function(a){return/^top|bottom$/.test(a)}),h.orientation.y=f[0]||"auto";h.defaultViewDate instanceof Date||"string"===typeof h.defaultViewDate?h.defaultViewDate=
l.parseDate(h.defaultViewDate,d,h.language,h.assumeNearbyYear):h.defaultViewDate?(b=h.defaultViewDate.year||(new Date).getFullYear(),h.defaultViewDate=c(b,h.defaultViewDate.month||0,h.defaultViewDate.day||1)):h.defaultViewDate=e()},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var h=0,c,e,d;h<a.length;h++)c=a[h][0],2===a[h].length?(e=b,d=a[h][1]):3===a[h].length&&(e=a[h][1],d=a[h][2]),c.on(d,e)},_unapplyEvents:function(a){for(var h=0,c,e,d;h<a.length;h++)c=a[h][0],2===a[h].length?(d=
b,e=a[h][1]):3===a[h].length&&(d=a[h][1],e=a[h][2]),c.off(e,d)},_buildEvents:function(){var b={keyup:a.proxy(function(b){-1===a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this),paste:a.proxy(this.paste,this)};!0===this.o.showOnFocus&&(b.focus=a.proxy(this.show,this));this._events=this.isInput?[[this.element,b]]:this.component&&this.inputField.length?[[this.inputField,b],[this.component,{click:a.proxy(this.show,this)}]]:[[this.element,{click:a.proxy(this.show,
this),keydown:a.proxy(this.keydown,this)}]];this._events.push([this.element,"*",{blur:a.proxy(function(a){this._focused_from=a.target},this)}],[this.element,{blur:a.proxy(function(a){this._focused_from=a.target},this)}]);this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":a.proxy(function(a){this.update(a.date)},this)}]);this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[this.picker,".prev, .next",{click:a.proxy(this.navArrowsClick,this)}],[this.picker,
".day:not(.disabled)",{click:a.proxy(this.dayCellClick,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{"mousedown touchstart":a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).length||this.picker.is(a.target)||this.picker.find(a.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();
this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var e=c||this.dates.get(-1),e=this._utc_to_local(e);this.element.trigger({rollcallid:this.rollcallid,type:b,date:e,viewMode:this.viewMode,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(a,b){0===arguments.length?(a=this.dates.length-1,b=this.o.format):"string"===typeof a&&(b=a,a=this.dates.length-1);b=b||this.o.format;var c=this.dates.get(a);
return l.formatDate(c,b,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&a(this.element).blur(),this},hide:function(){if(this.isInline||!this.picker.is(":visible"))return this;
this.focusDate=null;this.picker.hide().detach();this._detachSecondaryEvents();this.setViewMode(this.o.startView);this.o.forceParse&&this.inputField.val()&&this.setValue();this._trigger("hide");return this},destroy:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date;return this},paste:function(b){var c;if(b.originalEvent.clipboardData&&b.originalEvent.clipboardData.types&&
-1!==a.inArray("text/plain",b.originalEvent.clipboardData.types))c=b.originalEvent.clipboardData.getData("text/plain");else if(window.clipboardData)c=window.clipboardData.getData("Text");else return;this.setDate(c);this.update();b.preventDefault()},_utc_to_local:function(a){if(!a)return a;var b=new Date(a.getTime()+6E4*a.getTimezoneOffset());b.getTimezoneOffset()!==a.getTimezoneOffset()&&(b=new Date(a.getTime()+6E4*b.getTimezoneOffset()));return b},_local_to_utc:function(a){return a&&new Date(a.getTime()-
6E4*a.getTimezoneOffset())},_zero_time:function(a){return a&&new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return a&&c(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate())},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(a){return new Date(a)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var a=this.dates.get(-1);return a!==b?new Date(a):null},clearDates:function(){this.inputField.val("");
this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()},setDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,b);this._trigger("changeDate");this.setValue();return this},setUTCDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.setDates.apply(this,a.map(b,this._utc_to_local));return this},setDate:f("setDates"),setUTCDate:f("setUTCDates"),remove:f("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),
setValue:function(){var a=this.getFormattedDate();this.inputField.val(a);return this},getFormattedDate:function(c){c===b&&(c=this.o.format);var h=this.o.language;return a.map(this.dates,function(a){return l.formatDate(a,c,h)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(a){this._process_options({startDate:a});this.update();this.updateNavArrows();return this},getEndDate:function(){return this.o.endDate},setEndDate:function(a){this._process_options({endDate:a});
this.update();this.updateNavArrows();return this},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a});this.update();return this},setDaysOfWeekHighlighted:function(a){this._process_options({daysOfWeekHighlighted:a});this.update();return this},setDatesDisabled:function(a){this._process_options({datesDisabled:a});this.update();return this},place:function(){if(this.isInline)return this;var b=this.picker.outerWidth(),c=this.picker.outerHeight(),e=a(this.o.container),d=e.width(),
f="body"===this.o.container?a(document).scrollTop():e.scrollTop(),g=e.offset(),k=[0];this.element.parents().each(function(){var b=a(this).css("z-index");"auto"!==b&&0!==Number(b)&&k.push(Number(b))});var e=Math.max.apply(Math,k)+this.o.zIndexOffset,l=this.component?this.component.parent().offset():this.element.offset(),t=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),p=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),m=l.left-g.left,g=l.top-g.top;
"body"!==this.o.container&&(g+=f);this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(m-=b-p)):0>l.left?(this.picker.addClass("datepicker-orient-left"),m-=l.left-10):m+b>d?(this.picker.addClass("datepicker-orient-right"),m+=p-b):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");
b=this.o.orientation.y;"auto"===b&&(b=0>-f+g-c?"bottom":"top");this.picker.addClass("datepicker-orient-"+b);g="top"===b?g-(c+parseInt(this.picker.css("padding-top"))):g+t;this.o.rtl?this.picker.css({top:g,right:d-(m+p),zIndex:e}):this.picker.css({top:g,left:m,zIndex:e});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var b=this.dates.copy(),c=[],e=!1;arguments.length?(a.each(arguments,a.proxy(function(a,b){b instanceof Date&&(b=this._local_to_utc(b));c.push(b)},
this)),e=!0):(c=(c=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?c.split(this.o.multidateSeparator):[c],delete this.element.data().date);c=a.map(c,a.proxy(function(a){return l.parseDate(a,this.o.format,this.o.language,this.o.assumeNearbyYear)},this));c=a.grep(c,a.proxy(function(a){return!this.dateWithinRange(a)||!a},this),!0);this.dates.replace(c);this.o.updateViewDate&&(this.viewDate=this.dates.length?new Date(this.dates.get(-1)):this.viewDate<
this.o.startDate?new Date(this.o.startDate):this.viewDate>this.o.endDate?new Date(this.o.endDate):this.o.defaultViewDate);e?(this.setValue(),this.element.change()):this.dates.length&&String(b)!==String(this.dates)&&e&&(this._trigger("changeDate"),this.element.change());!this.dates.length&&b.length&&(this._trigger("clearDate"),this.element.change());this.fill();return this},fillDow:function(){if(this.o.showWeekDays){var b=this.o.weekStart,c="<tr>";for(this.o.calendarWeeks&&(c+='<th class="cw">&#160;</th>');b<
this.o.weekStart+7;)c+='<th class="dow',-1!==a.inArray(b,this.o.daysOfWeekDisabled)&&(c+=" disabled"),c+='">'+k[this.o.language].daysMin[b++%7]+"</th>";c+="</tr>";this.picker.find(".datepicker-days thead").append(c)}},fillMonths:function(){for(var a=this._utc_to_local(this.viewDate),b="",c,e=0;12>e;e++)c=a&&a.getMonth()===e?" focused":"",b+='<span class="month'+c+'">'+k[this.o.language].monthsShort[e]+"</span>";this.picker.find(".datepicker-months td").html(b)},setRange:function(b){b&&b.length?this.range=
a.map(b,function(a){return a.valueOf()}):delete this.range;this.fill()},getClassNames:function(b){var c=[],f=this.viewDate.getUTCFullYear(),g=this.viewDate.getUTCMonth(),k=e();b.getUTCFullYear()<f||b.getUTCFullYear()===f&&b.getUTCMonth()<g?c.push("old"):(b.getUTCFullYear()>f||b.getUTCFullYear()===f&&b.getUTCMonth()>g)&&c.push("new");this.focusDate&&b.valueOf()===this.focusDate.valueOf()&&c.push("focused");this.o.todayHighlight&&d(b,k)&&c.push("today");-1!==this.dates.contains(b)&&c.push("active");
this.dateWithinRange(b)||c.push("disabled");this.dateIsDisabled(b)&&c.push("disabled","disabled-date");-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekHighlighted)&&c.push("highlighted");this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&c.push("range"),-1!==a.inArray(b.valueOf(),this.range)&&c.push("selected"),b.valueOf()===this.range[0]&&c.push("range-start"),b.valueOf()===this.range[this.range.length-1]&&c.push("range-end"));return c},_fill_yearsView:function(c,e,d,f,g,k,l){var m="",
t=d/10;c=this.picker.find(c);d*=Math.floor(f/d);f=d+9*t;for(var p=Math.floor(this.viewDate.getFullYear()/t)*t,r=a.map(this.dates,function(a){return Math.floor(a.getUTCFullYear()/t)*t}),n,q,w,z=d-t;z<=f+t;z+=t)n=[e],q=null,z===d-t?n.push("old"):z===f+t&&n.push("new"),-1!==a.inArray(z,r)&&n.push("active"),(z<g||z>k)&&n.push("disabled"),z===p&&n.push("focused"),l!==a.noop&&(w=l(new Date(z,0,1)),w===b?w={}:"boolean"===typeof w?w={enabled:w}:"string"===typeof w&&(w={classes:w}),!1===w.enabled&&n.push("disabled"),
w.classes&&(n=n.concat(w.classes.split(/\s+/))),w.tooltip&&(q=w.tooltip)),m+='<span class="'+n.join(" ")+'"'+(q?' title="'+q+'"':"")+">"+z+"</span>";c.find(".datepicker-switch").text(d+"-"+f);c.find("td").html(m)},fill:function(){var e=new Date(this.viewDate),d=e.getUTCFullYear(),f=e.getUTCMonth(),g=-Infinity!==this.o.startDate?this.o.startDate.getUTCFullYear():-Infinity,m=-Infinity!==this.o.startDate?this.o.startDate.getUTCMonth():-Infinity,D=Infinity!==this.o.endDate?this.o.endDate.getUTCFullYear():
Infinity,r=Infinity!==this.o.endDate?this.o.endDate.getUTCMonth():Infinity,u=k[this.o.language].today||k.en.today||"",t=k[this.o.language].clear||k.en.clear||"",p=k[this.o.language].titleFormat||k.en.titleFormat,q,n;if(!isNaN(d)&&!isNaN(f)){this.picker.find(".datepicker-days .datepicker-switch").text(l.formatDate(e,p,this.o.language));this.picker.find("tfoot .today").text(u).css("display",!0===this.o.todayBtn||"linked"===this.o.todayBtn?"table-cell":"none");this.picker.find("tfoot .clear").text(t).css("display",
!0===this.o.clearBtn?"table-cell":"none");this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"===typeof this.o.title&&""!==this.o.title?"table-cell":"none");this.updateNavArrows();this.fillMonths();e=c(d,f,0);f=e.getUTCDate();e.setUTCDate(f-(e.getUTCDay()-this.o.weekStart+7)%7);f=new Date(e);100>e.getUTCFullYear()&&f.setUTCFullYear(e.getUTCFullYear());f.setUTCDate(f.getUTCDate()+42);f=f.valueOf();for(u=[];e.valueOf()<f;){t=e.getUTCDay();if(t===this.o.weekStart&&(u.push("<tr>"),
this.o.calendarWeeks)){var p=new Date(+e+(this.o.weekStart-t-7)%7*864E5),p=new Date(Number(p)+(11-p.getUTCDay())%7*864E5),v=new Date(Number(v=c(p.getUTCFullYear(),0,1))+(11-v.getUTCDay())%7*864E5);u.push('<td class="cw">'+((p-v)/864E5/7+1)+"</td>")}p=this.getClassNames(e);p.push("day");var w=e.getUTCDate();this.o.beforeShowDay!==a.noop&&(n=this.o.beforeShowDay(this._utc_to_local(e),this.o.rollcallid),n===b?n={}:"boolean"===typeof n?n={enabled:n}:"string"===typeof n&&(n={classes:n}),!1===n.enabled&&
p.push("disabled"),n.classes&&(p=p.concat(n.classes.split(/\s+/))),n.tooltip&&(q=n.tooltip),n.content&&(w=n.content));p=a.isFunction(a.uniqueSort)?a.uniqueSort(p):a.unique(p);n=p.indexOf("noactive");0<=n&&(p.splice(n,1),n=p.indexOf("active"),0<=n&&p.splice(n,1));u.push('<td class="'+p.join(" ")+'"'+(q?' title="'+q+'"':"")+' data-date="'+e.getTime().toString()+'">'+w+"</td>");q=null;t===this.o.weekEnd&&u.push("</tr>");e.setUTCDate(e.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(u.join(""));
q=k[this.o.language].monthsTitle||k.en.monthsTitle||"Months";var z=this.picker.find(".datepicker-months").find(".datepicker-switch").text(2>this.o.maxViewMode?q:d).end().find("tbody span").removeClass("active");a.each(this.dates,function(a,b){b.getUTCFullYear()===d&&z.eq(b.getUTCMonth()).addClass("active")});(d<g||d>D)&&z.addClass("disabled");d===g&&z.slice(0,m).addClass("disabled");d===D&&z.slice(r+1).addClass("disabled");if(this.o.beforeShowMonth!==a.noop){var E=this;a.each(z,function(c,e){var f=
E.o.beforeShowMonth(new Date(d,c,1));f===b?f={}:"boolean"===typeof f?f={enabled:f}:"string"===typeof f&&(f={classes:f});!1!==f.enabled||a(e).hasClass("disabled")||a(e).addClass("disabled");f.classes&&a(e).addClass(f.classes);f.tooltip&&a(e).prop("title",f.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,d,g,D,this.o.beforeShowYear);this._fill_yearsView(".datepicker-decades","decade",100,d,g,D,this.o.beforeShowDecade);this._fill_yearsView(".datepicker-centuries","century",1E3,d,g,D,this.o.beforeShowCentury)}},
updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),a=a.getUTCMonth(),c=-Infinity!==this.o.startDate?this.o.startDate.getUTCFullYear():-Infinity,e=-Infinity!==this.o.startDate?this.o.startDate.getUTCMonth():-Infinity,d=Infinity!==this.o.endDate?this.o.endDate.getUTCFullYear():Infinity,f=Infinity!==this.o.endDate?this.o.endDate.getUTCMonth():Infinity,g,k,l=1;switch(this.viewMode){case 0:g=b<=c&&a<=e;k=b>=d&&a>=f;break;case 4:l*=10;case 3:l*=10;case 2:l*=
10;case 1:g=Math.floor(b/l)*l<=c,k=Math.floor(b/l)*l+l>=d}this.picker.find(".prev").toggleClass("disabled",g);this.picker.find(".next").toggleClass("disabled",k)}},click:function(b){b.preventDefault();b.stopPropagation();var d;d=a(b.target);d.hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1);d.hasClass("today")&&!d.hasClass("day")&&(this.setViewMode(0),this._setDate(e(),"linked"===this.o.todayBtn?null:"view"));d.hasClass("clear")&&this.clearDates();
!d.hasClass("disabled")&&(d.hasClass("month")||d.hasClass("year")||d.hasClass("decade")||d.hasClass("century"))&&(this.viewDate.setUTCDate(1),1===this.viewMode?(b=d.parent().find("span").index(d),d=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(b)):(b=0,d=Number(d.text()),this.viewDate.setUTCFullYear(d)),this._trigger(l.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(c(d,b,1)):(this.setViewMode(this.viewMode-1),this.fill()));this.picker.is(":visible")&&
this._focused_from&&this._focused_from.focus();delete this._focused_from},dayCellClick:function(b){b=a(b.currentTarget).data("date");b=new Date(b);this.o.updateViewDate&&(b.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),b.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate));this._setDate(b)},navArrowsClick:function(b){b=a(b.currentTarget).hasClass("prev")?-1:1;0!==this.viewMode&&(b*=12*l.viewModes[this.viewMode].navStep);
this.viewDate=this.moveMonth(this.viewDate,b);this._trigger(l.viewModes[this.viewMode].e,this.viewDate);this.fill()},_toggle_multidate:function(a){var b=this.dates.contains(a);a||this.dates.clear();-1!==b?(!0===this.o.multidate||1<this.o.multidate||this.o.toggleActive)&&this.dates.remove(b):(!1===this.o.multidate&&this.dates.clear(),this.dates.push(a));if("number"===typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(a,b){b&&"date"!==b||this._toggle_multidate(a&&
new Date(a));if(!b&&this.o.updateViewDate||"view"===b)this.viewDate=a&&new Date(a);this.fill();this.setValue();b&&"view"===b||(this.rollcallid=this.o.rollcallid,this._trigger("changeDate"));this.inputField.trigger("change");!this.o.autoclose||b&&"date"!==b||this.hide()},moveDay:function(a,b){var c=new Date(a);c.setUTCDate(a.getUTCDate()+b);return c},moveWeek:function(a,b){return this.moveDay(a,7*b)},moveMonth:function(a,b){if(!a||isNaN(a.getTime()))return this.o.defaultViewDate;if(!b)return a;var c=
new Date(a.valueOf()),e=c.getUTCDate(),d=c.getUTCMonth(),f=Math.abs(b),g;b=0<b?1:-1;if(1===f)f=-1===b?function(){return c.getUTCMonth()===d}:function(){return c.getUTCMonth()!==g},g=d+b,c.setUTCMonth(g),g=(g+12)%12;else{for(var k=0;k<f;k++)c=this.moveMonth(c,b);g=c.getUTCMonth();c.setUTCDate(e);f=function(){return g!==c.getUTCMonth()}}for(;f();)c.setUTCDate(--e),c.setUTCMonth(g);return c},moveYear:function(a,b){return this.moveMonth(a,12*b)},moveAvailableDate:function(a,b,c){do{a=this[c](a,b);if(!this.dateWithinRange(a))return!1;
c="moveDay"}while(this.dateIsDisabled(a));return a},weekOfDateIsDisabled:function(b){return-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(b){return this.weekOfDateIsDisabled(b)||0<a.grep(this.o.datesDisabled,function(a){return d(b,a)}).length},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":visible")){var b=!1,c,e,d=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=
null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide();a.preventDefault();a.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;c=37===a.keyCode||38===a.keyCode?-1:1;if(0===this.viewMode)a.ctrlKey?(e=this.moveAvailableDate(d,c,"moveYear"))&&this._trigger("changeYear",this.viewDate):a.shiftKey?(e=this.moveAvailableDate(d,c,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===a.keyCode||39===
a.keyCode?e=this.moveAvailableDate(d,c,"moveDay"):this.weekOfDateIsDisabled(d)||(e=this.moveAvailableDate(d,c,"moveWeek"));else if(1===this.viewMode){if(38===a.keyCode||40===a.keyCode)c*=4;e=this.moveAvailableDate(d,c,"moveMonth")}else if(2===this.viewMode){if(38===a.keyCode||40===a.keyCode)c*=4;e=this.moveAvailableDate(d,c,"moveYear")}e&&(this.focusDate=this.viewDate=e,this.setValue(),this.fill(),a.preventDefault());break;case 13:if(!this.o.forceParse)break;d=this.focusDate||this.dates.get(-1)||
this.viewDate;this.o.keyboardNavigation&&(this._toggle_multidate(d),b=!0);this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(a.preventDefault(),a.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}b&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))}else if(40===a.keyCode||
27===a.keyCode)this.show(),a.stopPropagation()},setViewMode:function(a){this.viewMode=a;this.picker.children("div").hide().filter(".datepicker-"+l.viewModes[this.viewMode].clsName).show();this.updateNavArrows();this._trigger("changeViewMode",new Date(this.viewDate))}};var A=function(b,c){a.data(b,"datepicker",this);this.element=a(b);this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a});delete c.inputs;this.keepEmptyValues=c.keepEmptyValues;delete c.keepEmptyValues;x.call(a(this.inputs),
c).on("changeDate",a.proxy(this.dateUpdated,this));this.pickers=a.map(this.inputs,function(b){return a.data(b,"datepicker")});this.updateDates()};A.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.getUTCDate()});this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(c){if(!this.updating){this.updating=!0;var e=a.data(c.target,"datepicker");if(e!==
b){var d=e.getUTCDate(),f=this.keepEmptyValues;c=a.inArray(c.target,this.inputs);var g=c-1,k=c+1,l=this.inputs.length;if(-1!==c){a.each(this.pickers,function(a,b){b.getUTCDate()||b!==e&&f||b.setUTCDate(d)});if(d<this.dates[g])for(;0<=g&&d<this.dates[g];)this.pickers[g--].setUTCDate(d);else if(d>this.dates[k])for(;k<l&&d>this.dates[k];)this.pickers[k++].setUTCDate(d);this.updateDates();delete this.updating}}}},destroy:function(){a.map(this.pickers,function(a){a.destroy()});a(this.inputs).off("changeDate",
this.dateUpdated);delete this.element.data().datepicker},remove:f("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var C=a.fn.datepicker,x=function(c){var e=Array.apply(null,arguments);e.shift();var d;this.each(function(){var b=a(this),f=b.data("datepicker"),k="object"===typeof c&&c;if(!f){var f=g(this,"date"),l=a.extend({},y,f,k),l=r(l.language),k=a.extend({},y,l,f,k);b.hasClass("input-daterange")||k.inputs?(a.extend(k,{inputs:k.inputs||b.find("input").toArray()}),
f=new A(this,k)):f=new v(this,k);b.data("datepicker",f)}"string"===typeof c&&"function"===typeof f[c]&&(d=f[c].apply(f,e))});if(d===b||d instanceof v||d instanceof A)return this;if(1<this.length)throw Error("Using only allowed for the collection of a single element ("+c+" function)");return d};a.fn.datepicker=x;var y=a.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:a.noop,beforeShowMonth:a.noop,beforeShowYear:a.noop,beforeShowDecade:a.noop,beforeShowCentury:a.noop,calendarWeeks:!1,
clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",
templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0,rollcallid:"__id__"},m=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=v;var k=a.fn.datepicker.dates={en:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),daysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),daysMin:"Su Mo Tu We Th Fr Sa".split(" "),months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},l={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1E3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,
parseFormat:function(a){if("function"===typeof a.toValue&&"function"===typeof a.toDisplay)return a;var b=a.replace(this.validParts,"\x00").split("\x00");a=a.match(this.validParts);if(!b||!b.length||!a||0===a.length)throw Error("Invalid date format.");return{separators:b,parts:a}},parseDate:function(c,d,f,g){function m(a,b){!0===b&&(b=10);100>a&&(a+=2E3,a>(new Date).getFullYear()+b&&(a-=100));return a}function r(){var a=this.slice(0,t[p].length),b=t[p].slice(0,a.length);return a.toLowerCase()===b.toLowerCase()}
if(!c)return b;if(c instanceof Date)return c;"string"===typeof d&&(d=l.parseFormat(d));if(d.toValue)return d.toValue(c,d,f);var q={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},u={yesterday:"-1d",today:"+0d",tomorrow:"+1d"},t,p;c in u&&(c=u[c]);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(c)){t=c.match(/([\-+]\d+)([dmwy])/gi);c=new Date;for(p=0;p<t.length;p++)d=t[p].match(/([\-+]\d+)([dmwy])/i),f=Number(d[1]),u=q[d[2].toLowerCase()],c=v.prototype[u](c,f);return v.prototype._zero_utc_time(c)}t=
c&&c.match(this.nonpunctuation)||[];var q={},y="yyyy yy M MM m mm d dd".split(" "),u={yyyy:function(a,b){return a.setUTCFullYear(g?m(b,g):b)},m:function(a,b){if(isNaN(a))return a;for(--b;0>b;)b+=12;b%=12;for(a.setUTCMonth(b);a.getUTCMonth()!==b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}},n;u.yy=u.yyyy;u.M=u.MM=u.mm=u.m;u.dd=u.d;c=e();var x=d.parts.slice();t.length!==x.length&&(x=a(x).filter(function(b,c){return-1!==a.inArray(c,y)}).toArray());if(t.length===x.length){var w;
p=0;for(w=x.length;p<w;p++){n=parseInt(t[p],10);d=x[p];if(isNaN(n))switch(d){case "MM":n=a(k[f].months).filter(r);n=a.inArray(n[0],k[f].months)+1;break;case "M":n=a(k[f].monthsShort).filter(r),n=a.inArray(n[0],k[f].monthsShort)+1}q[d]=n}for(p=0;p<y.length;p++)d=y[p],d in q&&!isNaN(q[d])&&(f=new Date(c),u[d](f,q[d]),isNaN(f)||(c=f))}return c},formatDate:function(b,c,d){if(!b)return"";"string"===typeof c&&(c=l.parseFormat(c));if(c.toDisplay)return c.toDisplay(b,c,d);d={d:b.getUTCDate(),D:k[d].daysShort[b.getUTCDay()],
DD:k[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:k[d].monthsShort[b.getUTCMonth()],MM:k[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};d.dd=(10>d.d?"0":"")+d.d;d.mm=(10>d.m?"0":"")+d.m;b=[];for(var e=a.extend([],c.separators),f=0,g=c.parts.length;f<=g;f++)e.length&&b.push(e.shift()),b.push(d[c.parts[f]]);return b.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+y.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+
y.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};l.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+l.headTemplate+"<tbody></tbody>"+l.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+l.headTemplate+l.contTemplate+l.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+
l.headTemplate+l.contTemplate+l.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+l.headTemplate+l.contTemplate+l.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+l.headTemplate+l.contTemplate+l.footTemplate+"</table></div></div>";a.fn.datepicker.DPGlobal=l;a.fn.datepicker.noConflict=function(){a.fn.datepicker=C;return this};a.fn.datepicker.version="1.7.1";a.fn.datepicker.deprecated=function(a){var b=window.console;
b&&b.warn&&b.warn("DEPRECATED: "+a)};a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),x.call(c,"show"))});a(function(){x.call(a('[data-provide="datepicker-inline"]'))})});var LOAD_PAGE_NUM=20,PreLoadIndex=-1,CurrentLoadIndex=0,LOAD_STATE_END=9999,glCurrentPage=1,gl_usersubgroups=[],gl_userdatasubgroups=[],gl_rfiddevices=[],gl_nfclocators=[],gl_cardrollcall=[],gl_NewRollCall={};check_loading_status();
function check_loading_status(){switch(CurrentLoadIndex){case 0:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_usersubgroup());break;case 1:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_rfiddevice());break;case 2:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+
PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_nfclocator());break;case 3:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_cardrollcall());break;case 4:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,draw_cardrollcall_table(),
CurrentLoadIndex=LOAD_STATE_END)}CurrentLoadIndex!=LOAD_STATE_END?setTimeout(check_loading_status,100):console.log("check_loading_status() Stop.")}function load_usersubgroup(){gl_usersubgroups=[];$.getJSON(gl_target_server+"/php/vilsnodes.php","loadusersubgroup=1&project_id="+project_id,function(a){$.each(a,function(a,c){c.subgroupid=parseInt(c.subgroupid);gl_usersubgroups.push(c)})}).success(function(){load_userdatasubgroup()}).error(function(){}).complete(function(){})}
function load_userdatasubgroup(){gl_userdatasubgroups=[];$.getJSON(gl_target_server+"/php/vilsnodes.php","loaddatasubgroup=1&project_id="+project_id,function(a){$.each(a,function(a,c){gl_userdatasubgroups.push(c)})}).success(function(){CurrentLoadIndex+=1}).error(function(){}).complete(function(){})}
function load_rfiddevice(){gl_rfiddevices=[];$.getJSON(gl_target_server+"/php/rfiddevice.php","loaddevice=1&project_id="+project_id,function(a){var b=0;$.each(a,function(a,e){gl_rfiddevices.push(e);b++})}).success(function(){CurrentLoadIndex+=1}).error(function(){}).complete(function(){})}
function load_nfclocator(){gl_nfclocators=[];$.getJSON(gl_target_server+"/php/nfclocator.php","loadnfclocator=1&project_id="+project_id,function(a){var b=0;$.each(a,function(a,e){gl_nfclocators.push(e);b++})}).success(function(){CurrentLoadIndex+=1}).error(function(){}).complete(function(){})}
function load_cardrollcall(){var a=(glCurrentPage-1)*LOAD_PAGE_NUM,b=LOAD_PAGE_NUM;gl_cardrollcall=[];$.getJSON(gl_target_server+"/php/rfiddevice.php","loadcardrollcall=1&s="+a+"&count="+b+"&project_id="+project_id,function(a){var b=0;$.each(a,function(a,c){gl_cardrollcall.push(c);b++})}).success(function(){CurrentLoadIndex+=1}).error(function(){}).complete(function(){})}
function create_empty_record_table_item(a){if(null==document.getElementById("empty_record_table_item")){gl_NewRollCall.rollcallid=88888;gl_NewRollCall.weekday="1234560".split("");gl_NewRollCall.validdate=[];gl_NewRollCall.invaliddate=[];var b=document.getElementById("RFID_ROLLCALL_TABLE").insertRow(0);b.setAttribute("id","empty_record_table_item");b.setAttribute("bgcolor","#ebebe0");var c=0;b.appendChild(document.createElement("td"));b.cells[c].appendChild(document.createTextNode(""+a));c++;b.appendChild(document.createElement("td"));
b.cells[c].appendChild(create_inputarea_text("input_name"));c++;b.appendChild(document.createElement("td"));a=create_time_picker("rollcall_StartTime","07:00 AM");b.cells[c].appendChild(a);c++;b.appendChild(document.createElement("td"));a=create_time_picker("rollcall_EndTime","08:00 AM");b.cells[c].appendChild(a);c++;a=document.createElement("td");var e=document.createElement("div");e.setAttribute("id","rollcall_weekday");a.appendChild(e);var d=create_weekday_ui(88888,gl_NewRollCall.weekday,!0);e.appendChild(d);
e=document.createElement("div");e.setAttribute("id","div_calendar_88888");a.appendChild(e);e=document.createElement("div");a.appendChild(e);d=document.createElement("span");d.setAttribute("style","display:inline;padding:.2em .3em .3em;font-size:95%;line-height:2;position:relative;top:-1px;color:#fff;border-radius:2px;white-space:nowrap;background-image: linear-gradient(to bottom, #cc4400, #994411);");d.textContent="\u65e5\u671f";e.appendChild(d);d=document.createElement("span");d.textContent=":\u4ee3\u8868\u4e0d\u9ede\u540d\u65e5\u671f";
e.appendChild(d);b.appendChild(a);c++;b.appendChild(document.createElement("td"));a=create_edit_devicelist_ui("rollcall_devicelist","new","","");b.cells[c].appendChild(a);c++;b.appendChild(document.createElement("td"));a=create_edit_subgrouplist_ui("rollcall_subgrouplist","new","");b.cells[c].appendChild(a);c++;b.appendChild(document.createElement("td"));a=document.createElement("div");b.cells[c].appendChild(a);e=document.createElement("input");e.setAttribute("id","checkbox_presentnotify");e.setAttribute("type",
"checkbox");e.checked=!1;d=document.createElement("label");d.setAttribute("for","checkbox_presentnotify");d.textContent="\u9ede\u540d\u5df2\u5230\u6642, \u767c\u9001\u63a8\u64ad. ";a.appendChild(e);a.appendChild(d);a.appendChild(create_input_text("input_presentcomment","\u9ede\u540d\u5df2\u5230"));e=document.createElement("div");b.cells[c].appendChild(e);d=document.createElement("input");d.setAttribute("id","checkbox_absentnotify");d.setAttribute("type","checkbox");d.checked=!1;a=document.createElement("label");
a.setAttribute("for","checkbox_absentnotify");a.textContent="\u9ede\u5b8c\u540d\u672a\u5230\u6642, \u767c\u9001\u63a8\u64ad";e.appendChild(d);e.appendChild(a);e.appendChild(create_input_text("input_absentcomment","\u9ede\u540d\u672a\u5230"));e=document.createElement("div");b.cells[c].appendChild(e);d=document.createElement("input");d.setAttribute("id","checkbox_resend");d.setAttribute("type","checkbox");d.checked=!1;a=document.createElement("label");a.setAttribute("for","checkbox_resend");a.textContent=
"\u53ef\u91cd\u8907\u63a8\u64ad";e.appendChild(d);e.appendChild(a);c++;b.appendChild(document.createElement("td"));a=document.createElement("button");a.setAttribute("class","btn btn-block btn-primary btn-lg");a.setAttribute("onclick","save_new_rollcall();");a.textContent="\u5132\u5b58";b.cells[c].appendChild(a)}}function create_input_text(a,b){var c=document.createElement("input");c.setAttribute("type","text");c.setAttribute("id",a);c.setAttribute("value",b);return c}
function create_inputarea_text(a,b){var c=document.createElement("textarea");c.setAttribute("rows","1");c.setAttribute("id",a);c.textContent=b;return c}
function create_time_picker(a,b){var c=document.createElement("div");c.setAttribute("class","bootstrap-timepicker");c.setAttribute("style","width:200px;");var e=document.createElement("div");e.setAttribute("class","input-group");c.appendChild(e);var d=document.createElement("input");d.setAttribute("type","text");d.setAttribute("id",a);d.setAttribute("readonly","readonly");d.setAttribute("class","form-control timepicker");d.setAttribute("value",b);e.appendChild(d);d=document.createElement("div");d.setAttribute("class",
"input-group-addon");e.appendChild(d);e=document.createElement("i");e.setAttribute("class","fa fa-clock-o");d.appendChild(e);return c}function create_edit_devicelist_ui(a,b,c,e){var d=document.createElement("div");5!=gl_groupid&&(c=create_edit_rfid_devicelist_ui(a,b,c),d.appendChild(c));a=create_edit_nfc_devicelist_ui(a,b,e);d.appendChild(a);return d}
function create_edit_rfid_devicelist_ui(a,b,c){a=document.createElement("div");a.setAttribute("class","btn-group");var e=document.createElement("button");e.setAttribute("type","button");e.setAttribute("class","btn btn-default btn-sm dropdown-toggle");e.setAttribute("data-toggle","dropdown");e.textContent="UHF\u611f\u61c9\u5668";a.appendChild(e);var d=document.createElement("span");d.setAttribute("class","caret");e.appendChild(d);e=document.createElement("ul");e.setAttribute("class","dropdown-menu");
a.appendChild(e);if(1==gl_groupid||2==gl_groupid){var d=document.createElement("li"),f=document.createElement("a");f.setAttribute("class","small");f.setAttribute("href","javascript:;");f.setAttribute("onclick",'dropdown_selectall("device_uhfreader","'+b+'");return true;');d.appendChild(f);f.appendChild(document.createTextNode("\u5168\u9078"));e.appendChild(d)}c=c.split(",");for(d=0;d<gl_rfiddevices.length;++d){var f=gl_rfiddevices[d],g=check_numer_in_list(parseInt(f.deviceid),c);e.appendChild(create_dropdown_device_item("uhfreader",
b,d,parseInt(f.deviceid),f.name,g))}return a}
function create_edit_nfc_devicelist_ui(a,b,c){a=document.createElement("div");a.setAttribute("class","btn-group");var e=document.createElement("button");e.setAttribute("type","button");e.setAttribute("class","btn btn-default btn-sm dropdown-toggle");e.setAttribute("data-toggle","dropdown");e.textContent="NFC Locator";a.appendChild(e);var d=document.createElement("span");d.setAttribute("class","caret");e.appendChild(d);e=document.createElement("ul");e.setAttribute("class","dropdown-menu");a.appendChild(e);
if(1==gl_groupid||2==gl_groupid){var d=document.createElement("li"),f=document.createElement("a");f.setAttribute("class","small");f.setAttribute("href","javascript:;");f.setAttribute("onclick",'dropdown_selectall("device_nfclocator","'+b+'");return true;');d.appendChild(f);f.appendChild(document.createTextNode("\u5168\u9078"));e.appendChild(d)}c=c.split(",");for(d=0;d<gl_nfclocators.length;++d){var f=gl_nfclocators[d],g=!1;0<=c.indexOf(f.macaddress)&&(g=!0);e.appendChild(create_dropdown_device_item("nfclocator",
b,d,parseInt(f.macaddress),f.name,g))}return a}
function create_dropdown_device_item(a,b,c,e,d,f){var g=document.createElement("li"),r=document.createElement("a");r.setAttribute("class","small");r.setAttribute("tabIndex","-1");r.setAttribute("data-value",e);r.setAttribute("href","javascript:;");r.setAttribute("onclick",'dropdown_device_click("'+a+'","'+b+'",'+c+");return true;");e=document.createElement("input");e.setAttribute("type","checkbox");e.setAttribute("id","dropdown_checkbox_device_"+a+"_"+b+"_"+c);e.setAttribute("onclick","dropdown_checkbox_device_click();return true;");
e.checked=f;r.appendChild(e);r.appendChild(document.createTextNode(" "+d));g.appendChild(r);return g}function dropdown_selectall(a,b){console.log("dropdown_selectall() prefix:"+a+" rollcallid:"+b);for(var c=0;100>c;c++){var e=document.getElementById("dropdown_checkbox_"+a+"_"+b+"_"+c);if(void 0==e){console.log("dropdown_selectall() rollcallid:"+b+" i:"+c+" ele == undefined ");break}e.checked=!0}}function dropdown_checkbox_device_click(a,b){glDropdown_checkbox_device_click=!0}
var glDropdown_checkbox_device_click=!1;function dropdown_device_click(a,b,c){1!=glDropdown_checkbox_device_click&&(1==document.getElementById("dropdown_checkbox_device_"+a+"_"+b+"_"+c).checked?document.getElementById("dropdown_checkbox_device_"+a+"_"+b+"_"+c).checked=!1:document.getElementById("dropdown_checkbox_device_"+a+"_"+b+"_"+c).checked=!0);glDropdown_checkbox_device_click=!1}
function create_edit_subgrouplist_ui(a,b,c){a=document.createElement("div");a.setAttribute("class","btn-group");var e=document.createElement("button");e.setAttribute("type","button");e.setAttribute("class","btn btn-default btn-sm dropdown-toggle");e.setAttribute("data-toggle","dropdown");e.textContent="\u5b50\u96c6\u5408";a.appendChild(e);var d=document.createElement("span");d.setAttribute("class","caret");e.appendChild(d);e=document.createElement("ul");e.setAttribute("class","dropdown-menu");a.appendChild(e);
if(1==gl_groupid||2==gl_groupid){var d=document.createElement("li"),f=document.createElement("a");f.setAttribute("class","small");f.setAttribute("href","javascript:;");f.setAttribute("onclick",'dropdown_selectall("subgroup","'+b+'");return true;');d.appendChild(f);f.appendChild(document.createTextNode("\u5168\u9078"));e.appendChild(d)}c=c.split(",");for(d=0;d<gl_userdatasubgroups.length;++d){var f=gl_userdatasubgroups[d],g=check_numer_in_list(parseInt(f.subgroupid),c);e.appendChild(create_dropdown_subgroup_item(b,
d,parseInt(f.subgroupid),f.subgroupname,g))}return a}
function create_dropdown_subgroup_item(a,b,c,e,d){var f=document.createElement("li"),g=document.createElement("a");g.setAttribute("class","small");g.setAttribute("tabIndex","-1");g.setAttribute("data-value",c);g.setAttribute("href","javascript:;");g.setAttribute("onclick",'dropdown_subgroup_click("'+a+'",'+b+");return true;");c=document.createElement("input");c.setAttribute("type","checkbox");c.setAttribute("id","dropdown_checkbox_subgroup_"+a+"_"+b);c.setAttribute("onclick",'dropdown_checkbox_subgroup_click("'+
a+'",'+b+");return true;");c.checked=d;g.appendChild(c);g.appendChild(document.createTextNode(" "+e));f.appendChild(g);return f}function dropdown_checkbox_subgroup_click(a,b){glDropdown_checkbox_subgroup_click=!0}var glDropdown_checkbox_subgroup_click=!1;
function dropdown_subgroup_click(a,b){1!=glDropdown_checkbox_subgroup_click&&(1==document.getElementById("dropdown_checkbox_subgroup_"+a+"_"+b).checked?document.getElementById("dropdown_checkbox_subgroup_"+a+"_"+b).checked=!1:document.getElementById("dropdown_checkbox_subgroup_"+a+"_"+b).checked=!0);glDropdown_checkbox_subgroup_click=!1}
function getSelected_uhfreader_Device(a){for(var b=[],c=0;c<gl_rfiddevices.length;++c){var e=gl_rfiddevices[c];document.getElementById("dropdown_checkbox_device_uhfreader_"+a+"_"+c).checked&&(deviceid=parseInt(e.deviceid),b.push(deviceid))}return b.toString()}function getSelected_nfclocator_Device(a){for(var b=[],c=0;c<gl_nfclocators.length;++c){var e=gl_nfclocators[c];document.getElementById("dropdown_checkbox_device_nfclocator_"+a+"_"+c).checked&&b.push(e.macaddress)}return b.toString()}
function getSelectedSubgroup(a){for(var b=[],c=0;c<gl_userdatasubgroups.length;++c){var e=gl_userdatasubgroups[c];document.getElementById("dropdown_checkbox_subgroup_"+a+"_"+c).checked&&(e=parseInt(e.subgroupid),b.push(e))}return b.toString()}
function draw_cardrollcall_table(){for(var a=document.getElementById("RFID_ROLLCALL_TABLE");1<=a.rows.length;)a.deleteRow(0);for(var b=0,c=gl_cardrollcall.length-1;0<=c;c--){var e=gl_cardrollcall[c],e=create_record_table_item(b,e);a.appendChild(e);b+=1}for(c=gl_cardrollcall.length-1;0<=c;c--)e=gl_cardrollcall[c],$("#div_calendar_"+e.rollcallid).datepicker({rollcallid:e.rollcallid,language:"zh-TW",weekStart:1,beforeShowDay:function(a,b){var c=getRollCall(b);return checkValidDate(a,c,!1,!1)}})}
function checkValidDate(a,b,c,e){var d=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2);a=a.getDay();if(0<=b.weekday.indexOf(""+a)){if(e)return e=!0,a=b.invaliddate.indexOf(d),0<=a?(b.invaliddate.splice(a,1),e=!1):b.invaliddate.push(d),0==e?(a=b.validdate.indexOf(d),0>a&&b.validdate.push(d)):(a=b.validdate.indexOf(d),0<=a&&b.validdate.splice(a,1)),e?{enabled:c,classes:"active"}:{enabled:c,classes:"noactive"};a=b.invaliddate.indexOf(d);return 0<=a?{enabled:c,classes:"active"}:
{enabled:c,classes:"noactive"}}if(e)return e=!1,a=b.validdate.indexOf(d),0<=a?(b.validdate.splice(a,1),e=!0):b.validdate.push(d),e?(a=b.invaliddate.indexOf(d),0>a&&b.invaliddate.push(d)):(a=b.invaliddate.indexOf(d),0<=a&&b.invaliddate.splice(a,1)),e?{enabled:c,classes:"active"}:{enabled:c,classes:"noactive"};a=b.validdate.indexOf(d);return 0<=a?{enabled:c,classes:"noactive"}:{enabled:c,classes:"active"}}
function create_record_table_item(a,b){if(null==b)return null;var c=document.createElement("tr");1==a%2&&c.setAttribute("bgcolor","#ebebe0");var e=0;c.appendChild(document.createElement("td"));c.cells[e].appendChild(document.createTextNode(""+(a+1)));e++;var d=document.createElement("td");d.setAttribute("id","uiid_name_"+b.rollcallid);c.appendChild(d);var f=document.createElement("span");f.setAttribute("style","font-size:14px; font-weight:bold; color:#330033;");f.textContent=b.rollcallname;d.appendChild(f);
e++;d=document.createElement("td");d.setAttribute("id","rollcall_StartTime_"+b.rollcallid);c.appendChild(d);0<b.StartDate.length&&(d=document.createElement("span"),d.setAttribute("class","badge bg-green-active"),d.textContent=b.StartDate,c.cells[e].appendChild(d));d=document.createElement("span");d.setAttribute("class","badge bg-yellow-active");d.textContent=b.StartTime;c.cells[e].appendChild(d);e++;d=document.createElement("td");d.setAttribute("id","rollcall_EndTime_"+b.rollcallid);c.appendChild(d);
c.appendChild(document.createElement("td"));0<b.EndDate.length&&(d=document.createElement("span"),d.setAttribute("class","badge bg-green-active"),d.textContent=b.EndDate,c.cells[e].appendChild(d));d=document.createElement("span");d.setAttribute("class","badge bg-yellow-active");d.textContent=b.EndTime;c.cells[e].appendChild(d);e++;d=document.createElement("td");f=document.createElement("div");f.setAttribute("id","div_weekday_"+b.rollcallid);d.appendChild(f);var g=create_weekday_ui(b.rollcallid,b.weekday,
!1);f.appendChild(g);f=document.createElement("div");f.setAttribute("id","div_calendar_"+b.rollcallid);d.appendChild(f);f=document.createElement("div");d.appendChild(f);g=document.createElement("span");g.setAttribute("style","display:inline;padding:.2em .3em .3em;font-size:95%;line-height:2;position:relative;top:-1px;color:#fff;border-radius:2px;white-space:nowrap;background-image: linear-gradient(to bottom, #cc4400, #994411);");g.textContent="\u65e5\u671f";f.appendChild(g);g=document.createElement("span");
g.textContent=":\u4ee3\u8868\u4e0d\u9ede\u540d\u65e5\u671f";f.appendChild(g);c.cells[e].appendChild(d);e++;c.appendChild(document.createElement("td"));d=createRollCallDeviceList(b);c.cells[e].appendChild(d);e++;c.appendChild(document.createElement("td"));d=createSubgroupList(b.rollcallid,b.subgroups);c.cells[e].appendChild(d);e++;c.appendChild(document.createElement("td"));d=document.createElement("div");d.setAttribute("id","div_presentnotify_"+b.rollcallid);c.cells[e].appendChild(d);f=document.createElement("input");
f.setAttribute("id","checkbox_presentnotify_"+b.rollcallid);f.setAttribute("type","checkbox");f.setAttribute("disabled",!0);g=document.createElement("label");g.setAttribute("id","checkbox_presentnotify_label_"+b.rollcallid);g.setAttribute("for","checkbox_presentnotify_"+b.rollcallid);g.textContent="\u9ede\u540d\u5df2\u5230\u6642, \u767c\u9001\u63a8\u64ad. \u63a8\u64ad\u5167\u5bb9:";d.appendChild(f);d.appendChild(g);"1"===b.presentnotify?(f.checked=!0,f=create_comment_label(b.presentcomment)):(g.setAttribute("style",
"color: gray;"),f=create_disable_comment_label(b.presentcomment));f.setAttribute("id","label_presentcomment_"+b.rollcallid);d.appendChild(f);d=document.createElement("div");d.setAttribute("id","div_absentnotify_"+b.rollcallid);c.cells[e].appendChild(d);f=document.createElement("input");f.setAttribute("id","checkbox_absentnotify_"+b.rollcallid);f.setAttribute("type","checkbox");f.setAttribute("disabled",!0);g=document.createElement("label");g.setAttribute("id","checkbox_absentnotify_label_"+b.rollcallid);
g.setAttribute("for","checkbox_absentnotify_"+b.rollcallid);g.textContent="\u9ede\u540d\u672a\u5230\u6642, \u767c\u9001\u63a8\u64ad. \u63a8\u64ad\u5167\u5bb9:";d.appendChild(f);d.appendChild(g);"1"===b.absentnotify?(f.checked=!0,f=create_comment_label(b.absentcomment)):(g.setAttribute("style","color: gray;"),f=create_disable_comment_label(b.absentcomment));f.setAttribute("id","label_absentcomment_"+b.rollcallid);d.appendChild(f);d=document.createElement("div");d.setAttribute("id","div_resend_"+b.rollcallid);
c.cells[e].appendChild(d);f=document.createElement("input");f.setAttribute("id","checkbox_resend_"+b.rollcallid);f.setAttribute("type","checkbox");f.setAttribute("disabled",!0);g=document.createElement("label");g.setAttribute("id","checkbox_resend_label_"+b.rollcallid);g.setAttribute("for","checkbox_resend_"+b.rollcallid);g.textContent="\u53ef\u91cd\u8907\u63a8\u64ad";d.appendChild(f);d.appendChild(g);"1"===b.resend?f.checked=!0:g.setAttribute("style","color: gray;");e++;d=document.createElement("td");
c.appendChild(d);d=document.createElement("button");d.setAttribute("id","uiid_editbtn_"+b.rollcallid);d.setAttribute("title","Edit this rollcall");d.setAttribute("href","javascript:;");d.setAttribute("onclick",'edit_rollcall("'+b.rollcallid+'");return false;');f=document.createElement("i");f.setAttribute("id","uiid_editimg_"+b.rollcallid);f.setAttribute("class","fa fa-edit");d.appendChild(f);c.cells[e].appendChild(d);d=document.createElement("button");d.setAttribute("style","display:none");d.setAttribute("id",
"uiid_deletebtn_"+b.rollcallid);d.setAttribute("title","Delete This RollCall");d.setAttribute("href","javascript:;");d.setAttribute("onclick",'confirm_delete_rollcall("'+b.rollcallid+'", "'+b.rollcallname+'");return false;');f=document.createElement("i");f.setAttribute("class","fa fa-user-times");d.appendChild(f);c.cells[e].appendChild(d);return c}
function create_weekday_ui(a,b,c){var e=document.createElement("div");e.setAttribute("class","box");e.setAttribute("style","background-image: linear-gradient(to bottom, #a9dbde, #e4eded);");var d=document.createElement("div");d.setAttribute("class","box-header with-border");e.appendChild(d);var f=document.createElement("div");f.appendChild(document.createTextNode("\u9031\u9593\u9ede\u540d"));f.setAttribute("style","text-align:center;");d.appendChild(f);f=document.createElement("div");f.setAttribute("class",
"box-body no-padding");e.appendChild(f);d=document.createElement("table");d.setAttribute("class","table table-bordered");d.setAttribute("style","background-image: linear-gradient(to bottom, #e4eded, #e4eded);");f.appendChild(d);f=document.createElement("thead");d.appendChild(f);f=document.createElement("tr");d.appendChild(f);var g=document.createElement("th");g.textContent="\u4e00";f.appendChild(g);g=document.createElement("th");g.textContent="\u4e8c";f.appendChild(g);g=document.createElement("th");
g.textContent="\u4e09";f.appendChild(g);g=document.createElement("th");g.textContent="\u56db";f.appendChild(g);g=document.createElement("th");g.textContent="\u4e94";f.appendChild(g);g=document.createElement("th");g.textContent="\u516d";f.appendChild(g);g=document.createElement("th");g.textContent="\u65e5";f.appendChild(g);f=document.createElement("tbody");d.appendChild(f);d=document.createElement("tr");f.appendChild(d);for(f=1;7>=f;f++){var r=""+f;7==f&&(r="0");var q=!1;0<=b.indexOf(r)&&(q=!0);g=
document.createElement("td");r=create_checkbox(a,r,q,c);g.appendChild(r);d.appendChild(g)}return e}function create_checkbox(a,b,c,e){var d=document.createElement("input");d.setAttribute("id","uiid_checkbox_"+b+"_"+a);d.setAttribute("type","checkbox");d.setAttribute("onclick",'weekday_checkbox_click("'+a+'","'+b+'")');c&&d.setAttribute("checked",c);e||d.setAttribute("disabled",!0);return d}
function weekday_checkbox_click(a,b){var c=document.getElementById("uiid_checkbox_"+b+"_"+a).checked,e=getRollCall(a),d=e.weekday.indexOf(b);c?0>d&&(e.weekday.push(b),check_invaliddate(e,b)):0<=d&&(e.weekday.splice(d,1),check_validdate(e,b));console.log("weekday_checkbox_click() day:"+b+" rollcallid:"+a+" checkd:"+c+" weekday:"+e.weekday);$("#div_calendar_"+e.rollcallid).datepicker("setDate",null)}
function check_validdate(a,b){for(var c=a.validdate.length;c--;){var e=a.validdate[c];moment(e).day()==b&&(console.log("check_validdate() \u79fb\u9664\u9019\u500b\u65e5\u671f existed_date:"+e),a.validdate.splice(c,1))}}function check_invaliddate(a,b){for(var c=a.invaliddate.length;c--;){var e=a.invaliddate[c];moment(e).day()==b&&(console.log("check_invaliddate() \u79fb\u9664\u9019\u500b\u65e5\u671f existed_date:"+e),a.invaliddate.splice(c,1))}}
function createRollCallDeviceList(a){var b=document.createElement("span");b.setAttribute("id","uiid_devicelist_"+a.rollcallid);if(0<a.rfiddeviceids.length){var c=create_rfid_devicelist_ui(a.rollcallid,a.rfiddeviceids);b.appendChild(c)}0<a.nfclocators.length&&(a=create_nfc_devicelist_ui(a.rollcallid,a.nfclocators),b.appendChild(a));return b}
function create_rfid_devicelist_ui(a,b){var c=b.split(","),e=document.createElement("span");e.setAttribute("id","uiid_uhfreader_"+a);for(var d=0;d<c.length;d++){var f=document.createElement("div"),g=create_rfiddevice_label(getRFIDDeviceName(c[d]));f.appendChild(g);e.appendChild(f)}return e}
function create_nfc_devicelist_ui(a,b){var c=b.split(","),e=document.createElement("span");e.setAttribute("id","uiid_nfclocator_"+a);for(var d=0;d<c.length;d++){var f=document.createElement("div"),g=create_nfclocator_label(getNFCLocatorDeviceName(c[d]));f.appendChild(g);e.appendChild(f)}return e}
function createSubgroupList(a,b){var c=b.split(","),e=document.createElement("span");e.setAttribute("id","uiid_subgroup_"+a);for(var d=0;d<c.length;d++){var f=document.createElement("div"),g=getSubgroupName(c[d]);0<g.length&&(g=create_subgroup_label(g),f.appendChild(g),e.appendChild(f))}return e}
function create_comment_label(a){var b=document.createElement("span");b.setAttribute("style","display:inline;padding:.2em .3em .3em;font-size:95%;font-weight:700;line-height:2;position:relative;top:-1px;color:#fff;border-radius:2px;white-space:nowrap;background-color:rgb(54, 127, 169);");b.textContent=a;return b}
function create_disable_comment_label(a){var b=document.createElement("span");b.setAttribute("style","display:inline;padding:.2em .3em .3em;font-size:95%;font-weight:700;line-height:2;position:relative;top:-1px;color:#fff;border-radius:2px;white-space:nowrap;background-color:rgb(214, 214, 214);");b.textContent=a;return b}
function create_rfiddevice_label(a){var b=document.createElement("span");b.setAttribute("style","display:inline;padding:.2em .3em .3em;font-size:95%;font-weight:700;line-height:2;position:relative;top:-1px;color:#fff;border-radius:2px;white-space:nowrap;background-color:#00a7d0;");b.textContent=a;return b}
function create_nfclocator_label(a){var b=document.createElement("span");b.setAttribute("style","display:inline;padding:.2em .3em .3em;font-size:95%;font-weight:700;line-height:2;position:relative;top:-1px;color:#fff;border-radius:2px;white-space:nowrap;background-color:#f39c12;");b.textContent=a;return b}
function create_subgroup_label(a){var b=document.createElement("span");b.setAttribute("style","display:inline;padding:.2em .3em .3em;font-size:95%;font-weight:700;line-height:2;position:relative;top:-1px;color:#fff;border-radius:2px;white-space:nowrap;background-color:#00a65a;");b.textContent=a;return b}
function edit_rollcall(a){console.log("edit_rollcall() rollcallid:"+a);var b=getRollCall(a);if(null!=b){create_edit_ui("uiid_name",a,b.rollcallname);clearChildView("rollcall_StartTime_"+b.rollcallid);clearChildView("rollcall_EndTime_"+b.rollcallid);var c=document.getElementById("rollcall_StartTime_"+b.rollcallid),e=document.getElementById("rollcall_EndTime_"+b.rollcallid),d=create_time_picker("rollcall_StartTime_"+b.rollcallid+"_edit",b.StartTime);c.appendChild(d);c=create_time_picker("rollcall_EndTime_"+
b.rollcallid+"_edit",b.EndTime);e.appendChild(c);e="div_weekday_"+b.rollcallid;clearChildView(e);e=document.getElementById(e);c=create_weekday_ui(b.rollcallid,b.weekday,!0);e.appendChild(c);var f="div_calendar_"+b.rollcallid;$("#"+f).datepicker("destroy");$("#"+f).datepicker({rollcallid:b.rollcallid,language:"zh-TW",weekStart:1,beforeShowDay:function(a,b){var c=getRollCall(b);return checkValidDate(a,c,!0,!1)}}).on("changeDate",function(a){if(void 0!=a.rollcallid&&void 0!=a.date){var b=getRollCall(a.rollcallid);
checkValidDate(a.date,b,!0,!0);$("#"+f).datepicker("update",a.date)}});$("#"+f).datepicker("setDate",null);clearChildView("uiid_devicelist_"+b.rollcallid);e=document.getElementById("uiid_devicelist_"+b.rollcallid);c=create_edit_devicelist_ui("rollcall_devicelist",b.rollcallid,b.rfiddeviceids,b.nfclocators);e.appendChild(c);clearChildView("uiid_subgroup_"+b.rollcallid);e=document.getElementById("uiid_subgroup_"+b.rollcallid);c=create_edit_subgrouplist_ui("rollcall_subgrouplist",b.rollcallid,b.subgroups);
e.appendChild(c);document.getElementById("checkbox_presentnotify_"+b.rollcallid).disabled=!1;document.getElementById("checkbox_presentnotify_label_"+b.rollcallid).setAttribute("style","color: black;");document.getElementById("checkbox_absentnotify_"+b.rollcallid).disabled=!1;document.getElementById("checkbox_absentnotify_label_"+b.rollcallid).setAttribute("style","color: black;");e=document.getElementById("label_presentcomment_"+b.rollcallid);c=document.getElementById("label_absentcomment_"+b.rollcallid);
e.parentNode.removeChild(e);c.parentNode.removeChild(c);c=document.getElementById("div_presentnotify_"+b.rollcallid);e=document.getElementById("div_absentnotify_"+b.rollcallid);d=create_input_text("input_presentcomment_"+b.rollcallid,b.presentcomment);c.appendChild(d);c=create_input_text("input_absentcomment_"+b.rollcallid,b.absentcomment);e.appendChild(c);document.getElementById("checkbox_resend_"+b.rollcallid).disabled=!1;document.getElementById("checkbox_resend_label_"+b.rollcallid).setAttribute("style",
"color: black;");b=document.getElementById("uiid_editbtn_"+a);b.setAttribute("title","Save this RollCall");b.setAttribute("onclick",'save_rollcall("'+a+'");return false;');document.getElementById("uiid_editimg_"+a).setAttribute("class","fa fa-save");document.getElementById("uiid_deletebtn_"+a).setAttribute("style","display:block");$(".timepicker").timepicker({showInputs:!1})}}function create_edit_ui(a,b,c){var e=clearChildView(a+"_"+b);a=create_input_text(a+"_"+b+"_edit",c);e.appendChild(a)}
function clearChildView(a){a=document.getElementById(a);if(null!=a)for(;a.firstChild;)a.removeChild(a.firstChild);return a}
function save_rollcall(a){var b=document.getElementById("uiid_name_"+a+"_edit").value,c=document.getElementById("rollcall_StartTime_"+a+"_edit").value,e=document.getElementById("rollcall_EndTime_"+a+"_edit").value,d=[];document.getElementById("uiid_checkbox_1_"+a).checked&&d.push("1");document.getElementById("uiid_checkbox_2_"+a).checked&&d.push("2");document.getElementById("uiid_checkbox_3_"+a).checked&&d.push("3");document.getElementById("uiid_checkbox_4_"+a).checked&&d.push("4");document.getElementById("uiid_checkbox_5_"+
a).checked&&d.push("5");document.getElementById("uiid_checkbox_6_"+a).checked&&d.push("6");document.getElementById("uiid_checkbox_0_"+a).checked&&d.push("0");var f=getRollCall(a),g=f.validdate,f=f.invaliddate,r=getSelected_uhfreader_Device(a),q=getSelected_nfclocator_Device(a),v=getSelectedSubgroup(a),A=0;document.getElementById("checkbox_presentnotify_"+a).checked&&(A=1);var C=document.getElementById("input_presentcomment_"+a).value,x=0;document.getElementById("checkbox_absentnotify_"+a).checked&&
(x=1);var y=document.getElementById("input_absentcomment_"+a).value,m=0;document.getElementById("checkbox_resend_"+a).checked&&(m=1);0==b.length?alert("\u8acb\u8f38\u5165\u540d\u7a31"):c===e?alert("\u8acb\u9078\u64c7\u4e0d\u540c\u6642\u6bb5"):update_rollcall(a,b,c,e,r,q,v,d.toString(),g.toString(),f.toString(),A,C,x,y,m)}
function update_rollcall(a,b,c,e,d,f,g,r,q,v,A,C,x,y,m){console.log("update_rollcall() validdate:"+q);console.log("update_rollcall() invaliddate:"+v);if(0==b.length)alert("\u8acb\u8f38\u5165\u540d\u7a31");else if(0==d.length&&0==f.length)alert("\u8acb\u9078\u64c7\u4f7f\u7528\u9ede\u540d\u88dd\u7f6e");else if(c===e)alert("\u8acb\u9078\u64c7\u4e0d\u540c\u6642\u6bb5");else{m=getRollCall(a);var k={};k.project_id=""+project_id;k.update_cardrollcall=1;k.rollcallid=a;k.rollcallname=b;k.StartTime=c;k.EndTime=
e;k.StartDate=m.StartDate;k.EndDate=m.EndDate;k.rfiddeviceids=d;k.nfclocators=f;k.subgroups=g;k.weekday=r;k.validdate=q;k.invaliddate=v;k.presentnotify=A;k.presentcomment=C;k.absentnotify=x;k.absentcomment=y;k.maingroups=m.maingroups;k.type=m.type;k.curriculumrecordid=m.curriculumrecordid;jQuery.ajax({url:gl_target_server+"/php/rfiddevice.php",type:"POST",data:k,success:function(a){400==a.status&&alert("update Error! response = "+JSON.stringify(a));setTimeout(reload_rollcall_info,300)},error:function(a,
b,c){alert("error = "+c);alert("xhr.responseText = "+a.responseText)}})}}
function save_new_rollcall(){var a=document.getElementById("input_name").value,b=document.getElementById("rollcall_StartTime").value,c=document.getElementById("rollcall_EndTime").value,e=gl_NewRollCall.weekday.toString(),d=gl_NewRollCall.validdate.toString(),f=gl_NewRollCall.invaliddate.toString(),g=getSelected_uhfreader_Device("new"),r=getSelected_nfclocator_Device("new"),q=getSelectedSubgroup("new"),v=0;document.getElementById("checkbox_presentnotify").checked&&(v=1);var A=document.getElementById("input_presentcomment").value,
C=0;document.getElementById("checkbox_absentnotify").checked&&(C=1);var x=document.getElementById("input_absentcomment").value,y=0;document.getElementById("checkbox_resend").checked&&(y=1);if(0==a.length)alert("\u8acb\u8f38\u5165\u540d\u7a31");else if(0==g.length&&0==r.length)alert("\u8acb\u9078\u64c7\u4f7f\u7528\u9ede\u540d\u88dd\u7f6e");else if(b===c)alert("\u8acb\u9078\u64c7\u4e0d\u540c\u6642\u6bb5");else{var m={};m.project_id=""+project_id;m.create_new_cardrollcall=1;m.rollcallname=a;m.StartTime=
b;m.EndTime=c;m.StartDate="";m.EndDate="";m.rfiddeviceids=g;m.nfclocators=r;m.subgroups=q;m.weekday=e;m.validdate=d;m.invaliddate=f;m.presentnotify=v;m.presentcomment=A;m.absentnotify=C;m.absentcomment=x;m.resend=y;m.maingroups="";m.type="0";m.curriculumrecordid="0";jQuery.ajax({url:gl_target_server+"/php/rfiddevice.php",type:"POST",data:m,success:function(a){400==a.status&&alert("update Error! response = "+JSON.stringify(a));setTimeout(reload_rollcall_info,300)},error:function(a,b,c){alert("error = "+
c);alert("xhr.responseText = "+a.responseText)}})}}function confirm_delete_rollcall(a,b){confirm("Are you sure you want to delete this rollcall:"+b+" ?")&&delete_rollcall(a)}
function delete_rollcall(a){var b={};b.project_id=""+project_id;b.delete_cardrollcall=1;b.rollcallid=a;jQuery.ajax({url:gl_target_server+"/php/rfiddevice.php",type:"POST",data:b,success:function(a){400==a.status&&alert("update Error! response = "+JSON.stringify(a));setTimeout(reload_rollcall_info,300)},error:function(a,b,d){alert("error = "+d);alert("xhr.responseText = "+a.responseText)}})}
function create_new_cardrollcall(){create_empty_record_table_item(gl_cardrollcall.length+1);$(".timepicker").timepicker({showInputs:!1});$("#div_calendar_88888").datepicker({rollcallid:88888,language:"zh-TW",weekStart:1,beforeShowDay:function(a,b){var c=getRollCall(b);return checkValidDate(a,c,!0,!1)}}).on("changeDate",function(a){if(void 0!=a.rollcallid&&void 0!=a.date){var b=getRollCall(a.rollcallid);checkValidDate(a.date,b,!0,!0);$("#div_calendar_88888").datepicker("update",a.date)}});return!1}
function reload_rollcall_info(){PreLoadIndex=-1;CurrentLoadIndex=0;check_loading_status()}function getRollCall(a){for(var b=null,c=0;c<gl_cardrollcall.length;++c){var e=gl_cardrollcall[c];if(e.rollcallid===a){b=e;break}}return 88888==a?gl_NewRollCall:b}function getRFIDDeviceName(a){for(var b=a,c=0;c<gl_rfiddevices.length;++c){var e=gl_rfiddevices[c];if(e.deviceid===a){b=e.name;break}}return b}
function getNFCLocatorDeviceName(a){for(var b=a,c=0;c<gl_nfclocators.length;++c){var e=gl_nfclocators[c];if(e.macaddress===a){b=e.name;break}}return b}function getSubgroupName(a){for(var b="",c=0;c<gl_usersubgroups.length;++c){var e=gl_usersubgroups[c];if(e.subgroupid==a){b=e.subgroupname;break}}return b}function check_numer_in_list(a,b){for(var c=!1,e=0;e<b.length;++e)if(parseInt(b[e])==a){c=!0;break}return c}
function move_page_backward(){var a=document.getElementById("id_current_page_num");1>=glCurrentPage||(glCurrentPage--,a.textContent=glCurrentPage,reload_rollcall_info())}function move_page_forward(){var a=document.getElementById("id_current_page_num");glCurrentPage++;a.textContent=glCurrentPage;reload_rollcall_info()}function open_cardrollcall_page(){window.open("/index.php/vilscardrollcall/"+project_id,"_blank").focus()};
