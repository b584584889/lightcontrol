var firedEvents_count=30,firedEvents_offset=0,firedEvents_start_date="",gl_allevents=[],gl_ui_firedEvents_offset=0,gl_user_info=[],gl_EditMode=!1;load_user_info();
function load_user_info(){$.getJSON(gl_target_server+"/php/vilsnodes.php","userinfo=1&project_id="+project_id,function(b){$.each(b,function(b,a){var d=[];d.userid=parseInt(a.userid);d.account=a.account;d.empid=parseInt(a.userid);d.cname=a.name;d.orgName=a.unit;d.gender=a.gender;gl_user_info.push(d)})}).success(function(){}).error(function(){}).complete(function(){})}$(".ajax").click(function(){load_events_from_server()});
function load_events_from_server(){var b=0;$.getJSON(gl_target_server+"/php/eventfire.php?project_id="+project_id+"&prettystring=1&markasread=1&count="+firedEvents_count+"&offset="+firedEvents_offset,function(f){$.each(f,function(a,d){b++;gl_allevents.push(d)})}).success(function(){var f=gl_allevents.slice().reverse(),f=merge_same_event(f),f=pair_event(f),f=merge_same_tagaction_event(f).reverse();show_pairevent_timeline(f);0==b&&($("#AjaxLoadMode").prop("disabled",!0),$("#AjaxLoadMode").prop("class",
"btn btn-lrg ajax"),$("#AjaxLoadMode").html("No more data."),$("#AjaxLoadModeicon").hide());0<b&&(firedEvents_offset+=b,firedEvents_offset++)})}
function merge_same_event(b){var f=[],a;for(a=0;a<b.length;a++){var d=b[a],g=d.eventjson.eventid;if(void 0==g){var e={type:"none",events:[]};e.events.push(d)}else if("9999"===g||"8888"===g||"111111"===g){var c=d.eventjson.nodeid,h=d.eventjson.action,l=d.eventjson.locatorid,n=d.datetime;void 0==d.eventjson.nodeid&&void 0==d.eventjson.locatorid&&(l=c=d.eventjson.cardid,void 0!=d.eventjson.loramacaddress&&(l=d.eventjson.loramacaddress));e={};e.type=g;e.events=[];e.events.push(d);for(var m=a+1;m<b.length;){var k=
b[m];if(void 0==k.eventjson.eventid)m++;else{var p=k.eventjson.nodeid,r=k.eventjson.action,q=k.eventjson.locatorid,t=k.datetime;void 0==k.eventjson.nodeid&&void 0==k.eventjson.locatorid&&(q=p=k.eventjson.cardid,void 0!=k.eventjson.loramacaddress&&(q=k.eventjson.loramacaddress));if(c===p&&h===r&&l===q){p=moment(n,"YYYY-MM-DD HH:mm:ss");t=moment(t,"YYYY-MM-DD HH:mm:ss").diff(p);t=moment.duration(t)/1E3;p=61;"Cancel"===h&&(p=90);"CallOut"===h&&(p=300);if("9999"===g&&d.eventjson.areaid!=k.eventjson.areaid)break;
if(t<p)e.events=addto_merageevent_list(e.events,k),b.splice(m,1);else break}else if(h!=r&&l===q)break;else m++}}}else e={type:"none",events:[]},e.events.push(d);f.push(e)}return f}function addto_merageevent_list(b,f){for(var a=!1,d=0;d<b.length;d++){var g=b[d];g.eventjson.locatorid===f.eventjson.locatorid&&(g.lastdatetime=f.datetime,a=!0);void 0==g.eventjson.locatorid&&g.eventjson.cardid===f.eventjson.cardid&&(g.lastdatetime=f.datetime,a=!0)}0==a&&b.push(f);return b}
function pair_event(b){var f=[],a;for(a=0;a<b.length;a++){var d=b[a],g=d.events[0],e=g.eventjson.eventid;if(void 0==e){var c={type:"single",events1:[],events2:[]};c.events1.push(g);f.push(c)}else if("9999"===e||"8888"===e||"119999"===e||"229999"===e)if(c=g.eventjson.action,"Alert"===c||"AlertTagNotMoving"===c||"AlertLayDown"===c||"CallOut"===c){var c={type:"pair",events1:[],events2:[]},h=!1,l;for(l=a+1;l<b.length;l++){var n=b[l],m=n.events[0];if(void 0!=e&&"Cancel"===m.eventjson.action){for(m=0;m<
d.events.length;m++){for(var k=d.events[m],p=k.eventjson.locatorid,r=0;r<n.events.length;r++){var q=n.events[r];if(p===q.eventjson.locatorid){k=moment(k.datetime,"YYYY-MM-DD HH:mm:ss");q=moment(q.datetime,"YYYY-MM-DD HH:mm:ss").diff(k);600>moment.duration(q)/1E3&&(h=!0);break}if(h)break}if(h)break}if(h){Array.prototype.push.apply(c.events1,n.events);Array.prototype.push.apply(c.events2,d.events);break}}}1==h?(f.push(c),a=l):0==h&&(c={type:"single",events1:[],events2:[]},c.events1.push(g),f.push(c))}else c=
{type:"single",events1:[],events2:[]},c.events1.push(g),f.push(c);else c={type:"single",events1:[],events2:[]},c.events1.push(g),f.push(c)}return f}
function merge_same_tagaction_event(b){var f=[],a;for(a=0;a<b.length;a++){var d=b[a];if("single"===d.type){var g=d.events1[0],e=g.eventjson.nodeid,c=g.datetime;void 0==g.eventjson.nodeid&&(e=g.eventjson.cardid);for(g=a+1;g<b.length;g++){var h=b[g];if("single"===h.type){var h=h.events1[0],l=h.eventjson.nodeid,n=h.datetime;void 0==h.eventjson.nodeid&&(l=h.eventjson.cardid);if(void 0!=h.eventjson.eventid){var m=moment(c,"YYYY-MM-DD HH:mm:ss"),n=moment(n,"YYYY-MM-DD HH:mm:ss").diff(m);if(60<moment.duration(n)/
1E3)break;e===l&&(d.type="sametag",d.events1.push(h),b.splice(g,1))}}}}f.push(d)}return f}
function show_pairevent_timeline(b){gl_ui_firedEvents_offset=0;var f;for(f=0;f<b.length;f++){var a=b[f];"single"===a.type?(a=create_single_event_html(a.events1[0],gl_ui_firedEvents_offset+1),$(".ajax-content-"+gl_ui_firedEvents_offset).html(a),gl_ui_firedEvents_offset+=1):"pair"===a.type?(a=create_pair_event_html(a.events1,a.events2,gl_ui_firedEvents_offset+1),$(".ajax-content-"+gl_ui_firedEvents_offset).html(a),gl_ui_firedEvents_offset+=1):"sametag"===a.type&&(a=a.events1.reverse(),a=create_sametag_event_html(a,
gl_ui_firedEvents_offset+1),$(".ajax-content-"+gl_ui_firedEvents_offset).html(a),gl_ui_firedEvents_offset+=1)}}
function create_single_event_html(b,f){var a=b.prettyjson,d=b.eventjson,g=b.datetime,e=b.lastdatetime,c='<ul class="timeline">',h=moment(g).format("YYYY MMM Do");firedEvents_start_date!=h&&(firedEvents_start_date=h,c+='<li class="time-label"><span class="bg-red">'+h+"</span></li>");c="Enter"==d.action?c+'<li><i class="fa fa-sign-in bg-aqua"></i>':"Leave"==d.action?c+'<li><i class="fa fa-share-square-o bg-yellow-active"></i>':"Stay"==d.action?c+'<li><i class="fa fa-street-view bg-aqua-active"></i>':
"Alert"==d.action||"AlertTagNotMoving"==d.action||"AlertLayDown"==d.action?c+'<li><i class="fa fa-bell-o bg-red"></i>':"Cancel"==d.action?c+'<li><i class="fa fa-bell-slash-o bg-blue"></i>':"CallOut"==d.action?c+'<li><i class="fa fa-hand-paper-o bg-green"></i>':"PowerOff"==d.action?c+'<li><i class="fa fa-flash bg-red"></i>':"PowerOn"==d.action?c+'<li><i class="fa fa-flash bg-green"></i>':"OpenDoor"==d.action?c+'<li><i class="fa fa-unlock bg-red"></i>':"CloseDoor"==d.action?c+'<li><i class="fa fa-lock bg-green"></i>':
"iCoverOpenDoor"==d.action?c+'<li><i class="fa fa-unlock bg-red"></i>':"iCoverCloseDoor"==d.action?c+'<li><i class="fa fa-lock bg-green"></i>':"EnterDoor"==d.action?c+'<li><i class="fa fa-sign-in bg-red"></i>':"ExitDoor"==d.action?c+'<li><i class="fa fa-sign-out bg-green"></i>':"SensorAlert"==d.action?c+'<li><i class="fa fa-rss bg-red"></i>':"unknowncard"==d.action?c+'<li><i class="fa fa-warning bg-red"></i>':"BodyInfoAlertNormal"==d.action?c+'<li><i class="fa fa-street-view bg-green"></i>':"BodyInfoAlertWarning"==
d.action?c+'<li><i class="fa fa-street-view bg-yellow"></i>':"BodyInfoAlertDanger"==d.action?c+'<li><i class="fa fa-street-view bg-red"></i>':c+'<li><i class="fa fa-street-view bg-yellow"></i>';c=c+'<div class="timeline-item">'+('<span class="time"><i class="fa fa-clock-o"></i>&nbsp;'+moment(g).format("hh:mm:ss A")+"</span>");void 0!=e&&(c+='<span class="time"><i class="fa fa-clock-o"></i>&nbsp;'+moment(e).format("hh:mm:ss A")+"</span>");"inspectionpoint"==a.type?(c+='<a href="javascript:;" onclick="markclick(\'tag\', 0);return false;">'+
a.tagname+"&nbsp;&nbsp;</a></h3>",c=c+'<div class="timeline-body">'+(convert_action_name(a.actionname)+"&nbsp;</br>"),c+="\u5de1\u6aa2\u9ede:"+a.inspectionpointname+"&nbsp;"):"inspectionpointtravel"==a.type?(0<a.tagname.length&&(c+='<a href="javascript:;" onclick="markclick(\'tag\', 0);return false;">'+a.tagname+"&nbsp;&nbsp;</a></h3>"),c=c+'<div class="timeline-body">'+(convert_action_name(a.actionname)+"&nbsp;</br>"),c+="\u5de1\u6aa2\u9ede:",null!=a.startinspectionpointname&&null!=a.endinspectionpointname?
(c+=a.startinspectionpointname,c=c+"&nbsp;->"+a.endinspectionpointname):null!=a.startinspectionpointname?c+=a.startinspectionpointname:null!=a.endinspectionpointname&&(c+=a.endinspectionpointname)):"inspectionGroup"==a.type?(c+='<a href="javascript:;" onclick="markclick(\'tag\', 0);return false;">'+a.groupname+"&nbsp;&nbsp;</a></h3>",c=c+'<div class="timeline-body">'+(convert_action_name(a.actionname)+"&nbsp;</br>")):"rfidcard"==a.type?(c+='<a href="javascript:;" onclick="copyTextToClipboard(\''+
a.cardid+"', '"+g+"');return false;\">"+a.cardid+"&nbsp;&nbsp;</a></h3>",c+='<span id="cardid_copy_alert_'+a.cardid+"_"+g+' "></span>',c=c+'<div class="timeline-body">'+(a.locatorname+"&nbsp;"),c+=convert_action_name(a.actionname)+"&nbsp;</br>"):"nfccard"==a.type?(c+='<a href="javascript:;" onclick="copyTextToClipboard(\''+a.cardid+"', '"+g+"');return false;\">"+a.cardid+"&nbsp;&nbsp;</a></h3>",c+='<span id="cardid_copy_alert_'+a.cardid+"_"+g+'"></span>',c=c+'<div class="timeline-body">'+(a.locatorname+
"&nbsp;"),c+=convert_action_name(a.actionname)+"&nbsp;</br>"):(c+='<a href="javascript:;" onclick="markclick(\'tag\', 0);return false;">'+a.nodename+"&nbsp;&nbsp;</a></h3>",c+='<div class="timeline-body">',0<a.locatorname.length&&a.locatorname!=a.nodename&&(c+="\u5728"+a.locatorname),void 0!=d.lat&&(c+="\u4f4d\u7f6e"+d.lat+","+d.lng+"&nbsp;",c+='<a href="javascript:;" onclick="open_gmap('+d.lat+","+d.lng+');return false;"><i class="fa fa-map-marker"></i></a>',c+="&nbsp;</br>"),c+=convert_action_name(a.actionname)+
"&nbsp;",c+=a.areaname+"&nbsp;","0"!==d.issuetime&&(c+=convert_IssueTime_name(a.timename)+"&nbsp;"));c+="</div>";"9999"===d.eventid&&(c+=create_extra_info(b));return c+"</div></li>"+('</ul><div class="ajax-content-'+f+'"></div>')}
function create_pair_event_html(b,f,a){var d=f[0],g=d.prettyjson,e=d.eventjson,c='<ul class="timeline">',d=moment(d.datetime).format("YYYY MMM Do");firedEvents_start_date!=d&&(firedEvents_start_date=d,c+='<li class="time-label"><span class="bg-red">'+d+"</span></li>");d=g.nodename;g=!0;"Alert"==e.action||"AlertTagNotMoving"==event_eventjson.action||"AlertLayDown"==event_eventjson.action?c+='<li><i class="fa fa-bell-o bg-red"></i>':"CallOut"==e.action?c+='<li><i class="fa fa-hand-paper-o bg-green"></i>':
"PowerOff"==e.action?c+='<li><i class="fa fa-flash bg-red"></i>':"PowerOn"==e.action?c+='<li><i class="fa fa-flash bg-green"></i>':"OpenDoor"==e.action?c+='<li><i class="fa fa-unlock bg-red"></i>':"CloseDoor"==e.action?c+='<li><i class="fa fa-lock bg-green"></i>':"iCoverOpenDoor"==e.action?c+='<li><i class="fa fa-unlock bg-red"></i>':"iCoverCloseDoor"==e.action?c+='<li><i class="fa fa-lock bg-green"></i>':"EnterDoor"==e.action?c+='<li><i class="fa fa-sign-in bg-red"></i>':"ExitDoor"==e.action?c+=
'<li><i class="fa fa-sign-out bg-green"></i>':"SensorAlert"==e.action?c+='<li><i class="fa fa-rss bg-red"></i>':"unknowncard"==e.action?(d=e.cardid,g=!1,c+='<li><i class="fa fa-warning bg-red"></i>'):c+='<li><i class="fa fa-street-view bg-yellow"></i>';c=c+'<div class="timeline-item">'+('<a href="javascript:;" onclick="markclick(\'tag\', 0);return false;">'+d+"&nbsp;&nbsp;</a></h3>")+'<div class="timeline-body"></div>';c+="</div>";d=null;for(e=0;e<b.length;e++){var h=b[e];null==d&&(d=h);c+=create_event_html(h,
!1,h)}for(e=0;e<f.length;e++)h=f[e],c=e==f.length-1?c+create_event_html(h,g,d):c+create_event_html(h,!1,h);c+="</li>";return c+='</ul><div class="ajax-content-'+a+'"></div>'}
function create_sametag_event_html(b,f){var a=b[0],d=a.prettyjson,g=a.eventjson,e='<ul class="timeline">',c=moment(a.datetime).format("YYYY MMM Do");firedEvents_start_date!=c&&(firedEvents_start_date=c,e+='<li class="time-label"><span class="bg-red">'+c+"</span></li>");c=d.nodename;d=!0;1<b.length&&(a=b[b.length-1]);"Alert"===a.eventjson.action||"AlertTagNotMoving"==a.action||"AlertLayDown"==a.action?e+='<li><i class="fa fa-bell-o bg-red"></i>':"Cancel"===a.eventjson.action?e+='<li><i class="fa fa-bell-slash-o bg-blue"></i>':
"CallOut"===a.eventjson.action?e+='<li><i class="fa fa-hand-paper-o bg-green"></i>':"PowerOff"===a.eventjson.action?e+='<li><i class="fa fa-flash bg-red"></i>':"PowerOn"===a.eventjson.action?e+='<li><i class="fa fa-flash bg-green"></i>':"OpenDoor"===a.eventjson.action?e+='<li><i class="fa fa-unlock bg-red"></i>':"CloseDoor"===a.eventjson.action?e+='<li><i class="fa fa-lock bg-green"></i>':"EnterDoor"===a.eventjson.action?e+='<li><i class="fa fa-sign-in bg-red"></i>':"ExitDoor"===a.eventjson.action?
e+='<li><i class="fa fa-sign-out bg-green"></i>':"SensorAlert"===a.eventjson.action?e+='<li><i class="fa fa-rss bg-red"></i>':"unknowncard"==a.eventjson.action?(c=g.cardid,d=!1,e+='<li><i class="fa fa-warning bg-red"></i>'):e+='<li><i class="fa fa-street-view bg-yellow"></i>';e=e+'<div class="timeline-item">'+('<a href="javascript:;" onclick="markclick(\'tag\', 0);return false;">'+c+"&nbsp;&nbsp;</a></h3>")+'<div class="timeline-body"></div>';e+="</div>";for(g=0;g<b.length;g++)a=b[g],e=g==b.length-
1?e+create_event_html(a,d,a):e+create_event_html(a,!1,a);e+="</li>";return e+='</ul><div class="ajax-content-'+f+'"></div>'}
function create_event_html(b,f,a){var d=b.prettyjson,g=b.lastdatetime;b='<div class="timeline-item">'+('<span class="time"><i class="fa fa-clock-o"></i>&nbsp;'+moment(b.datetime).format("hh:mm:ss A")+"</span>");void 0!=g&&(b+='<span class="time"><i class="fa fa-clock-o"></i>&nbsp;'+moment(g).format("hh:mm:ss A")+"</span>");b+='<div class="timeline-body">';void 0!=d.locatorname&&0<d.locatorname.length&&(b=void 0!=d.nodename?0<d.nodename.length&&d.locatorname!=d.nodename?b+(d.nodename+"&nbsp;&nbsp;\u5728"+
d.locatorname):b+("\u5728"+d.locatorname):b+("\u5728"+d.locatorname));b+=convert_action_name(d.actionname)+"&nbsp;";void 0!=d.areaname&&(b+=d.areaname+"&nbsp;");b+="</div>";f&&(b+=create_extra_info(a));return b+"</div>"}
function create_extra_info(b){var f=b.empid,a=findUserName(b.empid),d=b.comment,g=!0;0==a.length&&(a="\u57f7\u884c\u4eba\u54e1",g=!1);new_html="";new_html+='<div class="timeline-footer">';new_html+="<div id=timeline_footer_"+b.firedeventid+">";new_html+="<button type='button' class='btn btn-box-tool' onclick='click_edit_event("+b.firedeventid+', "'+f+'", "'+a+'", "'+d+"\");return false;'><i class='fa fa-edit'></i></button>&nbsp;";new_html=g?new_html+('<a class="btn btn-primary btn-xs">'+a+"</a>&nbsp;"):
new_html+('<a class="btn btn-warning btn-xs">'+a+"</a>&nbsp;");new_html+='<textarea class="form-control" rows="1" placeholder="\u8f38\u5165\u8a3b\u89e3..."  disabled>'+d+"</textarea>";new_html+="</div>";return new_html+="</div>"}
function click_edit_event(b,f,a,d){console.log("click_edit_event() firedeventid:"+b+" empid:"+f);gl_EditMode=!0;for(var g=document.getElementById("timeline_footer_"+b);g.firstChild;)g.removeChild(g.firstChild);var e=document.createElement("button");e.setAttribute("type","button");e.setAttribute("class","btn btn-box-tool");e.setAttribute("onclick","click_save_event("+b+");return false;");var c=document.createElement("i");c.setAttribute("class","fa fa-save");e.appendChild(c);g.appendChild(e);e=document.createElement("div");
e.setAttribute("class","btn-group");c=document.createElement("button");c.setAttribute("type","button");c.setAttribute("class","btn btn-block btn-primary btn-xs dropdown-toggle");c.setAttribute("data-toggle","dropdown");c.setAttribute("data-id",f);c.setAttribute("id","dropdown_cur_user_"+b);c.textContent=a;e.appendChild(c);var h=document.createElement("span");h.setAttribute("class","caret");c.appendChild(h);c=document.createElement("ul");c.setAttribute("class","dropdown-menu");c.setAttribute("id",
"dropdown_user_"+b);e.appendChild(c);g.appendChild(e);add_user_dropdown_list(c,b,f,a);f=document.createElement("textarea");f.setAttribute("class","form-control");f.setAttribute("rows","1");f.setAttribute("id","comment_"+b);f.textContent=d;g.appendChild(f)}
function add_user_dropdown_list(b,f,a,d){d=create_dropdown_user_item("-1","\u4e0d\u6307\u5b9a",!1,f);b.appendChild(d);a=parseInt(a);for(var g=0;g<gl_user_info.length;g++)d=!1,gl_user_info[g].userid==a&&(d=!0),d=create_dropdown_user_item(gl_user_info[g].userid,gl_user_info[g].cname,d,f),b.appendChild(d)}
function create_dropdown_user_item(b,f,a,d){var g=document.createElement("li"),e=document.createElement("a");e.setAttribute("class","small");e.setAttribute("tabIndex","-1");e.setAttribute("data-value",b);e.setAttribute("href","javascript:;");e.setAttribute("onclick",'dropdown_user_click("'+d+'", "'+b+'");return true;');var c=document.createElement("input");c.setAttribute("type","checkbox");c.setAttribute("id","dropdown_checkbox_user_"+b);c.setAttribute("onclick",'dropdown_checkbox_user_click("'+d+
'", "'+b+'");return true;');c.checked=a;e.appendChild(c);e.appendChild(document.createTextNode(" "+f));g.appendChild(e);return g}var glDropdown_checkbox_user_click=!1;
function dropdown_user_click(b,f){console.log("dropdown_user_click() firedeventid:"+b+" userid:"+f);var a,d="";for(a=0;a<gl_user_info.length;a++)f==gl_user_info[a].userid?(d=gl_user_info[a].cname+"  ",document.getElementById("dropdown_checkbox_user_"+gl_user_info[a].userid).checked=!0):document.getElementById("dropdown_checkbox_user_"+gl_user_info[a].userid).checked=!1;a=document.getElementById("dropdown_cur_user_"+b);-1==f?(document.getElementById("dropdown_checkbox_user_-1").checked=!0,a.setAttribute("data-id",
"-1"),a.innerHTML='<span class="caret"></span>'):(a.setAttribute("data-id",f),a.innerHTML=d+'<span class="caret"></span>');console.log("dropdown_user_click() firedeventid:"+b+" -> userid:"+f);glDropdown_checkbox_user_click=!1}function dropdown_checkbox_user_click(b,f){glDropdown_checkbox_user_click=!0}function click_save_event(b){var f=$("#dropdown_cur_user_"+b).attr("data-id"),a=document.getElementById("comment_"+b).value;update_FiredEvents_user(b,f,a);gl_EditMode=!1;reload_events()}
function reload_events(){gl_allevents=[];gl_ui_firedEvents_offset=firedEvents_offset=0;showevents_firstload()}
function update_FiredEvents_user(b,f,a){var d={};d.project_id=""+project_id;d.UPDATE_FIREDEVENT_USER=1;d.ID=b;d.EMPID=f;d.COMMENT=a;jQuery.ajax({url:gl_target_server+"/php/eventfire.php",type:"POST",data:d,success:function(a){400==a.status&&alert("update Error! response = "+JSON.stringify(a))},error:function(a,b,c){alert("error = "+c);alert("xhr.responseText = "+a.responseText)}});return!1}
function findUserName(b){var f="";b=parseInt(b);for(var a=0;a<gl_user_info.length;a++)if(b==gl_user_info[a].userid){f=gl_user_info[a].cname;break}return f}
function convert_action_name(b){return"Enter"==b?"\u9032\u5165":"Leave"==b?"\u96e2\u958b":"Stay"==b?"\u505c\u7559":"Alert"==b?"\u6309\u4e0b\u8b66\u6025\u6309\u9215":"AlertTagNotMoving"==b?"\u7121\u52d5\u4f5c\u8b66\u544a":"AlertLayDown"==b?"\u8eba\u81e5\u8b66\u544a":"Cancel"==b||"cancel"==b?"\u6309\u4e0b\u53d6\u6d88\u6309\u9215":"Finish"==b?"\u5b8c\u6210":"Exceed"==b?"\u8d85\u904e\u5de1\u6aa2\u6642\u9593":"shorttime"==b?"\u5de1\u6aa2\u6642\u9593\u904e\u77ed":"longtime"==b?"\u5de1\u6aa2\u6642\u9593\u904e\u9577":
"CallOut"==b?"\u6309\u4e0b\u547c\u63db\u9215":"PowerOff"==b?"\u62d4\u9664\u96fb\u6e90":"PowerOn"==b?"\u63a5\u901a\u96fb\u6e90":"OpenDoor"==b?"\u958b\u9580":"CloseDoor"==b?"\u95dc\u9580":"iCoverOpenDoor"==b?"\u7570\u5e38\u79fb\u52d5":"iCoverCloseDoor"==b?"\u5b9a\u6642\u56de\u5831":"EnterDoor"==b?"\u9032\u5165\u958b\u9580\u5340\u57df":"ExitDoor"==b?"\u96e2\u958b\u958b\u9580\u5340\u57df":b}
function convert_IssueTime_name(b){return"Immediately"==b?"\u7acb\u523b":"1 minute"==b?"1\u5206\u9418":"5 minutes"==b?"5\u5206\u9418":"10 minutes"==b?"10\u5206\u9418":b}function showevents_firstload(){curURl=window.location.href;0<=curURl.indexOf("vilseventtimeline")&&document.getElementById("AjaxLoadMode").click()}
function fallbackCopyTextToClipboard(b,f){var a=document.createElement("textarea");a.value=b;a.style.top="0";a.style.left="0";a.style.position="fixed";document.body.appendChild(a);a.focus();a.select();var d=document.getElementById("cardid_copy_alert_"+b+"_"+f);try{var g=document.execCommand("copy");d.textContent=g?"\u5df2\u8907\u88fd":"\u7121\u6cd5\u8907\u88fd";setTimeout(clear_alert_msg,3E3,b,f);console.log("Fallback: Copying text command was "+(g?"successful":"unsuccessful"))}catch(e){console.error("Fallback: Oops, unable to copy",
e),d.textContent="\u7121\u6cd5\u8907\u88fd",setTimeout(clear_alert_msg,3E3,b,f)}document.body.removeChild(a)}
function copyTextToClipboard(b,f){if(navigator.clipboard){var a="cardid_copy_alert_"+b+"_"+f;navigator.clipboard.writeText(b).then(function(){console.log("Async: Copying to clipboard was successful!");document.getElementById(a).textContent="\u5df2\u8907\u88fd";setTimeout(clear_alert_msg,3E3,b,f)},function(a){console.error("Async: Could not copy text: ",a);alert_msg_ui.textContent="\u7121\u6cd5\u8907\u88fd";setTimeout(clear_alert_msg,3E3,b,f)})}else fallbackCopyTextToClipboard(b,f)}
function clear_alert_msg(b,f){document.getElementById("cardid_copy_alert_"+b+"_"+f).textContent=""}showevents_firstload();function open_eventtimeline_page(){window.open("/index.php/vilseventtimeline/"+project_id,"_blank").focus()};
