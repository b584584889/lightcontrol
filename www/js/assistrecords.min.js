var $jscomp={scope:{},findInternal:function(a,c,b){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(c.call(b,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,b,d){var e=this.length||0;0>b&&(b=Math.max(0,e+b));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(b=Number(b||0);b<d;b++)this[b]=a;return this}},"es6-impl","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6-impl","es3");
(function(a,c,b,d){var e=function(b,c){this.widget="";this.$element=a(b);this.defaultTime=c.defaultTime;this.disableFocus=c.disableFocus;this.isOpen=c.isOpen;this.minuteStep=c.minuteStep;this.modalBackdrop=c.modalBackdrop;this.secondStep=c.secondStep;this.showInputs=c.showInputs;this.showMeridian=c.showMeridian;this.showSeconds=c.showSeconds;this.template=c.template;this.appendWidgetTo=c.appendWidgetTo;this.upArrowStyle=c.upArrowStyle;this.downArrowStyle=c.downArrowStyle;this.containerClass=c.containerClass;
this._init()};e.prototype={constructor:e,_init:function(){var b=this;if(this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend")){if(this.$element.parent(".input-append, .input-prepend").find(".add-on").length)this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":a.proxy(this.showWidget,this)});else this.$element.closest(this.containerClass).find(".add-on").on({"click.timepicker":a.proxy(this.showWidget,this)});this.$element.on({"focus.timepicker":a.proxy(this.highlightUnit,
this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,this),"blur.timepicker":a.proxy(this.blurElement,this)})}else if(this.template)this.$element.on({"focus.timepicker":a.proxy(this.showWidget,this),"click.timepicker":a.proxy(this.showWidget,this),"blur.timepicker":a.proxy(this.blurElement,this)});else this.$element.on({"focus.timepicker":a.proxy(this.highlightUnit,this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,
this),"blur.timepicker":a.proxy(this.blurElement,this)});this.$widget=!1!==this.template?a(this.getTemplate()).prependTo(this.$element.parents(this.appendWidgetTo)).on("click",a.proxy(this.widgetClick,this)):!1;this.showInputs&&!1!==this.$widget&&this.$widget.find("input").each(function(){a(this).on({"click.timepicker":function(){a(this).select()},"keydown.timepicker":a.proxy(b.widgetKeydown,b)})});this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=d;this.updateFromElementVal()},
decrementHour:function(){if(this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else 0===this.hour?this.hour=23:this.hour--;this.update()},decrementMinute:function(a){a=a?this.minute-a:this.minute-this.minuteStep;0>a?(this.decrementHour(),this.minute=a+60):this.minute=a;this.update()},decrementSecond:function(){var a=this.second-this.secondStep;0>a?(this.decrementMinute(!0),
this.second=a+60):this.second=a;this.update()},elementKeydown:function(a){switch(a.keyCode){case 9:this.updateFromElementVal();switch(this.highlightedUnit){case "hour":a.preventDefault();this.highlightNextUnit();break;case "minute":if(this.showMeridian||this.showSeconds)a.preventDefault(),this.highlightNextUnit();break;case "second":this.showMeridian&&(a.preventDefault(),this.highlightNextUnit())}break;case 27:this.updateFromElementVal();break;case 37:a.preventDefault();this.highlightPrevUnit();this.updateFromElementVal();
break;case 38:a.preventDefault();switch(this.highlightedUnit){case "hour":this.incrementHour();this.highlightHour();break;case "minute":this.incrementMinute();this.highlightMinute();break;case "second":this.incrementSecond();this.highlightSecond();break;case "meridian":this.toggleMeridian(),this.highlightMeridian()}break;case 39:a.preventDefault();this.updateFromElementVal();this.highlightNextUnit();break;case 40:switch(a.preventDefault(),this.highlightedUnit){case "hour":this.decrementHour();this.highlightHour();
break;case "minute":this.decrementMinute();this.highlightMinute();break;case "second":this.decrementSecond();this.highlightSecond();break;case "meridian":this.toggleMeridian(),this.highlightMeridian()}}},formatTime:function(a,b,c,d){return(10>a?"0"+a:a)+":"+(10>b?"0"+b:b)+(this.showSeconds?":"+(10>c?"0"+c:c):"")+(this.showMeridian?" "+d:"")},getCursorPosition:function(){var a=this.$element.get(0);if("selectionStart"in a)return a.selectionStart;if(b.selection){a.focus();var c=b.selection.createRange(),
d=b.selection.createRange().text.length;c.moveStart("character",-a.value.length);return c.text.length-d}},getTemplate:function(){var a,b,c,d,e;this.showInputs?(b='<input type="text" name="hour" class="bootstrap-timepicker-hour form-control" maxlength="2"/>',c='<input type="text" name="minute" class="bootstrap-timepicker-minute form-control" maxlength="2"/>',d='<input type="text" name="second" class="bootstrap-timepicker-second form-control" maxlength="2"/>',e='<input type="text" name="meridian" class="bootstrap-timepicker-meridian form-control" maxlength="2"/>'):
(b='<span class="bootstrap-timepicker-hour"></span>',c='<span class="bootstrap-timepicker-minute"></span>',d='<span class="bootstrap-timepicker-second"></span>',e='<span class="bootstrap-timepicker-meridian"></span>');b='<table><tr><td><a href="#" data-action="incrementHour"><i class="'+this.upArrowStyle+'"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="'+this.upArrowStyle+'"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="'+
this.upArrowStyle+'"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="'+this.upArrowStyle+'"></i></a></td>':"")+"</tr><tr><td>"+b+'</td> <td class="separator">:</td><td>'+c+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+d+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+e+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="'+this.downArrowStyle+
'"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="'+this.downArrowStyle+'"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="'+this.downArrowStyle+'"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="'+this.downArrowStyle+'"></i></a></td>':"")+"</tr></table>";switch(this.template){case "modal":a='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+
(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">\u00d7</a><h3>Pick a Time</h3></div><div class="modal-content">'+b+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case "dropdown":a='<div class="bootstrap-timepicker-widget dropdown-menu">'+b+"</div>"}return a},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},hideWidget:function(){!1!==
this.isOpen&&(this.showInputs&&this.updateFromWidgetInputs(),this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template&&this.$widget.modal?this.$widget.modal("hide"):this.$widget.removeClass("open"),a(b).off("mousedown.timepicker"),this.isOpen=!1)},highlightUnit:function(){this.position=this.getCursorPosition();0<=this.position&&2>=this.position?this.highlightHour():3<=this.position&&
5>=this.position?this.highlightMinute():6<=this.position&&8>=this.position?this.showSeconds?this.highlightSecond():this.highlightMeridian():9<=this.position&&11>=this.position&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case "hour":this.highlightMinute();break;case "minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case "second":this.showMeridian?this.highlightMeridian():this.highlightHour();
break;case "meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case "hour":this.highlightMeridian();break;case "minute":this.highlightHour();break;case "second":this.highlightMinute();break;case "meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var a=this.$element.get(0);this.highlightedUnit="hour";a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(0,2)},0)},highlightMinute:function(){var a=this.$element.get(0);
this.highlightedUnit="minute";a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(3,5)},0)},highlightSecond:function(){var a=this.$element.get(0);this.highlightedUnit="second";a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(6,8)},0)},highlightMeridian:function(){var a=this.$element.get(0);this.highlightedUnit="meridian";a.setSelectionRange&&(this.showSeconds?setTimeout(function(){a.setSelectionRange(9,11)},0):setTimeout(function(){a.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(11===
this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}23===this.hour?this.hour=0:(this.hour++,this.update())},incrementMinute:function(a){a=a?this.minute+a:this.minute+this.minuteStep-this.minute%this.minuteStep;59<a?(this.incrementHour(),this.minute=a-60):this.minute=a;this.update()},incrementSecond:function(){var a=this.second+this.secondStep-this.second%this.secondStep;59<a?(this.incrementMinute(!0),this.second=a-60):this.second=a;this.update()},remove:function(){a("document").off(".timepicker");
this.$widget&&this.$widget.remove();delete this.$element.data().timepicker},setDefaultTime:function(a){if(this.$element.val())this.updateFromElementVal();else if("current"===a){var b=new Date;a=b.getHours();var c=Math.floor(b.getMinutes()/this.minuteStep)*this.minuteStep,b=Math.floor(b.getSeconds()/this.secondStep)*this.secondStep,d="AM";this.showMeridian&&(0===a?a=12:12<=a?(12<a&&(a-=12),d="PM"):d="AM");this.hour=a;this.minute=c;this.second=b;this.meridian=d;this.update()}else!1===a?(this.second=
this.minute=this.hour=0,this.meridian="AM"):this.setTime(a)},setTime:function(a){var b;this.showMeridian?(a=a.split(" "),b=a[0].split(":"),this.meridian=a[1]):b=a.split(":");this.hour=parseInt(b[0],10);this.minute=parseInt(b[1],10);this.second=parseInt(b[2],10);isNaN(this.hour)&&(this.hour=0);isNaN(this.minute)&&(this.minute=0);if(this.showMeridian){12<this.hour?this.hour=12:1>this.hour&&(this.hour=12);if("am"===this.meridian||"a"===this.meridian)this.meridian="AM";else if("pm"===this.meridian||"p"===
this.meridian)this.meridian="PM";"AM"!==this.meridian&&"PM"!==this.meridian&&(this.meridian="AM")}else 24<=this.hour?this.hour=23:0>this.hour&&(this.hour=0);0>this.minute?this.minute=0:60<=this.minute&&(this.minute=59);this.showSeconds&&(isNaN(this.second)?this.second=0:0>this.second?this.second=0:60<=this.second&&(this.second=59));this.update()},showWidget:function(){if(!this.isOpen&&!this.$element.is(":disabled")){var c=this;a(b).on("mousedown.timepicker",function(b){0===a(b.target).closest(".bootstrap-timepicker-widget").length&&
c.hideWidget()});this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});this.disableFocus&&this.$element.blur();this.updateFromElementVal();if("modal"===this.template&&this.$widget.modal)this.$widget.modal("show").on("hidden",a.proxy(this.hideWidget,this));else!1===this.isOpen&&this.$widget.addClass("open");this.isOpen=!0}},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM";this.update()},
update:function(){this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});this.updateElement();this.updateWidget()},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){var a=this.$element.val();a&&this.setTime(a)},updateWidget:function(){if(!1!==this.$widget){var a=10>this.hour?"0"+this.hour:this.hour,b=10>this.minute?"0"+this.minute:this.minute,
c=10>this.second?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(a),this.$widget.find("input.bootstrap-timepicker-minute").val(b),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(c),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(a),this.$widget.find("span.bootstrap-timepicker-minute").text(b),this.showSeconds&&
this.$widget.find("span.bootstrap-timepicker-second").text(c),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(!1!==this.$widget){var b=a("input.bootstrap-timepicker-hour",this.$widget).val()+":"+a("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+a("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+a("input.bootstrap-timepicker-meridian",this.$widget).val():
"");this.setTime(b)}},widgetClick:function(b){b.stopPropagation();b.preventDefault();if(b=a(b.target).closest("a").data("action"))this[b]()},widgetKeydown:function(b){var c=a(b.target).closest("input").attr("name");switch(b.keyCode){case 9:if(this.showMeridian){if("meridian"===c)return this.hideWidget()}else if(this.showSeconds){if("second"===c)return this.hideWidget()}else if("minute"===c)return this.hideWidget();this.updateFromWidgetInputs();break;case 27:this.hideWidget();break;case 38:b.preventDefault();
switch(c){case "hour":this.incrementHour();break;case "minute":this.incrementMinute();break;case "second":this.incrementSecond();break;case "meridian":this.toggleMeridian()}break;case 40:switch(b.preventDefault(),c){case "hour":this.decrementHour();break;case "minute":this.decrementMinute();break;case "second":this.decrementSecond();break;case "meridian":this.toggleMeridian()}}}};a.fn.timepicker=function(b){var c=Array.apply(null,arguments);c.shift();return this.each(function(){var d=a(this),x=d.data("timepicker"),
p="object"===typeof b&&b;x||d.data("timepicker",x=new e(this,a.extend({},a.fn.timepicker.defaults,p,a(this).data())));"string"===typeof b&&x[b].apply(x,c)})};a.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,secondStep:15,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:".bootstrap-timepicker",upArrowStyle:"glyphicon glyphicon-chevron-up",downArrowStyle:"glyphicon glyphicon-chevron-down",containerClass:"bootstrap-timepicker"};
a.fn.timepicker.Constructor=e})(jQuery,window,document);(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a,c){function b(){return new Date(Date.UTC.apply(Date,arguments))}function d(){var a=new Date;return b(a.getFullYear(),a.getMonth(),a.getDate())}function e(a,b){return a.getUTCFullYear()===b.getUTCFullYear()&&a.getUTCMonth()===b.getUTCMonth()&&a.getUTCDate()===b.getUTCDate()}function f(b,h){return function(){h!==c&&a.fn.datepicker.deprecated(h);return this[b].apply(this,
arguments)}}function g(b,c){function d(a,b){return b.toLowerCase()}var e=a(b).data(),f={},g,v=new RegExp("^"+c.toLowerCase()+"([A-Z])");c=new RegExp("^"+c.toLowerCase());for(var q in e)c.test(q)&&(g=q.replace(v,d),f[g]=e[q]);return f}function u(b){var c={};if(!r[b]&&(b=b.split("-")[0],!r[b]))return;var d=r[b];a.each(D,function(a,b){b in d&&(c[b]=d[b])});return c}var x=function(){var b={get:function(a){return this.slice(a)[0]},contains:function(a){a=a&&a.valueOf();for(var b=0,c=this.length;b<c;b++)if(0<=
this[b].valueOf()-a&&864E5>this[b].valueOf()-a)return b;return-1},remove:function(a){this.splice(a,1)},replace:function(b){b&&(a.isArray(b)||(b=[b]),this.clear(),this.push.apply(this,b))},clear:function(){this.length=0},copy:function(){var a=new x;a.replace(this);return a}};return function(){var c=[];c.push.apply(c,arguments);a.extend(c,b);return c}}(),p=function(b,c){a.data(b,"datepicker",this);this._process_options(c);this.dates=new x;this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=
a(b);this.inputField=(this.isInput=this.element.is("input"))?this.element:this.element.find("input");(this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1)&&0===this.component.length&&(this.component=!1);this.isInline=!this.component&&this.element.is("div");this.picker=a(k.template);this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow);this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow);
this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(a,b){return Number(b)+1});this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,
daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled});this._allow_update=!1;this.setViewMode(this.o.startView);this._allow_update=!0;this.fillDow();this.fillMonths();this.update();this.isInline&&this.show()};p.prototype={constructor:p,_resolveViewName:function(b){a.each(k.viewModes,function(c,d){if(b===c||-1!==a.inArray(b,d.names))return b=c,!1});return b},_resolveDaysOfWeek:function(b){a.isArray(b)||(b=b.split(/[,\s]*/));return a.map(b,Number)},_check_template:function(b){try{return b===
c||""===b?!1:0>=(b.match(/[<>]/g)||[]).length?!0:0<a(b).length}catch(h){return!1}},_process_options:function(c){this._o=a.extend({},this._o,c);var h=this.o=a.extend({},this._o);c=h.language;r[c]||(c=c.split("-")[0],r[c]||(c=B.language));h.language=c;h.startView=this._resolveViewName(h.startView);h.minViewMode=this._resolveViewName(h.minViewMode);h.maxViewMode=this._resolveViewName(h.maxViewMode);h.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,h.startView));!0!==h.multidate&&(h.multidate=
Number(h.multidate)||!1,!1!==h.multidate&&(h.multidate=Math.max(0,h.multidate)));h.multidateSeparator=String(h.multidateSeparator);h.weekStart%=7;h.weekEnd=(h.weekStart+6)%7;var e=k.parseFormat(h.format);-Infinity!==h.startDate&&(h.startDate=h.startDate?h.startDate instanceof Date?this._local_to_utc(this._zero_time(h.startDate)):k.parseDate(h.startDate,e,h.language,h.assumeNearbyYear):-Infinity);Infinity!==h.endDate&&(h.endDate=h.endDate?h.endDate instanceof Date?this._local_to_utc(this._zero_time(h.endDate)):
k.parseDate(h.endDate,e,h.language,h.assumeNearbyYear):Infinity);h.daysOfWeekDisabled=this._resolveDaysOfWeek(h.daysOfWeekDisabled||[]);h.daysOfWeekHighlighted=this._resolveDaysOfWeek(h.daysOfWeekHighlighted||[]);h.datesDisabled=h.datesDisabled||[];a.isArray(h.datesDisabled)||(h.datesDisabled=h.datesDisabled.split(","));h.datesDisabled=a.map(h.datesDisabled,function(a){return k.parseDate(a,e,h.language,h.assumeNearbyYear)});c=String(h.orientation).toLowerCase().split(/\s+/g);var f=h.orientation.toLowerCase();
c=a.grep(c,function(a){return/^auto|left|right|top|bottom$/.test(a)});h.orientation={x:"auto",y:"auto"};if(f&&"auto"!==f)if(1===c.length)switch(c[0]){case "top":case "bottom":h.orientation.y=c[0];break;case "left":case "right":h.orientation.x=c[0]}else f=a.grep(c,function(a){return/^left|right$/.test(a)}),h.orientation.x=f[0]||"auto",f=a.grep(c,function(a){return/^top|bottom$/.test(a)}),h.orientation.y=f[0]||"auto";h.defaultViewDate instanceof Date||"string"===typeof h.defaultViewDate?h.defaultViewDate=
k.parseDate(h.defaultViewDate,e,h.language,h.assumeNearbyYear):h.defaultViewDate?(c=h.defaultViewDate.year||(new Date).getFullYear(),h.defaultViewDate=b(c,h.defaultViewDate.month||0,h.defaultViewDate.day||1)):h.defaultViewDate=d()},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var b=0,d,e,f;b<a.length;b++)d=a[b][0],2===a[b].length?(e=c,f=a[b][1]):3===a[b].length&&(e=a[b][1],f=a[b][2]),d.on(f,e)},_unapplyEvents:function(a){for(var b=0,d,e,f;b<a.length;b++)d=a[b][0],2===a[b].length?(f=
c,e=a[b][1]):3===a[b].length&&(f=a[b][1],e=a[b][2]),d.off(e,f)},_buildEvents:function(){var b={keyup:a.proxy(function(b){-1===a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this),paste:a.proxy(this.paste,this)};!0===this.o.showOnFocus&&(b.focus=a.proxy(this.show,this));this._events=this.isInput?[[this.element,b]]:this.component&&this.inputField.length?[[this.inputField,b],[this.component,{click:a.proxy(this.show,this)}]]:[[this.element,{click:a.proxy(this.show,
this),keydown:a.proxy(this.keydown,this)}]];this._events.push([this.element,"*",{blur:a.proxy(function(a){this._focused_from=a.target},this)}],[this.element,{blur:a.proxy(function(a){this._focused_from=a.target},this)}]);this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":a.proxy(function(a){this.update(a.date)},this)}]);this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[this.picker,".prev, .next",{click:a.proxy(this.navArrowsClick,this)}],[this.picker,
".day:not(.disabled)",{click:a.proxy(this.dayCellClick,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{"mousedown touchstart":a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).length||this.picker.is(a.target)||this.picker.find(a.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();
this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.dates.get(-1),d=this._utc_to_local(d);this.element.trigger({applyid:this.applyid,type:b,date:d,viewMode:this.viewMode,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(a,b){0===arguments.length?(a=this.dates.length-1,b=this.o.format):"string"===typeof a&&(b=a,a=this.dates.length-1);b=b||this.o.format;var c=this.dates.get(a);return k.formatDate(c,
b,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&a(this.element).blur(),this},hide:function(){if(this.isInline||!this.picker.is(":visible"))return this;this.focusDate=
null;this.picker.hide().detach();this._detachSecondaryEvents();this.setViewMode(this.o.startView);this.o.forceParse&&this.inputField.val()&&this.setValue();this._trigger("hide");return this},destroy:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date;return this},paste:function(b){var c;if(b.originalEvent.clipboardData&&b.originalEvent.clipboardData.types&&-1!==a.inArray("text/plain",
b.originalEvent.clipboardData.types))c=b.originalEvent.clipboardData.getData("text/plain");else if(window.clipboardData)c=window.clipboardData.getData("Text");else return;this.setDate(c);this.update();b.preventDefault()},_utc_to_local:function(a){if(!a)return a;var b=new Date(a.getTime()+6E4*a.getTimezoneOffset());b.getTimezoneOffset()!==a.getTimezoneOffset()&&(b=new Date(a.getTime()+6E4*b.getTimezoneOffset()));return b},_local_to_utc:function(a){return a&&new Date(a.getTime()-6E4*a.getTimezoneOffset())},
_zero_time:function(a){return a&&new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return a&&b(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate())},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(a){return new Date(a)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var a=this.dates.get(-1);return a!==c?new Date(a):null},clearDates:function(){this.inputField.val("");
this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()},setDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,b);this._trigger("changeDate");this.setValue();return this},setUTCDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.setDates.apply(this,a.map(b,this._utc_to_local));return this},setDate:f("setDates"),setUTCDate:f("setUTCDates"),remove:f("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),
setValue:function(){var a=this.getFormattedDate();this.inputField.val(a);return this},getFormattedDate:function(b){b===c&&(b=this.o.format);var d=this.o.language;return a.map(this.dates,function(a){return k.formatDate(a,b,d)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(a){this._process_options({startDate:a});this.update();this.updateNavArrows();return this},getEndDate:function(){return this.o.endDate},setEndDate:function(a){this._process_options({endDate:a});
this.update();this.updateNavArrows();return this},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a});this.update();return this},setDaysOfWeekHighlighted:function(a){this._process_options({daysOfWeekHighlighted:a});this.update();return this},setDatesDisabled:function(a){this._process_options({datesDisabled:a});this.update();return this},place:function(){if(this.isInline)return this;var b=this.picker.outerWidth(),c=this.picker.outerHeight(),d=a(this.o.container),e=d.width(),
f="body"===this.o.container?a(document).scrollTop():d.scrollTop(),g=d.offset(),v=[0];this.element.parents().each(function(){var b=a(this).css("z-index");"auto"!==b&&0!==Number(b)&&v.push(Number(b))});var d=Math.max.apply(Math,v)+this.o.zIndexOffset,q=this.component?this.component.parent().offset():this.element.offset(),n=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),m=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),k=q.left-g.left,g=q.top-g.top;
"body"!==this.o.container&&(g+=f);this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(k-=b-m)):0>q.left?(this.picker.addClass("datepicker-orient-left"),k-=q.left-10):k+b>e?(this.picker.addClass("datepicker-orient-right"),k+=m-b):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");
b=this.o.orientation.y;"auto"===b&&(b=0>-f+g-c?"bottom":"top");this.picker.addClass("datepicker-orient-"+b);g="top"===b?g-(c+parseInt(this.picker.css("padding-top"))):g+n;this.o.rtl?this.picker.css({top:g,right:e-(k+m),zIndex:d}):this.picker.css({top:g,left:k,zIndex:d});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var b=this.dates.copy(),c=[],d=!1;arguments.length?(a.each(arguments,a.proxy(function(a,b){b instanceof Date&&(b=this._local_to_utc(b));c.push(b)},
this)),d=!0):(c=(c=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?c.split(this.o.multidateSeparator):[c],delete this.element.data().date);c=a.map(c,a.proxy(function(a){return k.parseDate(a,this.o.format,this.o.language,this.o.assumeNearbyYear)},this));c=a.grep(c,a.proxy(function(a){return!this.dateWithinRange(a)||!a},this),!0);this.dates.replace(c);this.o.updateViewDate&&(this.viewDate=this.dates.length?new Date(this.dates.get(-1)):this.viewDate<
this.o.startDate?new Date(this.o.startDate):this.viewDate>this.o.endDate?new Date(this.o.endDate):this.o.defaultViewDate);d?(this.setValue(),this.element.change()):this.dates.length&&String(b)!==String(this.dates)&&d&&(this._trigger("changeDate"),this.element.change());!this.dates.length&&b.length&&(this._trigger("clearDate"),this.element.change());this.fill();return this},fillDow:function(){if(this.o.showWeekDays){var b=this.o.weekStart,c="<tr>";for(this.o.calendarWeeks&&(c+='<th class="cw">&#160;</th>');b<
this.o.weekStart+7;)c+='<th class="dow',-1!==a.inArray(b,this.o.daysOfWeekDisabled)&&(c+=" disabled"),c+='">'+r[this.o.language].daysMin[b++%7]+"</th>";c+="</tr>";this.picker.find(".datepicker-days thead").append(c)}},fillMonths:function(){for(var a=this._utc_to_local(this.viewDate),b="",c,d=0;12>d;d++)c=a&&a.getMonth()===d?" focused":"",b+='<span class="month'+c+'">'+r[this.o.language].monthsShort[d]+"</span>";this.picker.find(".datepicker-months td").html(b)},setRange:function(b){b&&b.length?this.range=
a.map(b,function(a){return a.valueOf()}):delete this.range;this.fill()},getClassNames:function(b){var c=[],f=this.viewDate.getUTCFullYear(),g=this.viewDate.getUTCMonth(),C=d();b.getUTCFullYear()<f||b.getUTCFullYear()===f&&b.getUTCMonth()<g?c.push("old"):(b.getUTCFullYear()>f||b.getUTCFullYear()===f&&b.getUTCMonth()>g)&&c.push("new");this.focusDate&&b.valueOf()===this.focusDate.valueOf()&&c.push("focused");this.o.todayHighlight&&e(b,C)&&c.push("today");-1!==this.dates.contains(b)&&c.push("active");
this.dateWithinRange(b)||c.push("disabled");this.dateIsDisabled(b)&&c.push("disabled","disabled-date");-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekHighlighted)&&c.push("highlighted");this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&c.push("range"),-1!==a.inArray(b.valueOf(),this.range)&&c.push("selected"),b.valueOf()===this.range[0]&&c.push("range-start"),b.valueOf()===this.range[this.range.length-1]&&c.push("range-end"));return c},_fill_yearsView:function(b,d,e,f,g,k,v){var q="",
n=e/10;b=this.picker.find(b);e*=Math.floor(f/e);f=e+9*n;for(var m=Math.floor(this.viewDate.getFullYear()/n)*n,p=a.map(this.dates,function(a){return Math.floor(a.getUTCFullYear()/n)*n}),l,r,t,w=e-n;w<=f+n;w+=n)l=[d],r=null,w===e-n?l.push("old"):w===f+n&&l.push("new"),-1!==a.inArray(w,p)&&l.push("active"),(w<g||w>k)&&l.push("disabled"),w===m&&l.push("focused"),v!==a.noop&&(t=v(new Date(w,0,1)),t===c?t={}:"boolean"===typeof t?t={enabled:t}:"string"===typeof t&&(t={classes:t}),!1===t.enabled&&l.push("disabled"),
t.classes&&(l=l.concat(t.classes.split(/\s+/))),t.tooltip&&(r=t.tooltip)),q+='<span class="'+l.join(" ")+'"'+(r?' title="'+r+'"':"")+">"+w+"</span>";b.find(".datepicker-switch").text(e+"-"+f);b.find("td").html(q)},fill:function(){var d=new Date(this.viewDate),e=d.getUTCFullYear(),f=d.getUTCMonth(),g=-Infinity!==this.o.startDate?this.o.startDate.getUTCFullYear():-Infinity,C=-Infinity!==this.o.startDate?this.o.startDate.getUTCMonth():-Infinity,A=Infinity!==this.o.endDate?this.o.endDate.getUTCFullYear():
Infinity,v=Infinity!==this.o.endDate?this.o.endDate.getUTCMonth():Infinity,q=r[this.o.language].today||r.en.today||"",n=r[this.o.language].clear||r.en.clear||"",m=r[this.o.language].titleFormat||r.en.titleFormat,p,l;if(!isNaN(e)&&!isNaN(f)){this.picker.find(".datepicker-days .datepicker-switch").text(k.formatDate(d,m,this.o.language));this.picker.find("tfoot .today").text(q).css("display",!0===this.o.todayBtn||"linked"===this.o.todayBtn?"table-cell":"none");this.picker.find("tfoot .clear").text(n).css("display",
!0===this.o.clearBtn?"table-cell":"none");this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"===typeof this.o.title&&""!==this.o.title?"table-cell":"none");this.updateNavArrows();this.fillMonths();d=b(e,f,0);f=d.getUTCDate();d.setUTCDate(f-(d.getUTCDay()-this.o.weekStart+7)%7);f=new Date(d);100>d.getUTCFullYear()&&f.setUTCFullYear(d.getUTCFullYear());f.setUTCDate(f.getUTCDate()+42);f=f.valueOf();for(q=[];d.valueOf()<f;){n=d.getUTCDay();if(n===this.o.weekStart&&(q.push("<tr>"),
this.o.calendarWeeks)){var m=new Date(+d+(this.o.weekStart-n-7)%7*864E5),m=new Date(Number(m)+(11-m.getUTCDay())%7*864E5),u=new Date(Number(u=b(m.getUTCFullYear(),0,1))+(11-u.getUTCDay())%7*864E5);q.push('<td class="cw">'+((m-u)/864E5/7+1)+"</td>")}m=this.getClassNames(d);m.push("day");var t=d.getUTCDate();this.o.beforeShowDay!==a.noop&&(l=this.o.beforeShowDay(this._utc_to_local(d),this.o.applyid),l===c?l={}:"boolean"===typeof l?l={enabled:l}:"string"===typeof l&&(l={classes:l}),!1===l.enabled&&m.push("disabled"),
l.classes&&(m=m.concat(l.classes.split(/\s+/))),l.tooltip&&(p=l.tooltip),l.content&&(t=l.content));m=a.isFunction(a.uniqueSort)?a.uniqueSort(m):a.unique(m);l=m.indexOf("noactive");0<=l&&(m.splice(l,1),l=m.indexOf("active"),0<=l&&m.splice(l,1));q.push('<td class="'+m.join(" ")+'"'+(p?' title="'+p+'"':"")+' data-date="'+d.getTime().toString()+'">'+t+"</td>");p=null;n===this.o.weekEnd&&q.push("</tr>");d.setUTCDate(d.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(q.join(""));p=r[this.o.language].monthsTitle||
r.en.monthsTitle||"Months";var w=this.picker.find(".datepicker-months").find(".datepicker-switch").text(2>this.o.maxViewMode?p:e).end().find("tbody span").removeClass("active");a.each(this.dates,function(a,b){b.getUTCFullYear()===e&&w.eq(b.getUTCMonth()).addClass("active")});(e<g||e>A)&&w.addClass("disabled");e===g&&w.slice(0,C).addClass("disabled");e===A&&w.slice(v+1).addClass("disabled");if(this.o.beforeShowMonth!==a.noop){var E=this;a.each(w,function(b,d){var f=E.o.beforeShowMonth(new Date(e,b,
1));f===c?f={}:"boolean"===typeof f?f={enabled:f}:"string"===typeof f&&(f={classes:f});!1!==f.enabled||a(d).hasClass("disabled")||a(d).addClass("disabled");f.classes&&a(d).addClass(f.classes);f.tooltip&&a(d).prop("title",f.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,e,g,A,this.o.beforeShowYear);this._fill_yearsView(".datepicker-decades","decade",100,e,g,A,this.o.beforeShowDecade);this._fill_yearsView(".datepicker-centuries","century",1E3,e,g,A,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var a=
new Date(this.viewDate),b=a.getUTCFullYear(),a=a.getUTCMonth(),c=-Infinity!==this.o.startDate?this.o.startDate.getUTCFullYear():-Infinity,d=-Infinity!==this.o.startDate?this.o.startDate.getUTCMonth():-Infinity,e=Infinity!==this.o.endDate?this.o.endDate.getUTCFullYear():Infinity,f=Infinity!==this.o.endDate?this.o.endDate.getUTCMonth():Infinity,g,k,n=1;switch(this.viewMode){case 0:g=b<=c&&a<=d;k=b>=e&&a>=f;break;case 4:n*=10;case 3:n*=10;case 2:n*=10;case 1:g=Math.floor(b/n)*n<=c,k=Math.floor(b/n)*
n+n>=e}this.picker.find(".prev").toggleClass("disabled",g);this.picker.find(".next").toggleClass("disabled",k)}},click:function(c){c.preventDefault();c.stopPropagation();var e;e=a(c.target);e.hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1);e.hasClass("today")&&!e.hasClass("day")&&(this.setViewMode(0),this._setDate(d(),"linked"===this.o.todayBtn?null:"view"));e.hasClass("clear")&&this.clearDates();!e.hasClass("disabled")&&(e.hasClass("month")||e.hasClass("year")||
e.hasClass("decade")||e.hasClass("century"))&&(this.viewDate.setUTCDate(1),1===this.viewMode?(c=e.parent().find("span").index(e),e=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(c)):(c=0,e=Number(e.text()),this.viewDate.setUTCFullYear(e)),this._trigger(k.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(b(e,c,1)):(this.setViewMode(this.viewMode-1),this.fill()));this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus();delete this._focused_from},
dayCellClick:function(b){b=a(b.currentTarget).data("date");b=new Date(b);this.o.updateViewDate&&(b.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),b.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate));this._setDate(b)},navArrowsClick:function(b){b=a(b.currentTarget).hasClass("prev")?-1:1;0!==this.viewMode&&(b*=12*k.viewModes[this.viewMode].navStep);this.viewDate=this.moveMonth(this.viewDate,b);this._trigger(k.viewModes[this.viewMode].e,
this.viewDate);this.fill()},_toggle_multidate:function(a){var b=this.dates.contains(a);a||this.dates.clear();-1!==b?(!0===this.o.multidate||1<this.o.multidate||this.o.toggleActive)&&this.dates.remove(b):(!1===this.o.multidate&&this.dates.clear(),this.dates.push(a));if("number"===typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(a,b){b&&"date"!==b||this._toggle_multidate(a&&new Date(a));if(!b&&this.o.updateViewDate||"view"===b)this.viewDate=a&&
new Date(a);this.fill();this.setValue();b&&"view"===b||(this.applyid=this.o.applyid,this._trigger("changeDate"));this.inputField.trigger("change");!this.o.autoclose||b&&"date"!==b||this.hide()},moveDay:function(a,b){var c=new Date(a);c.setUTCDate(a.getUTCDate()+b);return c},moveWeek:function(a,b){return this.moveDay(a,7*b)},moveMonth:function(a,b){if(!a||isNaN(a.getTime()))return this.o.defaultViewDate;if(!b)return a;var c=new Date(a.valueOf()),d=c.getUTCDate(),e=c.getUTCMonth(),f=Math.abs(b),g;b=
0<b?1:-1;if(1===f)f=-1===b?function(){return c.getUTCMonth()===e}:function(){return c.getUTCMonth()!==g},g=e+b,c.setUTCMonth(g),g=(g+12)%12;else{for(var k=0;k<f;k++)c=this.moveMonth(c,b);g=c.getUTCMonth();c.setUTCDate(d);f=function(){return g!==c.getUTCMonth()}}for(;f();)c.setUTCDate(--d),c.setUTCMonth(g);return c},moveYear:function(a,b){return this.moveMonth(a,12*b)},moveAvailableDate:function(a,b,c){do{a=this[c](a,b);if(!this.dateWithinRange(a))return!1;c="moveDay"}while(this.dateIsDisabled(a));
return a},weekOfDateIsDisabled:function(b){return-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(b){return this.weekOfDateIsDisabled(b)||0<a.grep(this.o.datesDisabled,function(a){return e(b,a)}).length},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":visible")){var b=!1,c,d,e=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||
this.viewDate,this.fill()):this.hide();a.preventDefault();a.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;c=37===a.keyCode||38===a.keyCode?-1:1;if(0===this.viewMode)a.ctrlKey?(d=this.moveAvailableDate(e,c,"moveYear"))&&this._trigger("changeYear",this.viewDate):a.shiftKey?(d=this.moveAvailableDate(e,c,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===a.keyCode||39===a.keyCode?d=this.moveAvailableDate(e,
c,"moveDay"):this.weekOfDateIsDisabled(e)||(d=this.moveAvailableDate(e,c,"moveWeek"));else if(1===this.viewMode){if(38===a.keyCode||40===a.keyCode)c*=4;d=this.moveAvailableDate(e,c,"moveMonth")}else if(2===this.viewMode){if(38===a.keyCode||40===a.keyCode)c*=4;d=this.moveAvailableDate(e,c,"moveYear")}d&&(this.focusDate=this.viewDate=d,this.setValue(),this.fill(),a.preventDefault());break;case 13:if(!this.o.forceParse)break;e=this.focusDate||this.dates.get(-1)||this.viewDate;this.o.keyboardNavigation&&
(this._toggle_multidate(e),b=!0);this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(a.preventDefault(),a.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}b&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))}else if(40===a.keyCode||27===a.keyCode)this.show(),a.stopPropagation()},
setViewMode:function(a){this.viewMode=a;this.picker.children("div").hide().filter(".datepicker-"+k.viewModes[this.viewMode].clsName).show();this.updateNavArrows();this._trigger("changeViewMode",new Date(this.viewDate))}};var z=function(b,c){a.data(b,"datepicker",this);this.element=a(b);this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a});delete c.inputs;this.keepEmptyValues=c.keepEmptyValues;delete c.keepEmptyValues;y.call(a(this.inputs),c).on("changeDate",a.proxy(this.dateUpdated,this));
this.pickers=a.map(this.inputs,function(b){return a.data(b,"datepicker")});this.updateDates()};z.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.getUTCDate()});this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){if(!this.updating){this.updating=!0;var d=a.data(b.target,"datepicker");if(d!==c){var e=d.getUTCDate(),f=this.keepEmptyValues;b=
a.inArray(b.target,this.inputs);var g=b-1,k=b+1,p=this.inputs.length;if(-1!==b){a.each(this.pickers,function(a,b){b.getUTCDate()||b!==d&&f||b.setUTCDate(e)});if(e<this.dates[g])for(;0<=g&&e<this.dates[g];)this.pickers[g--].setUTCDate(e);else if(e>this.dates[k])for(;k<p&&e>this.dates[k];)this.pickers[k++].setUTCDate(e);this.updateDates();delete this.updating}}}},destroy:function(){a.map(this.pickers,function(a){a.destroy()});a(this.inputs).off("changeDate",this.dateUpdated);delete this.element.data().datepicker},
remove:f("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var F=a.fn.datepicker,y=function(b){var d=Array.apply(null,arguments);d.shift();var e;this.each(function(){var c=a(this),f=c.data("datepicker"),k="object"===typeof b&&b;if(!f){var f=g(this,"date"),r=a.extend({},B,f,k),r=u(r.language),k=a.extend({},B,r,f,k);c.hasClass("input-daterange")||k.inputs?(a.extend(k,{inputs:k.inputs||c.find("input").toArray()}),f=new z(this,k)):f=new p(this,k);c.data("datepicker",
f)}"string"===typeof b&&"function"===typeof f[b]&&(e=f[b].apply(f,d))});if(e===c||e instanceof p||e instanceof z)return this;if(1<this.length)throw Error("Using only allowed for the collection of a single element ("+b+" function)");return e};a.fn.datepicker=y;var B=a.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:a.noop,beforeShowMonth:a.noop,beforeShowYear:a.noop,beforeShowDecade:a.noop,beforeShowCentury:a.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],
daysOfWeekHighlighted:[],datesDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},
showWeekDays:!0,applyid:"__id__"},D=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=p;var r=a.fn.datepicker.dates={en:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),daysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),daysMin:"Su Mo Tu We Th Fr Sa".split(" "),months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},k={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1E3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,
parseFormat:function(a){if("function"===typeof a.toValue&&"function"===typeof a.toDisplay)return a;var b=a.replace(this.validParts,"\x00").split("\x00");a=a.match(this.validParts);if(!b||!b.length||!a||0===a.length)throw Error("Invalid date format.");return{separators:b,parts:a}},parseDate:function(b,e,f,g){function u(a,b){!0===b&&(b=10);100>a&&(a+=2E3,a>(new Date).getFullYear()+b&&(a-=100));return a}function x(){var a=this.slice(0,n[m].length),b=n[m].slice(0,a.length);return a.toLowerCase()===b.toLowerCase()}
if(!b)return c;if(b instanceof Date)return b;"string"===typeof e&&(e=k.parseFormat(e));if(e.toValue)return e.toValue(b,e,f);var v={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},q={yesterday:"-1d",today:"+0d",tomorrow:"+1d"},n,m;b in q&&(b=q[b]);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(b)){n=b.match(/([\-+]\d+)([dmwy])/gi);b=new Date;for(m=0;m<n.length;m++)e=n[m].match(/([\-+]\d+)([dmwy])/i),f=Number(e[1]),q=v[e[2].toLowerCase()],b=p.prototype[q](b,f);return p.prototype._zero_utc_time(b)}n=
b&&b.match(this.nonpunctuation)||[];var v={},z="yyyy yy M MM m mm d dd".split(" "),q={yyyy:function(a,b){return a.setUTCFullYear(g?u(b,g):b)},m:function(a,b){if(isNaN(a))return a;for(--b;0>b;)b+=12;b%=12;for(a.setUTCMonth(b);a.getUTCMonth()!==b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}},l;q.yy=q.yyyy;q.M=q.MM=q.mm=q.m;q.dd=q.d;b=d();var y=e.parts.slice();n.length!==y.length&&(y=a(y).filter(function(b,c){return-1!==a.inArray(c,z)}).toArray());if(n.length===y.length){var t;
m=0;for(t=y.length;m<t;m++){l=parseInt(n[m],10);e=y[m];if(isNaN(l))switch(e){case "MM":l=a(r[f].months).filter(x);l=a.inArray(l[0],r[f].months)+1;break;case "M":l=a(r[f].monthsShort).filter(x),l=a.inArray(l[0],r[f].monthsShort)+1}v[e]=l}for(m=0;m<z.length;m++)e=z[m],e in v&&!isNaN(v[e])&&(f=new Date(b),q[e](f,v[e]),isNaN(f)||(b=f))}return b},formatDate:function(b,c,d){if(!b)return"";"string"===typeof c&&(c=k.parseFormat(c));if(c.toDisplay)return c.toDisplay(b,c,d);d={d:b.getUTCDate(),D:r[d].daysShort[b.getUTCDay()],
DD:r[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:r[d].monthsShort[b.getUTCMonth()],MM:r[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};d.dd=(10>d.d?"0":"")+d.d;d.mm=(10>d.m?"0":"")+d.m;b=[];for(var e=a.extend([],c.separators),f=0,g=c.parts.length;f<=g;f++)e.length&&b.push(e.shift()),b.push(d[c.parts[f]]);return b.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+B.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+
B.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};k.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+k.headTemplate+"<tbody></tbody>"+k.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+k.headTemplate+k.contTemplate+k.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+
k.headTemplate+k.contTemplate+k.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+k.headTemplate+k.contTemplate+k.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+k.headTemplate+k.contTemplate+k.footTemplate+"</table></div></div>";a.fn.datepicker.DPGlobal=k;a.fn.datepicker.noConflict=function(){a.fn.datepicker=F;return this};a.fn.datepicker.version="1.7.1";a.fn.datepicker.deprecated=function(a){var b=window.console;
b&&b.warn&&b.warn("DEPRECATED: "+a)};a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),y.call(c,"show"))});a(function(){y.call(a('[data-provide="datepicker-inline"]'))})});window.BlobBuilder=window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder;var blob,start,end,part,uploaded,SIZE,BYTES_PER_CHUNK,xhr,chunk,UploadFileFinishedCallback=null,uid="";
function sendUploadFileRequest(a){blob=document.getElementById("fileUpload").files[0];if(void 0==blob)return alert("\u8b80\u53d6\u6a94\u6848\u5931\u6557!"),null;BYTES_PER_CHUNK=1048576;SIZE=blob.size;part=start=0;end=BYTES_PER_CHUNK;uploaded=0;UploadFileFinishedCallback=a;uid=Date.now();chunk=blob.slice(start,end);uploadFileFile(chunk,part);start=end;end=start+BYTES_PER_CHUNK;part+=1;uploaded=0;return uid}
function fileSelected(){var a=document.getElementById("fileUpload").files[0];if(a){var c;c=1048576<a.size?(Math.round(100*a.size/1048576)/100).toString()+"MB":(Math.round(100*a.size/1024)/100).toString()+"KB";var b=a.name.split("."),d=document.getElementById("id_new_file_name");void 0!=d&&(d.value=b[0]);d=document.getElementById("id_new_file_description");void 0!=d&&(d.value=b[0]);document.getElementById("fileFileSize").innerHTML="Size: "+c;document.getElementById("fileFileType").innerHTML="Type: "+
a.type}}
function uploadFileFile(a,c){var b=document.getElementById("fileUpload").files[0],d=new FormData;d.append("fileUpload",a);d.append("file",b.name);d.append("uid",uid);d.append("num",parseInt(c));b=new XMLHttpRequest;b.upload.addEventListener("progress",uploadFileProgress,!1);b.addEventListener("load",uploadFileComplete,!1);b.addEventListener("error",uploadFileFailed,!1);b.addEventListener("abort",uploadFileCanceled,!1);b.open("POST","/php/uploadfile.php");b.onload=function(a){};b.setRequestHeader("Cache-Control","no-cache");
b.send(d)}function uploadFileProgress(a){a.lengthComputable?(a=Math.round(100*(uploaded+a.loaded)/SIZE),document.getElementById("fileProgressNumber").innerHTML=a.toString()+"%"):document.getElementById("fileProgressNumber").innerHTML="unable to compute"}
function uploadFileComplete(a){start<SIZE?(chunk=blob.slice(start,end),uploadFileFile(chunk,part),start=end,end=start+BYTES_PER_CHUNK,part+=1,uploaded+=BYTES_PER_CHUNK):"function"===typeof UploadFileFinishedCallback&&(0==JSON.parse(a.target.responseText).FileSize?UploadFileFinishedCallback(null):UploadFileFinishedCallback(uid))}function uploadFileFailed(a){alert("There was an error attempting to upload the file.");uid=null}
function uploadFileCanceled(a){xhr.abort();uid=xhr=null;alert("The upload has been canceled by the user or the browser dropped the connection.")};window.BlobBuilder=window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder;var UploadImageFinishedCallback=null,uid="";
function sendUploadImageRequest(a){blob=document.getElementById("imageUpload").files[0];if(void 0==blob)return alert("\u8b80\u53d6\u6a94\u6848\u5931\u6557!"),null;BYTES_PER_CHUNK=1048576;SIZE=blob.size;part=start=0;end=BYTES_PER_CHUNK;uploaded=0;UploadImageFinishedCallback=a;uid=Date.now();chunk=blob.slice(start,end);uploadImageFile(chunk,part);start=end;end=start+BYTES_PER_CHUNK;part+=1;uploaded=0;return uid}
function imageSelected(){var a=document.getElementById("imageUpload").files[0];if(a){var c;c=1048576<a.size?(Math.round(100*a.size/1048576)/100).toString()+"MB":(Math.round(100*a.size/1024)/100).toString()+"KB";var b=a.name.split("."),d=document.getElementById("id_new_image_name");void 0!=d&&(d.value=b[0]);d=document.getElementById("id_new_image_description");void 0!=d&&(d.value=b[0]);document.getElementById("imageFileSize").innerHTML="Size: "+c;document.getElementById("imageFileType").innerHTML=
"Type: "+a.type;a=document.getElementById("removebutton");void 0!=a&&a.setAttribute("style","display:block;")}}
function uploadImageFile(a,c){var b=document.getElementById("imageUpload").files[0],d=new FormData;d.append("imageUpload",a);d.append("file",b.name);d.append("uid",uid);d.append("num",parseInt(c));b=new XMLHttpRequest;b.upload.addEventListener("progress",uploadImageProgress,!1);b.addEventListener("load",uploadImageComplete,!1);b.addEventListener("error",uploadImageFailed,!1);b.addEventListener("abort",uploadImageCanceled,!1);b.open("POST","/php/uploadfile.php");b.onload=function(a){};b.setRequestHeader("Cache-Control",
"no-cache");b.send(d)}function uploadImageProgress(a){a.lengthComputable?(a=Math.round(100*(uploaded+a.loaded)/SIZE),document.getElementById("imageProgressNumber").innerHTML=a.toString()+"%"):document.getElementById("imageProgressNumber").innerHTML="unable to compute"}
function uploadImageComplete(a){start<SIZE?(chunk=blob.slice(start,end),uploadImageFile(chunk,part),start=end,end=start+BYTES_PER_CHUNK,part+=1,uploaded+=BYTES_PER_CHUNK):"function"===typeof UploadImageFinishedCallback&&(0==JSON.parse(a.target.responseText).FileSize?UploadImageFinishedCallback(null):UploadImageFinishedCallback(uid))}function uploadImageFailed(a){alert("There was an error attempting to upload the file.");uid=null}
function uploadImageCanceled(a){xhr.abort();uid=xhr=null;alert("The upload has been canceled by the user or the browser dropped the connection.")};var PreLoadIndex=-1,CurrentLoadIndex=0,LOAD_STATE_END=9999,LOAD_PAGE_NUM=20,gl_user_nameinfo=[],gl_userids=[],gl_assist_List=[],gl_assistevent_List=[],glCurrentPage=1,glReloadTimes=0,gl_uploadfile_uid="",gl_uploadimage_uid="",gl_NewApply={};check_loading_status();
function check_loading_status(){switch(CurrentLoadIndex){case 0:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,gl_user_nameinfo=[],gl_userids=[],load_assists());break;case 1:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_assistevents());break;case 2:PreLoadIndex!=
CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_user_nameinfo());break;case 3:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,show_assistevents(),CurrentLoadIndex=LOAD_STATE_END)}CurrentLoadIndex!=LOAD_STATE_END?setTimeout(check_loading_status,100):console.log("check_loading_status() Stop.")}
function load_assists(){var a=gl_target_server+"/php/assist.php";gl_assist_List=[];$.getJSON(a,"loadassists=1&project_id="+project_id,function(a){$.each(a,function(a,c){c.id=parseInt(c.id);gl_assist_List.push(c);add_user(c.userid)})}).success(function(){CurrentLoadIndex+=1}).error(function(){CurrentLoadIndex+=1}).complete(function(){})}
function load_assistevents(){var a=gl_target_server+"/php/assist.php",c=(glCurrentPage-1)*LOAD_PAGE_NUM,b=LOAD_PAGE_NUM;gl_assistevent_List=[];gl_signoffuser=[];$.getJSON(a,"loadassistevents=1&project_id="+project_id+"&offset="+c+"&count="+b,function(a){$.each(a,function(a,b){b.id=parseInt(b.id);b.assistid=parseInt(b.assistid);gl_assistevent_List.push(b);add_user(b.userid)})}).success(function(){CurrentLoadIndex+=1}).error(function(){CurrentLoadIndex+=1}).complete(function(){})}
function load_user_nameinfo(){0==gl_userids.length?CurrentLoadIndex+=1:$.getJSON(gl_target_server+"/php/vilsnodes.php","loadusername=1&project_id="+project_id+"&user="+gl_userids.toString(),function(a){$.each(a,function(a,b){b.userid=parseInt(b.userid);gl_user_nameinfo.push(b)})}).success(function(){CurrentLoadIndex+=1}).error(function(){}).complete(function(){})}function add_user(a){for(var c=!1,b=0;b<gl_userids.length;++b)if(gl_userids[b]==a){c=!0;break}0==c&&0<a&&gl_userids.push(a)}
function show_assistevents(){for(var a=document.getElementById("ASSIST_EVENT_TABLE_BODY");a.firstChild;)a.removeChild(a.firstChild);for(var c=0;c<gl_assistevent_List.length;c++){var b=gl_assistevent_List[c];show_assistevent(a,(glCurrentPage-1)*LOAD_PAGE_NUM+c+1,b);$("#div_calendar_"+b.id).datepicker({applyid:b.id,language:"zh-TW",weekStart:1,beforeShowDay:function(a,b){var c=get_assistevent(b);return checkValidDate(a,c,!1,!1)}})}}
function show_assistevent(a,c,b){var d=0,e=get_assist(b.assistid);if(null==e)return 0;var f=document.createElement("tr");f.setAttribute("id",b.id+"_TABLE_ROW");a.appendChild(f);1==c%2&&f.setAttribute("bgcolor","#ebebe0");var g=document.createElement("tr");g.setAttribute("id",b.id+"_TABLE_ROW_EXTRA");a.appendChild(g);f.appendChild(document.createElement("td"));f.cells[d].appendChild(document.createTextNode(""+c));1==b.signoffstatus&&(a=document.createElement("a"),a.setAttribute("id",b.id+"_assist_record_button"),
a.setAttribute("title","\u986f\u793a\u5354\u52a9\u7d00\u9304"),a.setAttribute("onclick",'open_assist_record("'+b.id+'", "'+b.assistid+'");'),a.setAttribute("class","btn btn-default btn-xs pull-right"),c=document.createElement("i"),c.setAttribute("id",b.id+"_assist_record_icon"),c.setAttribute("class","fa fa-plus text-green"),a.appendChild(c),f.cells[d].appendChild(a));d++;f.appendChild(document.createElement("td"));a=document.createElement("div");a.appendChild(document.createTextNode(b.datetime));
f.cells[d].appendChild(a);d++;f.appendChild(document.createElement("td"));a=document.createElement("div");a.appendChild(document.createTextNode(e.title));f.cells[d].appendChild(a);d++;f.appendChild(document.createElement("td"));a=document.createElement("div");a.setAttribute("id","description_"+b.id);a.appendChild(document.createTextNode(e.description));f.cells[d].appendChild(a);d++;f.appendChild(document.createElement("td"));a=document.createElement("div");a.setAttribute("id","apply_description_"+
b.id);a.appendChild(document.createTextNode(b.description));f.cells[d].appendChild(a);d++;f.appendChild(document.createElement("td"));f.cells[d].appendChild(document.createTextNode(getUserName(b.userid)));d++;f.appendChild(document.createElement("td"));e=b.eventtime.split(",");for(a=0;a<e.length;a++)f.cells[d].appendChild(create_time_item(e[a]));d++;e=document.createElement("td");f.appendChild(e);a=document.createElement("div");a.setAttribute("id","div_weekday_"+b.id);e.appendChild(a);c=create_weekday_ui(b.id,
b.weekday,!1);a.appendChild(c);a=document.createElement("div");a.setAttribute("id","div_calendar_"+b.id);e.appendChild(a);a=document.createElement("div");e.appendChild(a);e=document.createElement("span");e.setAttribute("style","display:inline;padding:.2em .3em .3em;font-size:95%;line-height:2;position:relative;top:-1px;color:#fff;border-radius:2px;white-space:nowrap;background-image: linear-gradient(to bottom, #cc4400, #994411);");e.textContent="\u65e5\u671f";a.appendChild(e);e=document.createElement("span");
e.textContent=":\u4ee3\u8868\u4e0d\u9700\u5354\u52a9\u65e5\u671f";a.appendChild(e);d++;f.appendChild(document.createElement("td"));e=document.createElement("div");e.setAttribute("id","storage_image_"+b.id);0<b.imageids.length&&fetch_storage_image(b.id,b.imageids);f.cells[d].appendChild(e);d++;f.appendChild(document.createElement("td"));e=document.createElement("div");e.setAttribute("id","storage_file_"+b.id);0<b.fileids.length&&fetch_storage_file(b.id,b.fileids);f.cells[d].appendChild(e);d++;f.appendChild(document.createElement("td"));
f.cells[d].appendChild(create_applyuser_label(b.applyusername));d++;f.appendChild(document.createElement("td"));f.cells[d].appendChild(create_relation_label(b.applyuserrelation));d++;f.appendChild(document.createElement("td"));e=document.createElement("span");e.setAttribute("id","signoffstatus_"+b.id);0==b.signoffstatus?(e.textContent="\u7c3d\u6838\u4e2d",e.setAttribute("class","badge bg-blue")):1==b.signoffstatus?(e.textContent="\u5df2\u7c3d\u6838",e.setAttribute("class","badge bg-green")):99==b.signoffstatus&&
(e.textContent="\u672a\u6838\u51c6",e.setAttribute("class","badge bg-red"));f.cells[d].appendChild(e);return 1}function create_time_item(a){var c=document.createElement("div"),b=document.createElement("span");b.setAttribute("class","badge bg-yellow-active");b.textContent=a;c.appendChild(b);return c}
function create_applyuser_label(a){var c=document.createElement("span");c.setAttribute("style","display:inline;padding:.2em .3em .3em;font-size:95%;font-weight:700;line-height:2;position:relative;top:-1px;color:#fff;border-radius:2px;white-space:nowrap;background-color:#f39c12;");c.textContent=a;return c}
function create_relation_label(a){var c=document.createElement("span");c.setAttribute("style","display:inline;padding:.2em .3em .3em;font-size:95%;font-weight:700;line-height:2;position:relative;top:-1px;color:#fff;border-radius:2px;white-space:nowrap;background-color:#00a65a;");c.textContent=a;return c}
function open_assist_record(a,c){console.log("open_assist_record() assisteventid:"+a+" assistid:"+c);var b=document.getElementById(a+"_assist_record_button");b.setAttribute("title","\u95dc\u9589\u5354\u52a9\u7d00\u9304");b.setAttribute("onclick",'close_assist_record("'+a+'", "'+c+'");');document.getElementById(a+"_assist_record_icon").setAttribute("class","fa fa-minus text-red");b=document.getElementById(a+"_TABLE_ROW_EXTRA");b.setAttribute("bgcolor","#d7e9e4");b.appendChild(document.createElement("td"));
var d=document.createElement("td");d.setAttribute("colspan","12");b.appendChild(d);b=document.createElement("table");b.setAttribute("class","table table-bordered");d.appendChild(b);var e=document.createElement("thead");b.appendChild(e);d=document.createElement("tr");d.setAttribute("style","background-color:rgb(236, 240, 245);");e.appendChild(d);e=document.createElement("th");e.textContent="#";e.setAttribute("style","width: 30px;");d.appendChild(e);e=document.createElement("th");e.textContent="\u9810\u7d04\u6642\u9593";
e.setAttribute("style","width: 200px;");d.appendChild(e);e=document.createElement("th");e.textContent="\u901a\u77e5\u8ca0\u8cac\u4eba\u6642\u9593";e.setAttribute("style","width: 200px;");d.appendChild(e);e=document.createElement("th");e.textContent="\u56de\u5831\u72c0\u614b";d.appendChild(e);e=document.createElement("th");e.textContent="\u56de\u5831\u6642\u9593";d.appendChild(e);d=document.createElement("tbody");d.setAttribute("id","assistrecord_table_"+a);b.appendChild(d);load_AssistEventRecord(a,
c)}function close_assist_record(a,c){var b=document.getElementById(a+"_assist_record_button");b.setAttribute("title","\u986f\u793a\u5354\u52a9\u7d00\u9304");b.setAttribute("onclick",'open_assist_record("'+a+'", "'+c+'");');document.getElementById(a+"_assist_record_icon").setAttribute("class","fa fa-plus text-green");clearChildView(a+"_TABLE_ROW_EXTRA")}
function load_AssistEventRecord(a,c){var b=[];$.getJSON(gl_target_server+"/php/assist.php","loadassisteventrecords=1&project_id="+project_id+"&assistid="+c+"&assisteventid="+a+"&count=5",function(a){$.each(a,function(a,c){b.push(c)})}).success(function(){show_AssistEventRecord(a,c,b)}).error(function(){}).complete(function(){})}
function show_AssistEventRecord(a,c,b){for(var d=document.getElementById("assistrecord_table_"+a),e=0;e<b.length;e++)record=b[e],show_assistevent_record_item(d,e,record);b=document.createElement("tr");d.appendChild(b);d=document.createElement("td");d.setAttribute("colspan","5");b.appendChild(d);b=document.createElement("button");b.setAttribute("title","\u67e5\u770b\u8a73\u7d30\u8cc7\u8a0a");b.setAttribute("href","javascript:;");b.textContent="\u67e5\u770b\u66f4\u591a\u8a73\u7d30\u8cc7\u8a0a  ";b.setAttribute("onclick",
"show_assisteventrecord_detail("+project_id+',"'+a+'","'+c+'");return false;');a=document.createElement("i");a.setAttribute("class","fa fa-calendar-check-o ");b.appendChild(a);d.appendChild(b)}
function show_assistevent_record_item(a,c,b){var d=document.createElement("tr");a.appendChild(d);1==c%2&&d.setAttribute("bgcolor","#f8f6ef");a=document.createElement("td");a.textContent=c+1;d.appendChild(a);c=document.createElement("td");c.textContent=b.eventday+" "+b.eventtime;d.appendChild(c);c=document.createElement("td");c.textContent=b.datetime;d.appendChild(c);c=document.createElement("td");d.appendChild(c);a=document.createElement("td");d.appendChild(a);0==b.results.length?(c.textContent="\u5c1a\u672a\u56de\u5831",
a.textContent=""):(c.textContent="1,0"===b.results?"\u5df2\u5b8c\u6210":"\u672a\u5b8c\u6210",a.textContent=b.updatetime)}function show_assisteventrecord_detail(a,c,b){window.open("/index.php/vilsassistrecorddetail/"+a+"?assisteventid="+c+"&assistid="+b,"_blank").focus()}
function create_empty_assist_table_item(a){a=document.getElementById("ASSIST_EVENT_TABLE_BODY");if(void 0==document.getElementById("assist_description_new")){gl_NewApply.applyid=88888;gl_NewApply.weekday=[];gl_NewApply.validdate=[];gl_NewApply.invaliddate=[];var c=AddDays(30),c=c.getFullYear()+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+("0"+c.getDate()).slice(-2);gl_NewApply.deadline=c;a=a.insertRow(0);c=0;a.appendChild(document.createElement("td"));a.cells[c].appendChild(document.createTextNode(""));
c++;a.appendChild(document.createElement("td"));a.cells[c].appendChild(document.createTextNode(""));c++;a.appendChild(document.createElement("td"));var b=create_dropdown_assist("new");a.cells[c].appendChild(b);b=document.createElement("span");b.setAttribute("class","badge bg-aqua-active");b.setAttribute("id","assist_title_new");b.setAttribute("assistid","");a.cells[c].appendChild(b);c++;a.appendChild(document.createElement("td"));b=document.createElement("span");b.setAttribute("id","assist_description_new");
a.cells[c].appendChild(b);c++;a.appendChild(document.createElement("td"));a.cells[c].appendChild(create_input_text("apply_description_new",""));c++;a.appendChild(document.createElement("td"));a.cells[c].appendChild(document.createTextNode(gl_accountname+" [ "+gl_accountid+" ]"));c++;a.appendChild(document.createElement("td"));a.cells[c].appendChild(create_time_select("apply_time_new"));c++;b=create_weekday_select("apply_date_new");a.appendChild(b);c++;a.appendChild(document.createElement("td"));b=
create_upload_image_ui("apply_image_filename_new");a.cells[c].appendChild(b);c++;a.appendChild(document.createElement("td"));b=create_upload_file_ui("apply_file_filename_new");a.cells[c].appendChild(b);c++;a.appendChild(document.createElement("td"));a.cells[c].appendChild(create_input_text("apply_name_new"));c++;a.appendChild(document.createElement("td"));a.cells[c].appendChild(create_input_text("apply_relation_new"));c++;a.appendChild(document.createElement("td"));b=document.createElement("button");
b.setAttribute("id","save_new_apply_button");b.setAttribute("class","btn btn-block btn-primary btn-lg");b.setAttribute("onclick","save_new_apply();");b.textContent="\u63d0\u51fa\u7533\u8acb";a.cells[c].appendChild(b);c++;$(".timepicker").timepicker({showInputs:!1});var d="div_calendar_"+gl_NewApply.applyid;$("#"+d).datepicker({applyid:gl_NewApply.applyid,language:"zh-TW",weekStart:1,beforeShowDay:function(a,b){var c=get_assistevent(b);return checkValidDate(a,c,!0,!1)}}).on("changeDate",function(a){if(void 0!=
a.applyid&&void 0!=a.date){var b=get_assistevent(a.applyid);checkValidDate(a.date,b,!0,!0);$("#"+d).datepicker("update",a.date)}})}}function AddDays(a){var c=new Date(new Date);c.setDate(c.getDate()+a);return c}
function create_dropdown_assist(a){var c=document.createElement("div");c.setAttribute("class","btn-group");var b=document.createElement("button");b.setAttribute("id","dropdown_assist_"+a);b.setAttribute("type","button");b.setAttribute("class","btn btn-default btn-sm dropdown-toggle");b.setAttribute("data-toggle","dropdown");b.textContent="\u5354\u52a9\u4e8b\u9805";c.appendChild(b);var d=document.createElement("span");d.setAttribute("class","caret");b.appendChild(d);b=document.createElement("ul");
b.setAttribute("class","dropdown-menu");c.appendChild(b);for(d=0;d<gl_assist_List.length;d++){var e=gl_assist_List[d];b.appendChild(create_dropdown_assist_item(a,e.id,e.title,e.description))}return c}
function create_dropdown_assist_item(a,c,b,d){var e=document.createElement("li"),f=document.createElement("a");f.setAttribute("tabIndex","-1");f.setAttribute("data-value",c);f.setAttribute("href","javascript:;");f.setAttribute("onclick",'dropdown_assist_click("'+a+'",'+c+',"'+b+'","'+d+'");return true;');f.appendChild(document.createTextNode(b));e.appendChild(f);return e}
function dropdown_assist_click(a,c,b,d){console.log("dropdown_assist_click() assisteventid:"+a+" assistid:"+c+" showname:"+b);a=document.getElementById("assist_title_new");null!=a&&(a.setAttribute("assistid",c),a.textContent=b);c=document.getElementById("assist_description_new");null!=c&&(c.textContent=d)}function create_input_text(a,c){var b=document.createElement("textarea");b.setAttribute("rows","1");b.setAttribute("id",a);b.setAttribute("style","width: 120px;");b.textContent=c;return b}
function create_time_select(a){var c=document.createElement("div");c.appendChild(create_time_picker(a,"07:00 AM"));var b=document.createElement("div");b.setAttribute("id",a);c.appendChild(b);return c}
function create_weekday_select(a){var c=document.createElement("td"),b=document.createElement("div");b.setAttribute("id",a);c.appendChild(b);a=create_weekday_ui(gl_NewApply.applyid,gl_NewApply.weekday,!0);b.appendChild(a);b=document.createElement("div");b.setAttribute("id","div_calendar_"+gl_NewApply.applyid);c.appendChild(b);b=document.createElement("div");c.appendChild(b);a=document.createElement("span");a.setAttribute("style","display:inline;padding:.2em .3em .3em;font-size:95%;line-height:2;position:relative;top:-1px;color:#fff;border-radius:2px;white-space:nowrap;background-image: linear-gradient(to bottom, #cc4400, #994411);");
a.textContent="\u65e5\u671f";b.appendChild(a);a=document.createElement("span");a.textContent=":\u4ee3\u8868\u4e0d\u9700\u5354\u52a9\u65e5\u671f";b.appendChild(a);a=document.createElement("div");a.textContent="\u53ea\u53ef\u7533\u8acb\u672a\u4f8630\u5929\u5167\u5354\u52a9\u4e8b\u9805";b.appendChild(a);return c}
function create_upload_image_ui(a){a=document.createElement("div");var c=document.createElement("form");c.setAttribute("method","POST");c.setAttribute("enctype","multipart/form-data");c.setAttribute("action","php/uploadfile.php");a.appendChild(c);var b=document.createElement("div");b.setAttribute("class","form-group");c.appendChild(b);c=document.createElement("label");c.setAttribute("class","control-sidebar-subheading");c.setAttribute("for","imageUpload");c.innerHTML="\u4e0a\u50b3\u6a94\u6848";b.appendChild(c);
c=document.createElement("input");c.setAttribute("id","imageUpload");c.setAttribute("accept","image/*");c.setAttribute("type","file");c.setAttribute("name","imageUpload");c.setAttribute("onchange","imageSelected();");b.appendChild(c);c=document.createElement("div");c.setAttribute("id","imageFileSize");b.appendChild(c);c=document.createElement("div");c.setAttribute("id","imageFileType");b.appendChild(c);c=document.createElement("div");c.setAttribute("id","imageProgressNumber");b.appendChild(c);return a}
function create_upload_file_ui(a){a=document.createElement("div");var c=document.createElement("form");c.setAttribute("method","POST");c.setAttribute("enctype","multipart/form-data");c.setAttribute("action","php/uploadfile.php");a.appendChild(c);var b=document.createElement("div");b.setAttribute("class","form-group");c.appendChild(b);c=document.createElement("label");c.setAttribute("class","control-sidebar-subheading");c.setAttribute("for","fileUpload");c.innerHTML="\u4e0a\u50b3\u6a94\u6848";b.appendChild(c);
c=document.createElement("input");c.setAttribute("id","fileUpload");c.setAttribute("type","file");c.setAttribute("name","fileUpload");c.setAttribute("onchange","fileSelected();");b.appendChild(c);c=document.createElement("div");c.setAttribute("id","fileFileSize");b.appendChild(c);c=document.createElement("div");c.setAttribute("id","fileFileType");b.appendChild(c);c=document.createElement("div");c.setAttribute("id","fileProgressNumber");b.appendChild(c);return a}
function create_time_picker(a,c){var b=document.createElement("div");b.setAttribute("class","bootstrap-timepicker");b.setAttribute("style","width:180px;");var d=document.createElement("div");d.setAttribute("class","input-group");b.appendChild(d);var e=document.createElement("div");e.setAttribute("class","input-group-addon");d.appendChild(e);var f=document.createElement("i");f.setAttribute("class","fa fa-clock-o");e.appendChild(f);e=document.createElement("input");e.setAttribute("type","text");e.setAttribute("id",
"new_select_time");e.setAttribute("readonly","readonly");e.setAttribute("class","form-control timepicker");e.setAttribute("value",c);d.appendChild(e);e=document.createElement("div");e.setAttribute("class","input-group-addon");e.setAttribute("style","background-color:green;color:white;");e.setAttribute("onclick","add_new_time('"+a+"','new_select_time');");e.textContent="\u65b0\u589e";d.appendChild(e);return b}
function add_new_time(a,c){var b=document.getElementById(a),d=document.getElementById(c);if(null!=b){for(var e=b.childNodes,f=!1,g=0;g<e.length;g++){var u=e[g].getAttribute("timevalue");if(d.value===u){f=!0;break}}if(f){alert(d.value+" \u6642\u9593\u5df2\u6307\u5b9a!");return}}e="apply_time_"+(new Date).getTime();f=document.createElement("div");f.setAttribute("id",e);f.setAttribute("timevalue",d.value);b.appendChild(f);b=document.createElement("span");b.setAttribute("class","badge bg-yellow-active");
b.textContent=d.value;f.appendChild(b);d=document.createElement("span");d.setAttribute("class","badge bg-red");d.textContent="\u79fb\u9664";d.setAttribute("onclick","remove_time_click('"+e+"');return true;");f.appendChild(d)}function remove_time_click(a){a=document.getElementById(a);null!=a&&a.parentElement.removeChild(a)}
function create_weekday_ui(a,c,b){var d=document.createElement("div");d.setAttribute("class","box");d.setAttribute("style","background-image: linear-gradient(to bottom, #a9dbde, #e4eded);");var e=document.createElement("div");e.setAttribute("class","box-header with-border");d.appendChild(e);var f=document.createElement("div");f.appendChild(document.createTextNode("\u9031\u9593\u9ede\u540d"));f.setAttribute("style","text-align:center;");e.appendChild(f);f=document.createElement("div");f.setAttribute("class",
"box-body no-padding");d.appendChild(f);e=document.createElement("table");e.setAttribute("class","table table-bordered");e.setAttribute("style","background-image: linear-gradient(to bottom, #e4eded, #e4eded);");f.appendChild(e);f=document.createElement("thead");e.appendChild(f);f=document.createElement("tr");e.appendChild(f);var g=document.createElement("th");g.textContent="\u4e00";f.appendChild(g);g=document.createElement("th");g.textContent="\u4e8c";f.appendChild(g);g=document.createElement("th");
g.textContent="\u4e09";f.appendChild(g);g=document.createElement("th");g.textContent="\u56db";f.appendChild(g);g=document.createElement("th");g.textContent="\u4e94";f.appendChild(g);g=document.createElement("th");g.textContent="\u516d";f.appendChild(g);g=document.createElement("th");g.textContent="\u65e5";f.appendChild(g);f=document.createElement("tbody");e.appendChild(f);e=document.createElement("tr");f.appendChild(e);for(f=1;7>=f;f++){var u=""+f;7==f&&(u="0");var x=!1;0<=c.indexOf(u)&&(x=!0);g=
document.createElement("td");u=create_checkbox(a,u,x,b);g.appendChild(u);e.appendChild(g)}return d}function create_checkbox(a,c,b,d){var e=document.createElement("input");e.setAttribute("id","uiid_checkbox_"+c+"_"+a);e.setAttribute("type","checkbox");e.setAttribute("onclick",'weekday_checkbox_click("'+a+'","'+c+'")');b&&e.setAttribute("checked",b);d||e.setAttribute("disabled",!0);return e}
function weekday_checkbox_click(a,c){var b=document.getElementById("uiid_checkbox_"+c+"_"+a).checked,d=get_assistevent(a),e=d.weekday.indexOf(c);b?0>e&&(d.weekday.push(c),check_invaliddate(d,c)):0<=e&&(d.weekday.splice(e,1),check_validdate(d,c));console.log("weekday_checkbox_click() day:"+c+" applyid:"+a+" checkd:"+b+" weekday:"+d.weekday);$("#div_calendar_"+a).datepicker("setDate",null)}
function check_validdate(a,c){console.log("check_validdate() assistevent.validdate.length:"+a.validdate.length);for(var b=a.validdate.length;b--;){var d=a.validdate[b],e=moment(d).day();console.log("check_validdate() existed_date:"+d+" dow:"+e+" day:"+c);e==c&&(console.log("check_validdate() \u79fb\u9664\u9019\u500b\u65e5\u671f existed_date:"+d),a.validdate.splice(b,1))}}
function check_invaliddate(a,c){console.log("check_invaliddate() assistevent.invaliddate.length:"+a.invaliddate.length);for(var b=a.invaliddate.length;b--;){var d=a.invaliddate[b],e=moment(d).day();console.log("check_invaliddate() existed_date:"+d+" dow:"+e+" day:"+c);e==c&&(console.log("check_invaliddate() \u79fb\u9664\u9019\u500b\u65e5\u671f existed_date:"+d),a.invaliddate.splice(b,1))}}
function checkValidDate(a,c,b,d){var e=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2);a=a.getDay();a=c.weekday.indexOf(""+a);if(e>c.deadline)return{enabled:b,classes:"active"};if(0<=a){if(d)return d=!0,a=c.invaliddate.indexOf(e),0<=a?(c.invaliddate.splice(a,1),d=!1):c.invaliddate.push(e),0==d?(a=c.validdate.indexOf(e),0>a&&c.validdate.push(e)):(a=c.validdate.indexOf(e),0<=a&&c.validdate.splice(a,1)),d?{enabled:b,classes:"active"}:{enabled:b,classes:"noactive"};
a=c.invaliddate.indexOf(e);return 0<=a?{enabled:b,classes:"active"}:{enabled:b,classes:"noactive"}}if(d)return d=!1,a=c.validdate.indexOf(e),0<=a?(c.validdate.splice(a,1),d=!0):c.validdate.push(e),d?(a=c.invaliddate.indexOf(e),0>a&&c.invaliddate.push(e)):(a=c.invaliddate.indexOf(e),0<=a&&c.invaliddate.splice(a,1)),d?{enabled:b,classes:"active"}:{enabled:b,classes:"noactive"};a=c.validdate.indexOf(e);return 0<=a?{enabled:b,classes:"noactive"}:{enabled:b,classes:"active"}}
function apply_new_assist(){create_empty_assist_table_item(gl_assistevent_List.length+1);return!1}
function save_new_apply(){var a=document.getElementById("assist_title_new");null!=a&&(0==a.getAttribute("assistid").length?alert("\u8acb\u9078\u64c7 \u5354\u52a9\u4e8b\u9805"):0==document.getElementById("apply_description_new").value.length?alert("\u8acb\u586b\u5beb \u7533\u8acb\u8aaa\u660e"):0==document.getElementById("apply_time_new").childNodes.length?alert("\u8acb\u9078\u64c7 \u6bcf\u65e5\u5354\u52a9\u6642\u9593"):0==document.getElementById("apply_name_new").value.length?alert("\u8acb\u586b\u5beb\u7533\u8acb\u4eba\u59d3\u540d"):
0==document.getElementById("apply_relation_new").value.length?alert("\u8acb\u586b\u5beb\u7533\u8acb\u4eba\u95dc\u4fc2"):(document.getElementById("save_new_apply_button").disabled=!0,check_upload_file()))}function check_upload_file(){gl_uploadfile_uid="";void 0!=document.getElementById("fileUpload").files[0]?(gl_uploadfile_uid=sendUploadFileRequest(uploadFileFinihed),console.log("check_upload_file() gl_uploadfile_uid:"+gl_uploadfile_uid)):check_upload_image()}
function uploadFileFinihed(a){console.log("uploadFileFinihed() uploadfile_uid:"+a);if(null==a)alert("\u4e0a\u50b3\u6a94\u6848\u5931\u6557!");else{var c=document.getElementById("fileUpload").files[0],b=c.name.split("."),d="project_id="+project_id,d=d+"&createnewfile=1"+("&name="+b[0])+("&description="+b[0]),d=d+("&filename="+c.name),d=d+("&fileuid="+a)+("&filetype="+c.type),d=d+("&filesize="+c.size),d=d+"&subgroups=",d=d+"&leaveform=1";return jQuery.ajax({url:"/php/uploadfile.php",type:"POST",data:d,
dataType:"text",success:function(a){setTimeout(check_upload_image,300)},error:function(a,b,c){setTimeout(check_upload_image,300)}})}}function check_upload_image(){gl_uploadimage_uid="";void 0!=document.getElementById("imageUpload").files[0]?(gl_uploadimage_uid=sendUploadImageRequest(uploadImageFinihed),console.log("check_upload_image() gl_uploadimage_uid:"+gl_uploadimage_uid)):uploadRecord()}
function uploadImageFinihed(a){console.log("uploadImageFinihed() uploadimage_uid:"+a);if(null==a)alert("\u4e0a\u50b3\u7167\u7247\u5931\u6557!");else{var c=document.getElementById("imageUpload").files[0],b=c.name.split("."),d="project_id="+project_id,d=d+"&createnewimage=1"+("&name="+b[0])+("&description="+b[0]),d=d+("&filename="+c.name),d=d+("&fileuid="+a)+("&filetype="+c.type),d=d+("&filesize="+c.size),d=d+"&subgroups=",d=d+"&leaveform=1";return jQuery.ajax({url:"/php/uploadfile.php",type:"POST",
data:d,dataType:"text",success:function(a){setTimeout(uploadRecord,300)},error:function(a,b,c){setTimeout(uploadRecord,300)}})}}
function uploadRecord(){for(var a=document.getElementById("assist_title_new").getAttribute("assistid"),c=document.getElementById("apply_description_new").value,b=document.getElementById("apply_name_new").value,d=document.getElementById("apply_relation_new").value,e=[],f=document.getElementById("apply_time_new").childNodes,g=0;g<f.length;g++){var u=f[g].getAttribute("timevalue");e.push(u)}var f=gl_NewApply.weekday.toString(),g=gl_NewApply.validdate.toString(),u=gl_NewApply.invaliddate.toString(),x=
gl_NewApply.deadline,p={};p.project_id=""+project_id;p.create_assistevent=1;p.id=a;p.description=c;p.eventtime=e.toString();p.weekday=f;p.validdate=g;p.invaliddate=u;p.deadline=x;p.imageids=gl_uploadimage_uid;p.fileids=gl_uploadfile_uid;p.applyusername=b;p.applyuserrelation=d;jQuery.ajax({url:gl_target_server+"/php/assist.php",type:"POST",data:p,success:function(a){400==a.status&&alert("update Error! response = "+JSON.stringify(a));setTimeout(reload_assistevents,300)},error:function(a,b,c){alert("error = "+
c);alert("xhr.responseText = "+a.responseText)}})}function fetch_storage_image(a,c){$.getJSON(gl_target_server+"/php/storage.php","loadsingleimage=1&project_id="+project_id+"&imageuid="+c,function(b){b=create_data_image(b.id,b.imagename,b.thumbpath,b.imagetype,b.imagesize);document.getElementById("storage_image_"+a).appendChild(b)}).success(function(){}).error(function(){}).complete(function(){})}
function fetch_storage_file(a,c){$.getJSON(gl_target_server+"/php/storage.php","loadsinglefile=1&project_id="+project_id+"&fileuid="+c,function(b){b=create_data_file(b.id,b.filename,b.filetype,b.filesize);document.getElementById("storage_file_"+a).appendChild(b)}).success(function(){}).error(function(){}).complete(function(){})}
function create_data_image(a,c,b,d,e){b=document.createElement("ul");b.setAttribute("class","mailbox-attachments clearfix");d=document.createElement("li");b.appendChild(d);var f=document.createElement("span");f.setAttribute("class","mailbox-attachment-icon has-img");d.appendChild(f);var g=document.createElement("img");g.setAttribute("src","/php/downloadfile.php?loadthumb=1&project_id="+project_id+"&imageid="+a);g.setAttribute("alt","Attachment");f.appendChild(g);f=document.createElement("div");f.setAttribute("class",
"mailbox-attachment-info");d.appendChild(f);d=document.createElement("a");d.setAttribute("href","/php/downloadfile.php?project_id="+project_id+"&imageid="+a);d.setAttribute("class","mailbox-attachment-name");f.appendChild(d);f=document.createElement("i");f.setAttribute("class","fa fa-camera");d.appendChild(f);d.appendChild(document.createTextNode("  "+c));c=document.createElement("span");c.setAttribute("class","mailbox-attachment-size");c.textContent=convertFileSize(parseInt(e));d.appendChild(c);
e=document.createElement("a");e.setAttribute("href","/php/downloadfile.php?project_id="+project_id+"&imageid="+a);e.setAttribute("class","btn btn-default btn-xs pull-right");c.appendChild(e);a=document.createElement("i");a.setAttribute("class","fa fa-cloud-download");e.appendChild(a);return b}function convertFileSize(a){return 1048576<a?(Math.round(100*a/1048576)/100).toString()+"MB":(Math.round(100*a/1024)/100).toString()+"KB"}
function create_data_file(a,c,b,d){var e=document.createElement("ul");e.setAttribute("class","mailbox-attachments clearfix");var f=document.createElement("li");e.appendChild(f);var g=document.createElement("span");g.setAttribute("class","mailbox-attachment-icon");f.appendChild(g);g.appendChild(create_filetype_icon(b));b=document.createElement("div");b.setAttribute("class","mailbox-attachment-info");f.appendChild(b);f=document.createElement("a");f.setAttribute("href","/php/downloadfile.php?project_id="+
project_id+"&fileid="+a);f.setAttribute("class","mailbox-attachment-name");b.appendChild(f);b=document.createElement("i");b.setAttribute("class","fa fa-paperclip");f.appendChild(b);f.appendChild(document.createTextNode("  "+c));c=document.createElement("span");c.setAttribute("class","mailbox-attachment-size");c.textContent=convertFileSize(parseInt(d));f.appendChild(c);d=document.createElement("a");d.setAttribute("href","/php/downloadfile.php?project_id="+project_id+"&fileid="+a);d.setAttribute("class",
"btn btn-default btn-xs pull-right");c.appendChild(d);a=document.createElement("i");a.setAttribute("class","fa fa-cloud-download");d.appendChild(a);return e}
function create_filetype_icon(a){var c=document.createElement("i");a.includes("video")?c.setAttribute("class","fa fa-file-movie-o"):a.includes("audio")?c.setAttribute("class","fa fa-file-audio-o"):a.includes("application/pdf")?c.setAttribute("class","fa fa-file-pdf-o"):a.includes("application/zip")?c.setAttribute("class","fa fa-file-zip-o"):a.includes("ms-excel")?c.setAttribute("class","fa fa-file-excel-o"):a.includes("officedocument.wordprocessingml.document")?c.setAttribute("class","fa fa-file-word-o"):
a.includes("officedocument.presentationml.presentation")?c.setAttribute("class","fa fa-file-powerpoint-o"):a.includes("image")?c.setAttribute("class","fa fa-file-photo-o"):c.setAttribute("class","fa fa-file");return c}function convertFileSize(a){return a=1048576<a?(Math.round(100*a/1048576)/100).toString()+"MB":(Math.round(100*a/1024)/100).toString()+"KB"}function reload_assistevents(){PreLoadIndex=0;CurrentLoadIndex=1;setTimeout(check_loading_status,50)}
function getUserName(a){for(var c="",b=0;b<gl_user_nameinfo.length;++b){var d=gl_user_nameinfo[b];if(d.userid==a){c=d.name;break}}return c}function get_assist(a){for(var c=0;c<gl_assist_List.length;c++){var b=gl_assist_List[c];if(b.id==a)return b}return null}function get_assistevent(a){for(var c=0;c<gl_assistevent_List.length;c++){var b=gl_assistevent_List[c];if(b.id==a)return b}return 88888==a?gl_NewApply:null}
function clearChildView(a){a=document.getElementById(a);if(null!=a)for(;a.firstChild;)a.removeChild(a.firstChild);return a}function move_page_backward(){var a=document.getElementById("id_current_page_num");1>=glCurrentPage||(glCurrentPage--,a.textContent=glCurrentPage,PreLoadIndex=0,CurrentLoadIndex=1,check_loading_status())}
function move_page_forward(){var a=document.getElementById("id_current_page_num");glCurrentPage++;a.textContent=glCurrentPage;PreLoadIndex=0;CurrentLoadIndex=1;check_loading_status()}function show_assistresult(a,c,b){window.open("/index.php/vilsassistresult/"+a+"?assistid="+c+"&hashkey="+b,"_blank").focus()}function open_assistrecords_page(){window.open("/index.php/vilsassistrecords/"+project_id,"_blank").focus()};
