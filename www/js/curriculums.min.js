var $jscomp={scope:{},checkStringArgs:function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""}};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,e){if(c){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];f in b||(b[f]={});b=b[f]}a=a[a.length-1];e=b[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6-impl","es3");
var PreLoadIndex=-1,CurrentLoadIndex=0,LOAD_STATE_END=9999,LOAD_PAGE_NUM=20,gl_curriculumtype_List=[],gl_curriculumrecord_List=[],gl_curriculum_List=[],glCurrentPage=1,glReloadTimes=0,gl_uploadfile_uid="",gl_current_record_id="",gl_NewCurriculumRecord={};check_loading_status();
function check_loading_status(){switch(CurrentLoadIndex){case 0:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_CurriculumType());break;case 1:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_CurriculumRecords());break;case 2:PreLoadIndex!=CurrentLoadIndex&&
(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_Curriculums());break;case 3:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,show_CurriculumRecords(),CurrentLoadIndex+=1);break;case 4:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+
CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,CurrentLoadIndex=LOAD_STATE_END)}CurrentLoadIndex!=LOAD_STATE_END?setTimeout(check_loading_status,100):console.log("check_loading_status() Stop.")}
function load_CurriculumType(){var a=gl_target_server+"/php/curriculum.php";gl_curriculumtype_List=[];$.getJSON(a,"loadcurriculumtype=1&project_id="+project_id,function(a){$.each(a,function(a,c){c.id=parseInt(c.id);gl_curriculumtype_List.push(c)})}).success(function(){CurrentLoadIndex+=1}).error(function(){CurrentLoadIndex+=1}).complete(function(){})}
function load_CurriculumRecords(){var a=gl_target_server+"/php/curriculum.php",c=(glCurrentPage-1)*LOAD_PAGE_NUM,b=LOAD_PAGE_NUM;gl_curriculumrecord_List=[];$.getJSON(a,"loadcurriculumrecord=1&project_id="+project_id+"&offset="+c+"&count="+b,function(a){$.each(a,function(a,b){b.id=parseInt(b.id);b.userid=parseInt(b.userid);gl_curriculumrecord_List.push(b)})}).success(function(){CurrentLoadIndex+=1}).error(function(){CurrentLoadIndex+=1}).complete(function(){})}
function load_Curriculums(){var a=gl_target_server+"/php/curriculum.php";gl_curriculum_List=[];$.getJSON(a,"loadcurriculums=1&project_id="+project_id,function(a){$.each(a,function(a,c){c.id=parseInt(c.id);c.userid=parseInt(c.userid);c.typeid=parseInt(c.typeid);gl_curriculum_List.push(c)})}).success(function(){CurrentLoadIndex+=1}).error(function(){CurrentLoadIndex+=1}).complete(function(){})}
function show_CurriculumRecords(){for(var a=document.getElementById("CURRICULUM_RECORD_TABLE_BODY");a.firstChild;)a.removeChild(a.firstChild);for(var c=0;c<gl_curriculumrecord_List.length;c++)show_curriculumrecord(a,(glCurrentPage-1)*LOAD_PAGE_NUM+c+1,gl_curriculumrecord_List[c])}
function show_curriculumrecord(a,c,b){var e=0;console.log("show_curriculumrecord() curriculumid:"+b.curriculumid);console.log("show_curriculumrecord() userid:"+b.userid);var f=get_curriculum(b.curriculumid);if(null==f)return 0;var d=document.createElement("tr");d.setAttribute("id",b.id+"_TABLE_ROW");a.appendChild(d);1==c%2&&d.setAttribute("bgcolor","#ebebe0");var g=document.createElement("tr");g.setAttribute("id",b.id+"_TABLE_ROW_EXTRA");a.appendChild(g);d.appendChild(document.createElement("td"));
d.cells[e].appendChild(document.createTextNode(""+c));e++;d.appendChild(document.createElement("td"));a=getCurriculumTypeName(f.typeid)+" ["+f.number+"]";c=document.createElement("div");c.setAttribute("id","curriculum_"+b.id);c.appendChild(document.createTextNode(a));d.cells[e].appendChild(c);e++;d.appendChild(document.createElement("td"));d.cells[e].appendChild(create_date_picker("\u958b\u59cb:","startdate_"+b.id,b.startdate,!1));d.cells[e].appendChild(create_date_picker("\u7d50\u675f:","enddate_"+
b.id,b.enddate,!1));e++;d.appendChild(document.createElement("td"));d.cells[e].appendChild(create_time_select("\u958b\u59cb:","starttime_"+b.id,b.starttime,!1));d.cells[e].appendChild(create_time_select("\u7d50\u675f:","endtime_"+b.id,b.endtime,!1));e++;d.appendChild(document.createElement("td"));a=create_weekday_select("weekday_"+b.id,b.id,b.weekday,!1);d.cells[e].appendChild(a);e++;d.appendChild(document.createElement("td"));a=document.createElement("div");a.setAttribute("id","text_totalhours_"+
b.id);a.appendChild(document.createTextNode(b.totalhours));d.cells[e].appendChild(a);e++;d.appendChild(document.createElement("td"));a=document.createElement("div");a.setAttribute("id","text_location_"+b.id);a.appendChild(document.createTextNode(b.location));d.cells[e].appendChild(a);e++;d.appendChild(document.createElement("td"));a=document.createElement("div");a.setAttribute("id","text_description_"+b.id);a.appendChild(document.createTextNode(b.description));d.cells[e].appendChild(a);e++;d.appendChild(document.createElement("td"));
a=document.createElement("div");a.setAttribute("id","text_teacher_"+b.id);c=document.createElement("div");c.innerHTML=linkify(b.teacher);a.appendChild(c);d.cells[e].appendChild(a);e++;d.appendChild(document.createElement("td"));a=document.createElement("div");a.setAttribute("id","text_cost_"+b.id);a.appendChild(document.createTextNode(b.cost));d.cells[e].appendChild(a);e++;d.appendChild(document.createElement("td"));a=document.createElement("div");a.setAttribute("id","text_note_"+b.id);a.appendChild(document.createTextNode(b.note));
d.cells[e].appendChild(a);e++;d.appendChild(document.createElement("td"));a=document.createElement("div");a.setAttribute("id","storage_file_"+b.id);0<b.files.length&&fetch_storage_file(b.id,b.files);d.cells[e].appendChild(a);e++;d.appendChild(document.createElement("td"));a=document.createElement("span");a.setAttribute("id","onoffstatus_"+b.id);d.cells[e].appendChild(a);c=document.createElement("span");0==b.status?(c.textContent="\u505c\u6b62\u9078\u8ab2",c.setAttribute("class","badge bg-red")):1==
b.status&&(c.textContent="\u958b\u653e\u9078\u8ab2",c.setAttribute("class","badge bg-green"));a.appendChild(c);e++;d.appendChild(document.createElement("td"));a=document.createElement("button");a.setAttribute("id","edit_curriculumrecord_btn_"+b.id);a.setAttribute("title","Edit this Curriculum Record");a.setAttribute("href","javascript:;");a.setAttribute("onclick","edit_curriculumrecord("+b.id+");return false;");c=document.createElement("i");c.setAttribute("id","edit_curriculumrecord_img_"+b.id);c.setAttribute("class",
"fa fa-edit");a.appendChild(c);d.cells[e].appendChild(a);return 1}function confirm_delete_curriculumrecord(a){confirm("Are you sure you want to delete this Curriculum Record ?")&&delete_curriculumrecord(a)}
function delete_curriculumrecord(a){var c={};c.project_id=""+project_id;c.delete_curriculumrecord=1;c.id=a;jQuery.ajax({url:gl_target_server+"/php/curriculum.php",type:"POST",data:c,success:function(a){400==a.status&&alert("update Error! response = "+JSON.stringify(a));setTimeout(reload_curriculumrecords,300)},error:function(a,c,f){alert("error = "+f);alert("xhr.responseText = "+a.responseText)}})}
function create_time_item(a){var c=document.createElement("div"),b=document.createElement("span");b.setAttribute("class","badge bg-yellow-active");b.textContent=a;c.appendChild(b);return c}function create_applyuser_label(a){var c=document.createElement("span");c.setAttribute("style","display:inline;padding:.2em .3em .3em;font-size:95%;font-weight:700;line-height:2;position:relative;top:-1px;color:#fff;border-radius:2px;white-space:nowrap;background-color:#f39c12;");c.textContent=a;return c}
function create_input_text(a,c){var b=document.createElement("textarea");b.setAttribute("rows","1");b.setAttribute("id",a);b.setAttribute("style","width: 120px;");b.textContent=c;return b}function getCurriculumTypeName(a){for(var c="",b=0;b<gl_curriculumtype_List.length;b++){var e=gl_curriculumtype_List[b];if(a==e.id){c=e.name;break}}return c}
function create_date_picker(a,c,b,e){var f=document.createElement("div");f.setAttribute("style","width:150px;");var d=document.createElement("div");d.setAttribute("class","input-group");f.appendChild(d);var g=document.createElement("div");g.setAttribute("class","input-group-addon");g.innerHTML=a;d.appendChild(g);a=document.createElement("input");a.setAttribute("type","text");a.setAttribute("id",c);a.setAttribute("style","width:100px;");a.setAttribute("readonly","readonly");e&&a.setAttribute("class",
"datepicker");a.setAttribute("data-date-format","yyyy-mm-dd");a.setAttribute("value",b);d.appendChild(a);return f}function create_time_select(a,c,b,e){var f=document.createElement("div");f.appendChild(create_time_picker(a,c,b,e));return f}
function create_time_picker(a,c,b,e){var f=document.createElement("div");f.setAttribute("class","bootstrap-timepicker");f.setAttribute("style","width:180px;");var d=document.createElement("div");d.setAttribute("class","input-group");f.appendChild(d);var g=document.createElement("div");g.setAttribute("class","input-group-addon");g.innerHTML=a;d.appendChild(g);a=document.createElement("input");a.setAttribute("type","text");a.setAttribute("id",c);a.setAttribute("readonly","readonly");e?a.setAttribute("class",
"form-control timepicker"):a.setAttribute("class","form-control");a.setAttribute("value",b);d.appendChild(a);return f}function create_weekday_select(a,c,b,e){var f=document.createElement("div");f.setAttribute("id",a);a=create_weekday_ui(c,b,e);f.appendChild(a);return f}
function create_weekday_ui(a,c,b){var e=document.createElement("div");e.setAttribute("class","box");e.setAttribute("style","background-image: linear-gradient(to bottom, #a9dbde, #e4eded);");var f=document.createElement("div");f.setAttribute("class","box-header with-border");e.appendChild(f);var d=document.createElement("div");d.appendChild(document.createTextNode("\u8ab2\u7a0b\u9031\u9593\u65e5"));d.setAttribute("style","text-align:center;");f.appendChild(d);d=document.createElement("div");d.setAttribute("class",
"box-body no-padding");e.appendChild(d);f=document.createElement("table");f.setAttribute("class","table table-bordered");f.setAttribute("style","background-image: linear-gradient(to bottom, #e4eded, #e4eded);");d.appendChild(f);d=document.createElement("thead");f.appendChild(d);d=document.createElement("tr");f.appendChild(d);var g=document.createElement("th");g.textContent="\u4e00";d.appendChild(g);g=document.createElement("th");g.textContent="\u4e8c";d.appendChild(g);g=document.createElement("th");
g.textContent="\u4e09";d.appendChild(g);g=document.createElement("th");g.textContent="\u56db";d.appendChild(g);g=document.createElement("th");g.textContent="\u4e94";d.appendChild(g);g=document.createElement("th");g.textContent="\u516d";d.appendChild(g);g=document.createElement("th");g.textContent="\u65e5";d.appendChild(g);d=document.createElement("tbody");f.appendChild(d);f=document.createElement("tr");d.appendChild(f);for(d=1;7>=d;d++){var h=""+d;7==d&&(h="0");var k=!1;0<=c.indexOf(h)&&(k=!0);g=
document.createElement("td");h=create_checkbox(a,h,k,b);g.appendChild(h);f.appendChild(g)}return e}function create_checkbox(a,c,b,e){var f=document.createElement("input");f.setAttribute("id","uiid_checkbox_"+c+"_"+a);f.setAttribute("type","checkbox");b&&f.setAttribute("checked",b);e||f.setAttribute("disabled",!0);return f}
function fetch_storage_file(a,c){$.getJSON(gl_target_server+"/php/storage.php","loadsinglefile=1&project_id="+project_id+"&fileuid="+c,function(b){b=create_data_file(b.id,b.filename,b.filetype,b.filesize);document.getElementById("storage_file_"+a).appendChild(b)}).success(function(){}).error(function(){}).complete(function(){})}function convertFileSize(a){return 1048576<a?(Math.round(100*a/1048576)/100).toString()+"MB":(Math.round(100*a/1024)/100).toString()+"KB"}
function create_data_file(a,c,b,e){var f=document.createElement("ul");f.setAttribute("class","mailbox-attachments clearfix");var d=document.createElement("li");f.appendChild(d);var g=document.createElement("span");g.setAttribute("class","mailbox-attachment-icon");d.appendChild(g);g.appendChild(create_filetype_icon(b));b=document.createElement("div");b.setAttribute("class","mailbox-attachment-info");d.appendChild(b);d=document.createElement("a");d.setAttribute("href","/php/downloadfile.php?project_id="+
project_id+"&fileid="+a);d.setAttribute("class","mailbox-attachment-name");b.appendChild(d);b=document.createElement("i");b.setAttribute("class","fa fa-paperclip");d.appendChild(b);d.appendChild(document.createTextNode("  "+c));c=document.createElement("span");c.setAttribute("class","mailbox-attachment-size");c.textContent=convertFileSize(parseInt(e));d.appendChild(c);e=document.createElement("a");e.setAttribute("href","/php/downloadfile.php?project_id="+project_id+"&fileid="+a);e.setAttribute("class",
"btn btn-default btn-xs pull-right");c.appendChild(e);a=document.createElement("i");a.setAttribute("class","fa fa-cloud-download");e.appendChild(a);return f}
function create_filetype_icon(a){var c=document.createElement("i");a.includes("video")?c.setAttribute("class","fa fa-file-movie-o"):a.includes("audio")?c.setAttribute("class","fa fa-file-audio-o"):a.includes("application/pdf")?c.setAttribute("class","fa fa-file-pdf-o"):a.includes("application/zip")?c.setAttribute("class","fa fa-file-zip-o"):a.includes("ms-excel")?c.setAttribute("class","fa fa-file-excel-o"):a.includes("officedocument.wordprocessingml.document")?c.setAttribute("class","fa fa-file-word-o"):
a.includes("officedocument.presentationml.presentation")?c.setAttribute("class","fa fa-file-powerpoint-o"):a.includes("image")?c.setAttribute("class","fa fa-file-photo-o"):c.setAttribute("class","fa fa-file");return c}function reload_curriculumrecords(){PreLoadIndex=0;CurrentLoadIndex=1;setTimeout(check_loading_status,50)}function get_curriculum(a){for(var c=0;c<gl_curriculum_List.length;c++){var b=gl_curriculum_List[c];if(b.id==a)return b}return null}
function clearChildView(a){a=document.getElementById(a);if(null!=a)for(;a.firstChild;)a.removeChild(a.firstChild);return a}function isNumeric(a){return""!==a&&!isNaN(parseFloat(a))&&isFinite(a)}
function linkify(a){a=a.replace(/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,'<a href="$1" target="_blank">$1</a>');a=a.replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,'$1<a href="http://$2" target="_blank">$2</a>');return a=a.replace(/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim,'<a href="mailto:$1">$1</a>')}
function move_page_backward(){var a=document.getElementById("id_current_page_num");1>=glCurrentPage||(glCurrentPage--,a.textContent=glCurrentPage,PreLoadIndex=0,CurrentLoadIndex=1,check_loading_status())}function move_page_forward(){var a=document.getElementById("id_current_page_num");glCurrentPage++;a.textContent=glCurrentPage;PreLoadIndex=0;CurrentLoadIndex=1;check_loading_status()}
function open_curriculumrecords_page(){window.open("/index.php/vilscurriculumrecords/"+project_id,"_blank").focus()};
