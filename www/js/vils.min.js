var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var b=0,d={next:function(){if(b<a.length){var g=b++;return{value:c(g,a[g]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var g=a[d];g in b||(b[g]={});b=b[g]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");update_app_version_and_pid_loop();load_All_config();load_system_time();
function load_All_config(){$.getJSON(gl_target_server+"/php/configvils.php","loadallconfig=1&project_id="+project_id,function(a){var c=[];$.each(a,function(a,b){c[parseInt(a)]=b});a=c[project_id];null!=a?document.getElementById("curProjectName").innerHTML=" "+a.PROJECT_NAME:document.getElementById("curProjectName").innerHTML=" ";a=Object.keys(c).length;document.getElementById("totalProjects").innerHTML="You have "+a+" projects";document.getElementById("curUserName").innerHTML=" "+accountname;for(var b in c)add_project_to_menu(c[b])})}
function fetch_current_app_version(){$.getJSON(gl_target_server+"/php/pkgversion.php","project_id="+project_id,function(a){document.getElementById("appversion").innerText=a.version;document.getElementById("apppid").innerText="PID:"+a.pid});return!1}
function sync_ERP_account(){var a="syncERPaccount=1&project_id="+project_id,c=gl_target_server+"/login.php";console.log("sync_ERP_account() "+c);jQuery.ajax({url:c,type:"POST",data:a,dataType:"text",success:function(a){console.log("sync_ERP_account() response:"+a)}});return!1}
function get_qrcode(a,c){var b="loadqrcode=1&type=USER&iaccountid="+a+"&id="+c+"&project_id="+project_id,d=gl_target_server+"/php/configvils.php";console.log("get_qrcode() "+d);jQuery.ajax({url:d,type:"POST",data:b,dataType:"text",success:function(a){a=JSON.parse(a);document.getElementById("qrcode_ui").setAttribute("src",a.qrcode)}});return!1}
function get_pdf_report(a){a="loadpdfreport=1&type=USER&id="+a+"&project_id="+project_id;var c=gl_target_server+"/php/configvils.php";console.log("get_pdf_report() "+c);for(var b=document.getElementById("pdf_report_dl_link");b.firstChild;)b.removeChild(b.firstChild);var d=document.createElement("span");d.textContent="\u7522\u751f\u5831\u8868\u4e2d...";b.appendChild(d);jQuery.ajax({url:c,type:"POST",data:a,dataType:"text",success:function(a){var b=JSON.parse(a);console.log("get_pdf_report() success:"+
b.success+" pdfreport:"+b.pdfreport);for(var c=document.getElementById("pdf_report_dl_link");c.firstChild;)c.removeChild(c.firstChild);a=document.createElement("a");a.setAttribute("href",b.pdfreport);a.setAttribute("target","_blank");a.textContent="\u4e0b\u8f09\u5831\u8868";c.appendChild(a);b=document.createElement("i");b.setAttribute("class","fa fa-file-pdf-o");a.appendChild(b)}});return!1}
function add_project_to_menu(a){if(null!=a){var c=document.getElementById("ProjectListMenu"),b=document.createElement("li");c.appendChild(b);c=document.createElement("a");c.setAttribute("href","/index.php/"+parseInt(a.PROJECT_ID));b.appendChild(c);b=document.createElement("div");b.setAttribute("class","pull-left");c.appendChild(b);var d=document.createElement("img");d.setAttribute("src","/images/VILS_logo_m.png");d.setAttribute("class","img-circle");d.setAttribute("alt","User Image");b.appendChild(d);
b=document.createElement("h4");b.textContent=a.PROJECT_NAME;c.appendChild(b);b=document.createElement("p");b.textContent=a.PROJECT_DESCRIPTION;c.appendChild(b)}}
function create_new_project(a){jQuery.ajax({url:gl_target_server+"/php/configvils.php",type:"POST",data:{create_new_project:1},success:function(a){console.log("response="+a);a=JSON.parse(a);window.location="/index.php/"+parseInt(a.PROJECT_ID)},error:function(a,b,d){alert("error = "+d);alert("xhr.responseText = "+a.responseText)}});return!1}function show_dashboard(a){document.getElementById("contentIframe").src="/index.php/vilsdashboard/"+a;show_treeview("dashboard")}
function show_devices(a){document.getElementById("contentIframe").src="/index.php/vilsdevices/"+a;show_treeview("devices")}function show_rfiddevices(a){document.getElementById("contentIframe").src="/index.php/vilsrfiddevices/"+a;show_treeview("rfiddevices")}function show_rfidcards(a){document.getElementById("contentIframe").src="/index.php/vilsrfidcards/"+a;show_treeview("rfiddevices")}
function show_userinfo(a){document.getElementById("contentIframe").src="/index.php/vilsuserinfo/"+a;show_treeview("userinfo")}function show_userregister(a){document.getElementById("contentIframe").src="/index.php/vilsuserregister/"+a;show_treeview("userinfo")}function show_usergroupinfo(a){document.getElementById("contentIframe").src="/index.php/vilsusergroupinfo/"+a;show_treeview("userinfo")}
function show_usersubgroup_unlockpage(a){document.getElementById("contentIframe").src="/index.php/vilsunlockpage/"+a;show_treeview("userinfo")}function show_usersubgroupinfo(a){document.getElementById("contentIframe").src="/index.php/vilsusersubgroupinfo/"+a;show_treeview("userinfo")}function show_usermaingroupinfo(a){document.getElementById("contentIframe").src="/index.php/vilsusermaingroupinfo/"+a;show_treeview("userinfo")}
function show_carddrollcall_schedule(a){document.getElementById("contentIframe").src="/index.php/vilscardrollcall/"+a;show_treeview("cardrollcall")}function show_cardrollcall_event(a){document.getElementById("contentIframe").src="/index.php/vilscardrollcallevent/"+a;show_treeview("cardrollcall")}function show_carddrollcall_schedule_unlockpage(a){document.getElementById("contentIframe").src="/index.php/vilsunlockpage/"+a;show_treeview("cardrollcall")}
function show_cardrollcall_event_unlockpage(a){document.getElementById("contentIframe").src="/index.php/vilsunlockpage/"+a;show_treeview("cardrollcall")}function show_cardrollcall_record(a){document.getElementById("contentIframe").src="/index.php/vilscardrollcallrecord/"+a;show_treeview("cardrollcall")}function show_userrollcall_record(a){document.getElementById("contentIframe").src="/index.php/vilsuserrollcallrecord/"+a;show_treeview("cardrollcall")}
function show_nfc_cardscan_result(a){document.getElementById("contentIframe").src="/index.php/vilscardscannfcresult/"+a;show_treeview("cardscanresult")}function show_uhf_cardscan_result(a){document.getElementById("contentIframe").src="/index.php/vilscardscanuhfresult/"+a;show_treeview("cardscanresult")}function show_nfc_cardscan_result_unlockpage(a){document.getElementById("contentIframe").src="/index.php/vilsunlockpage/"+a;show_treeview("cardscanresult")}
function show_uhf_cardscan_result_unlockpage(a){document.getElementById("contentIframe").src="/index.php/vilsunlockpage/"+a;show_treeview("cardscanresult")}function show_bodyinfo(a){document.getElementById("contentIframe").src="/index.php/vilsbodyinfo/"+a;show_treeview("bodyinfo")}function show_bodyinfo_record(a){document.getElementById("contentIframe").src="/index.php/vilsbodyinforecord/"+a;show_treeview("bodyinfo")}
function show_bodyinfo_manual_input(a){document.getElementById("contentIframe").src="/index.php/vilsbodyinfomanualinput/"+a;show_treeview("bodyinfo")}function show_foracare(a){document.getElementById("contentIframe").src="/index.php/vilsbodyinfoforacare/"+a;show_treeview("bodyinfo")}function show_pushnotification(a){document.getElementById("contentIframe").src="/index.php/vilspushnotification/"+a;show_treeview("pushnotification")}
function show_pushnotification_records(a){document.getElementById("contentIframe").src="/index.php/vilspushnotificationrecords/"+a;show_treeview("pushnotification")}function show_survey(a){document.getElementById("contentIframe").src="/index.php/vilssurvey/"+a;show_treeview("workassign")}function show_survey_records(a){document.getElementById("contentIframe").src="/index.php/vilssurveyrecords/"+a;show_treeview("workassign")}
function show_assist(a){document.getElementById("contentIframe").src="/index.php/vilsassist/"+a;show_treeview("workassign")}function show_assist_records(a){document.getElementById("contentIframe").src="/index.php/vilsassistrecords/"+a;show_treeview("workassign")}function show_billboard(a){document.getElementById("contentIframe").src="/index.php/vilsbillboard/"+a;show_treeview("billboard")}
function show_billboard_records(a){document.getElementById("contentIframe").src="/index.php/vilsbillboardrecords/"+a;show_treeview("billboard")}function show_curriculum(a){document.getElementById("contentIframe").src="/index.php/vilscurriculum/"+a;show_treeview("curriculum")}function show_curriculum_records(a){document.getElementById("contentIframe").src="/index.php/vilscurriculumrecords/"+a;show_treeview("curriculum")}
function show_location(){document.getElementById("contentIframe").src="/index.php/vilslocation/"+project_id;show_treeview("location")}function show_ranging(a){document.getElementById("contentIframe").src="/index.php/vilsranging/"+a;show_treeview("ranging")}function show_2dmap(a){document.getElementById("contentIframe").src="/index.php/vils2dmap/"+a;show_treeview("2dmap")}function show_3dmap(a){document.getElementById("contentIframe").src="/index.php/vils3dmap/"+a;show_treeview("3dmap")}
function show_fieldcontrol(a){document.getElementById("contentIframe").src="/index.php/vilsfieldcontrol/"+a;show_treeview("fieldcontrol")}function show_firefighting_create(a){document.getElementById("contentIframe").src="/index.php/vilsfirefightingcreate/"+a;show_treeview("firefighting")}function show_firefighting_record(a){document.getElementById("contentIframe").src="/index.php/vilsfirefightingrecord/"+a;show_treeview("firefighting")}
function show_firefighting_history(a){document.getElementById("contentIframe").src="/index.php/vilsfirefightinghistory/"+a;show_treeview("firefighting")}function show_firefighting_report(a){document.getElementById("contentIframe").src="/index.php/vilsfirefightingreport/"+a;show_treeview("firefighting")}function show_versionhistory(a){document.getElementById("contentIframe").src="/index.php/vilsversionhistory/"+a;show_treeview("versionhistory")}
function show_activity(a){document.getElementById("contentIframe").src="/index.php/vilsactivity/"+a;show_treeview("activity")}function show_maintenance(a){document.getElementById("contentIframe").src="/index.php/vilsmaintenance/"+a;show_treeview("maintenance")}function show_events(a){document.getElementById("contentIframe").src="/index.php/vilsevents/"+a;show_treeview("events")}
function show_courses(a){document.getElementById("contentIframe").src="/index.php/vilscourses/"+a;show_treeview("courses")}function show_weekschedule(a){document.getElementById("contentIframe").src="/index.php/vilsweekschedule/"+a;show_treeview("weekschedule")}function show_applicationform_leave(a){document.getElementById("contentIframe").src="/index.php/vilsapplicationformleave/"+a;show_treeview("applicationform")}
function show_footprint_tags(a){document.getElementById("contentIframe").src="/index.php/vilsfootprinttags/"+a;show_treeview("footprint")}function show_footprint_Courses(a){document.getElementById("contentIframe").src="/index.php/vilsfootprintcourses/"+a;show_treeview("footprint")}function show_footprint_Areas(a){document.getElementById("contentIframe").src="/index.php/vilsfootprintareas/"+a;show_treeview("footprint")}
function show_footprint_InOutArea(a){document.getElementById("contentIframe").src="/index.php/vilsfootprintinout/"+a;show_treeview("footprint")}function show_footprint_GPS(a){document.getElementById("contentIframe").src="/index.php/vilsfootprintgps/"+a;show_treeview("footprint")}function show_footprint(a){document.getElementById("contentIframe").src="/index.php/vilsfootprint/"+a;show_treeview("footprint")}
function show_eventtimeline(a){document.getElementById("contentIframe").src="/index.php/vilseventtimeline/"+a;show_treeview("eventtimeline")}function show_inspection_report(a){document.getElementById("contentIframe").src="/index.php/vilsinspectionreport/"+a;show_treeview("inspection")}function show_inspection_setting(a){document.getElementById("contentIframe").src="/index.php/vilsinspection/"+a;show_treeview("inspection")}
function show_inspection_record(a){document.getElementById("contentIframe").src="/index.php/vilsinspectionrecord/"+a;show_treeview("inspection")}function show_inspection_history(a){document.getElementById("contentIframe").src="/index.php/vilsinspectionhistory/"+a;show_treeview("inspection")}function show_sections(a){document.getElementById("contentIframe").src="/index.php/vilssections/"+a;show_treeview("sections")}
function show_fencealert(a){document.getElementById("contentIframe").src="/index.php/vilsfencealert/"+a;show_treeview("fencealert")}function show_filestorage_image(a){document.getElementById("contentIframe").src="/index.php/vilsstorageimage/"+a;show_treeview("filestorage")}function show_filestorage_file(a){document.getElementById("contentIframe").src="/index.php/vilsstoragefile/"+a;show_treeview("filestorage")}
function show_settings(a){document.getElementById("contentIframe").src="/index.php/vilssettings/"+a;show_treeview("settings")}function show_disetting(a){document.getElementById("contentIframe").src="/index.php/vilsdisetting/"+a;show_treeview("disetting")}function show_pushnotify(a){document.getElementById("contentIframe").src="/index.php/vilspushnotify/"+a;show_treeview("pushnotify")}
function show_diagnosis(a){document.getElementById("contentIframe").src="/index.php/vilsdiagnosis/"+a;show_treeview("diagnosis")}function show_analyzer(a){document.getElementById("contentIframe").src="/index.php/vilsanalyzer/"+a;show_treeview("analyzer")}
function show_treeview(a){null!=document.getElementById("treeview_dashboard")&&document.getElementById("treeview_dashboard").classList.remove("active");null!=document.getElementById("treeview_devices")&&document.getElementById("treeview_devices").classList.remove("active");null!=document.getElementById("treeview_rfiddevices")&&document.getElementById("treeview_rfiddevices").classList.remove("active");null!=document.getElementById("treeview_rfiddevices")&&document.getElementById("treeview_userinfo").classList.remove("active");
null!=document.getElementById("treeview_cardrollcall")&&document.getElementById("treeview_cardrollcall").classList.remove("active");null!=document.getElementById("treeview_cardscanresult")&&document.getElementById("treeview_cardscanresult").classList.remove("active");null!=document.getElementById("treeview_bodyinfo")&&document.getElementById("treeview_bodyinfo").classList.remove("active");null!=document.getElementById("treeview_pushnotification")&&document.getElementById("treeview_pushnotification").classList.remove("active");
null!=document.getElementById("treeview_location")&&document.getElementById("treeview_location").classList.remove("active");null!=document.getElementById("treeview_ranging")&&document.getElementById("treeview_ranging").classList.remove("active");null!=document.getElementById("treeview_2dmap")&&document.getElementById("treeview_2dmap").classList.remove("active");null!=document.getElementById("treeview_3dmap")&&document.getElementById("treeview_3dmap").classList.remove("active");null!=document.getElementById("treeview_fieldcontrol")&&
document.getElementById("treeview_fieldcontrol").classList.remove("active");null!=document.getElementById("treeview_firefighting")&&document.getElementById("treeview_firefighting").classList.remove("active");null!=document.getElementById("treeview_versionhistory")&&document.getElementById("treeview_versionhistory").classList.remove("active");null!=document.getElementById("treeview_activity")&&document.getElementById("treeview_activity").classList.remove("active");null!=document.getElementById("treeview_maintenance")&&
document.getElementById("treeview_maintenance").classList.remove("active");null!=document.getElementById("treeview_events")&&document.getElementById("treeview_events").classList.remove("active");null!=document.getElementById("treeview_workassign")&&document.getElementById("treeview_workassign").classList.remove("active");null!=document.getElementById("treeview_billboard")&&document.getElementById("treeview_billboard").classList.remove("active");null!=document.getElementById("treeview_curriculum")&&
document.getElementById("treeview_curriculum").classList.remove("active");null!=document.getElementById("treeview_courses")&&document.getElementById("treeview_courses").classList.remove("active");null!=document.getElementById("treeview_weekschedule")&&document.getElementById("treeview_weekschedule").classList.remove("active");null!=document.getElementById("treeview_applicationform")&&document.getElementById("treeview_applicationform").classList.remove("active");null!=document.getElementById("treeview_footprint")&&
document.getElementById("treeview_footprint").classList.remove("active");null!=document.getElementById("treeview_inspection")&&document.getElementById("treeview_inspection").classList.remove("active");null!=document.getElementById("treeview_sections")&&document.getElementById("treeview_sections").classList.remove("active");null!=document.getElementById("treeview_fencealert")&&document.getElementById("treeview_fencealert").classList.remove("active");null!=document.getElementById("treeview_filestorage")&&
document.getElementById("treeview_filestorage").classList.remove("active");null!=document.getElementById("treeview_settings")&&document.getElementById("treeview_settings").classList.remove("active");null!=document.getElementById("treeview_disetting")&&document.getElementById("treeview_disetting").classList.remove("active");null!=document.getElementById("treeview_diagnosis")&&document.getElementById("treeview_diagnosis").classList.remove("active");null!=document.getElementById("treeview_analyzer")&&
document.getElementById("treeview_analyzer").classList.remove("active");null!=document.getElementById("treeview_pushnotify")&&document.getElementById("treeview_pushnotify").classList.remove("active");var c=document.getElementById("main_left_frame"),b=document.getElementById("main_right_frame"),d=!0;"dashboard"==a&&(console.log("show_treeview() type == 'dashboard'"),document.getElementById("treeview_dashboard").classList.add("active"));"devices"==a&&document.getElementById("treeview_devices").classList.add("active");
"rfiddevices"==a&&document.getElementById("treeview_rfiddevices").classList.add("active");"userinfo"==a&&document.getElementById("treeview_userinfo").classList.add("active");"cardrollcall"==a&&document.getElementById("treeview_cardrollcall").classList.add("active");"cardscanresult"==a&&document.getElementById("treeview_cardscanresult").classList.add("active");"bodyinfo"==a&&document.getElementById("treeview_bodyinfo").classList.add("active");"pushnotification"==a&&document.getElementById("treeview_pushnotification").classList.add("active");
"location"==a&&document.getElementById("treeview_location").classList.add("active");"ranging"==a&&document.getElementById("treeview_ranging").classList.add("active");"2dmap"==a&&document.getElementById("treeview_2dmap").classList.add("active");"3dmap"==a&&document.getElementById("treeview_3dmap").classList.add("active");"fieldcontrol"==a&&document.getElementById("treeview_fieldcontrol").classList.add("active");"firefighting"==a&&document.getElementById("treeview_firefighting").classList.add("active");
"versionhistory"==a&&document.getElementById("treeview_versionhistory").classList.add("active");"activity"==a&&(document.getElementById("treeview_activity").classList.add("active"),d=!1);"maintenance"==a&&(document.getElementById("treeview_maintenance").classList.add("active"),d=!1);"events"==a&&(document.getElementById("treeview_events").classList.add("active"),d=!1);"courses"==a&&(document.getElementById("treeview_courses").classList.add("active"),d=!1);"workassign"==a&&document.getElementById("treeview_workassign").classList.add("active");
"billboard"==a&&document.getElementById("treeview_billboard").classList.add("active");"curriculum"==a&&document.getElementById("treeview_curriculum").classList.add("active");"weekschedule"==a&&(document.getElementById("treeview_weekschedule").classList.add("active"),d=!1);"applicationform"==a&&(document.getElementById("treeview_applicationform").classList.add("active"),d=!1);"footprint"==a&&(document.getElementById("treeview_footprint").classList.add("active"),d=!1);"inspection"==a&&(document.getElementById("treeview_inspection").classList.add("active"),
d=!1);"sections"==a&&(document.getElementById("treeview_sections").classList.add("active"),d=!1);"fencealert"==a&&(document.getElementById("treeview_fencealert").classList.add("active"),d=!1);"filestorage"==a&&(document.getElementById("treeview_filestorage").classList.add("active"),d=!1);"settings"==a&&(document.getElementById("treeview_settings").classList.add("active"),d=!1);"disetting"==a&&(document.getElementById("treeview_disetting").classList.add("active"),d=!1);"pushnotify"==a&&(document.getElementById("treeview_pushnotify").classList.add("active"),
d=!1);"diagnosis"==a&&(document.getElementById("treeview_diagnosis").classList.add("active"),d=!1);"analyzer"==a&&(document.getElementById("treeview_analyzer").classList.add("active"),d=!1);0==d?(c.setAttribute("class","col-md-12 col-sm-12"),b.setAttribute("class","col-md-0 col-sm-0"),document.getElementById("rightcontentIframe").style.display="none"):(c.setAttribute("class","col-md-8 col-sm-8"),b.setAttribute("class","col-md-4 col-sm-4"),document.getElementById("rightcontentIframe").style.display=
"block")}function send_pushnotification(a,c,b,d){document.getElementById("contentIframe").src="/index.php/vilspushnotification/"+project_id+"?nodeid="+c+"&title="+b+"&message="+d;show_treeview("pushnotification")}function update_app_version_and_pid_loop(){fetch_current_app_version();setTimeout(update_app_version_and_pid_loop,1E4)}var gl_system_time;
function update_system_time(){gl_system_time.add(1,"seconds");document.getElementById("system_time").innerHTML=gl_system_time.format("YYYY/MM/DD HH:mm:ss");setTimeout(update_system_time,1E3)}function load_system_time(){$.getJSON(gl_target_server+"/php/pkgversion.php","fetchsystemtime=1",function(a){gl_system_time=moment(a.systemtime);document.getElementById("system_time").innerHTML=gl_system_time.format("YYYY/MM/DD HH:mm:ss")}).complete(function(){setTimeout(update_system_time,1E3)})}
var refreshSession=function(){var a=gl_target_server+"/php/refresh_session.php";setTimeout(function(){$.ajax({url:a,cache:!1,complete:function(){refreshSession()}})},6E5)};refreshSession();var firedEvents_count=10,firedEvents_offset=0,glUpdatetime_countdown=1;period_check_new_fired_events();function period_check_new_fired_events(){check_new_fired_events();setTimeout(period_check_new_fired_events,3E4)}function check_new_fired_events_countdown(a){0>=glUpdatetime_countdown&&(glUpdatetime_countdown=a,check_new_fired_events())}
function check_new_fired_events(){$.getJSON(gl_target_server+"/php/eventfire.php?project_id="+project_id+"&unread=1&prettystring=1&count="+firedEvents_count+"&offset="+firedEvents_offset,function(a){var c=0,b='<ul class="menu">';$.each(a,function(a,g){var f=g.eventjson,e=g.prettyjson;b+='<li><a href="javascript:void(0)" onclick="show_eventtimeline('+parseInt(g.projectid)+');return false;"></i>';b="Enter"==f.action?b+'<i class="fa fa-sign-in text-aqua"></i>':"Leave"==f.action?b+'<i class="fa fa-share-square-o text-yellow-active"></i>':
"Stay"==f.action?b+'<i class="fa fa-street-view text-aqua-active"></i>':"Alert"==f.action||"AlertTagNotMoving"==f.action||"AlertLayDown"==f.action?b+'<i class="fa fa-bell-o text-red"></i>':"Cancel"==f.action?b+'<i class="fa fa-bell-slash-o text-blue"></i>':"CallOut"==f.action?b+'<i class="fa fa-hand-paper-o text-green"></i>':"PowerOff"==f.action?b+'<i class="fa fa-flash text-red"></i>':"PowerOn"==f.action?b+'<i class="fa fa-flash text-green"></i>':"OpenDoor"==f.action?b+'<i class="fa fa-unlock text-red"></i>':
"CloseDoor"==f.action?b+'<i class="fa fa-lock text-green"></i>':"iCoverOpenDoor"==f.action?b+'<i class="fa fa-unlock text-red"></i>':"iCoverCloseDoor"==f.action?b+'<i class="fa fa-lock text-green"></i>':"EnterDoor"==f.action?b+'<i class="fa fa-sign-in text-red"></i>':"ExitDoor"==f.action?b+'<i class="fa fa-sign-out text-green"></i>':"SensorAlert"==f.action?b+'<i class="fa fa-rss text-red"></i>':"unknowncard"==f.action?b+'<i class="fa fa-warning text-red"></i>':"BodyInfoAlertNormal"==f.action?b+'<i class="fa fa-street-view text-green"></i>':
"BodyInfoAlertWarning"==f.action?b+'<i class="fa fa-street-view text-yellow"></i>':"BodyInfoAlertDanger"==f.action?b+'<i class="fa fa-street-view text-red"></i>':b+'<i class="fa fa-street-view text-yellow"></i>';"inspectionpoint"==e.type?(b+="&nbsp;&nbsp;"+e.tagname,b+="&nbsp;&nbsp;"+convert_action_name(e.actionname),b+="&nbsp;&nbsp;\u5de1\u6aa2\u9ede:"+e.inspectionpointname+"&nbsp;"):"inspectionpointtravel"==e.type?(0<e.tagname.length&&(b+="&nbsp;&nbsp;"+e.tagname),b+="&nbsp;&nbsp;"+convert_action_name(e.actionname)+
"&nbsp;",b+="\u5de1\u6aa2\u9ede:",null!=e.startinspectionpointname&&null!=e.endinspectionpointname?(b+=e.startinspectionpointname,b+="&nbsp;->",b+=e.endinspectionpointname):null!=e.startinspectionpointname?b+=e.startinspectionpointname:null!=e.endinspectionpointname&&(b+=e.endinspectionpointname)):"inspectionGroup"==e.type?(b+="&nbsp;&nbsp;"+e.groupname,b+="&nbsp;&nbsp;"+convert_action_name(e.actionname)+"&nbsp;"):"rfidcard"==e.type?b+="&nbsp;&nbsp;"+convert_action_name(e.actionname)+"&nbsp;":"nfccard"==
e.type?b+="&nbsp;&nbsp;"+convert_action_name(e.actionname)+"&nbsp;":(b+="&nbsp;&nbsp;"+e.nodename,0<e.locatorname.length&&e.locatorname!=e.nodename&&(b+="&nbsp;&nbsp;\u5728"+e.locatorname),b+="&nbsp;&nbsp;"+convert_action_name(e.actionname),0<e.areaname.length&&(b+="&nbsp;&nbsp;"+e.areaname));b+="</a></li>";c++});b+="</ul>";$(".firedevent_bubble_content-0").html(b);0==c?$("#main_top_event_num_bubble").hide():$("#main_top_event_num_bubble").show();$("#main_top_event_num_bubble").html(c);$("#main_top_event_num").html("You have "+
c+" notifications")}).error(function(){setTimeout(check_new_fired_events,3E3)}).complete(function(){glUpdatetime_countdown--;0<glUpdatetime_countdown&&setTimeout(check_new_fired_events,1E3)})}
function convert_action_name(a){return"Enter"==a?"\u9032\u5165":"Leave"==a?"\u96e2\u958b":"Stay"==a?"\u505c\u7559":"Alert"==a?"\u6309\u4e0b\u8b66\u6025\u6309\u9215":"AlertTagNotMoving"==a?"\u7121\u52d5\u4f5c\u8b66\u544a":"AlertLayDown"==a?"\u8eba\u81e5\u8b66\u544a":"Cancel"==a||"cancel"==a?"\u6309\u4e0b\u53d6\u6d88\u6309\u9215":"Finish"==a?"\u5b8c\u6210":"Exceed"==a?"\u8d85\u904e\u5de1\u6aa2\u6642\u9593":"shorttime"==a?"\u5de1\u6aa2\u6642\u9593\u904e\u77ed":"longtime"==a?"\u5de1\u6aa2\u6642\u9593\u904e\u9577":
"CallOut"==a?"\u6309\u4e0b\u547c\u63db\u9215":"PowerOff"==a?"\u62d4\u9664\u96fb\u6e90":"PowerOn"==a?"\u63a5\u901a\u96fb\u6e90":"OpenDoor"==a?"\u958b\u9580":"CloseDoor"==a?"\u95dc\u9580":"iCoverOpenDoor"==a?"\u7570\u5e38\u79fb\u52d5":"iCoverCloseDoor"==a?"\u5b9a\u6642\u56de\u5831":"EnterDoor"==a?"\u9032\u5165\u958b\u9580\u5340\u57df":"ExitDoor"==a?"\u96e2\u958b\u958b\u9580\u5340\u57df":"unknowncard"==a?"\u767c\u73fe\u672a\u8a3b\u518a\u5361\u7247":a}
function convert_IssueTime_name(a){return"Immediately"==a?"\u7acb\u523b":"1 minute"==a?"1\u5206\u9418":"5 minutes"==a?"5\u5206\u9418":"10 minutes"==a?"10\u5206\u9418":a};
