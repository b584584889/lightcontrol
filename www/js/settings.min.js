var glSystemConfig=[];load_current_config();load_system_config();load_system_status();
function load_current_config(){null!=document.getElementById("Local_Project_Name")&&(document.getElementById("Local_Project_Name").value="Loading...",document.getElementById("Local_Project_Desc").value="Loading...",document.getElementById("prjsavebtn").disabled=!0);$.getJSON(gl_target_server+"/php/configvils.php","loadconfig=1&project_id="+project_id,function(a){null!=document.getElementById("Local_Project_Name")&&(document.getElementById("Local_Project_Name").value=a.PROJECT_NAME,document.getElementById("Local_Project_Desc").value=
a.PROJECT_DESCRIPTION,document.getElementById("prjsavebtn").disabled=!1)})}
function load_system_config(){null!=document.getElementById("systemconfigformid")&&(document.getElementById("CenterWebPortInputText").value="Loading...",document.getElementById("CenterUdpPortInputText").value="Loading...",document.getElementById("CoordUdpPortInputText").value="Loading...",document.getElementById("CenterBroadcastPortInputText").value="Loading...",document.getElementById("CenterWebSocketPortInputText").value="Loading...",document.getElementById("TagAlertTimeoutInputText").value="Loading...",
document.getElementById("TagVoltageLowInputText").value="Loading...",document.getElementById("VILSServerInputText").value="Loading...",document.getElementById("ERPServerInputText").value="Loading...",document.getElementById("SSOIPInputText").value="Loading...",document.getElementById("systemconfigupdatebtn").disabled=!0);null!=document.getElementById("algorithmconfigformid")&&(document.getElementById("ValidDataTimeInputText").value="Loading...",document.getElementById("MaxRangingDistanceInputText").value=
"Loading...",document.getElementById("NoiseMakupCheckBtn").checked=!1,document.getElementById("NoiseMakupRatioInputText").value="Loading...",document.getElementById("NoiseMakupWeightInputText").value="Loading...",document.getElementById("EnableKalman1DCheckBtn").checked=!1,document.getElementById("EnableRangingReliabilityCheckBtn").checked=!1,document.getElementById("RangingReliabilityMaxDistanceInputText").value="Loading...",document.getElementById("RangingReliabilityMinCountInputText").value="Loading...",
document.getElementById("RangingReliabilityAverageDiffInputText").value="Loading...",document.getElementById("Anchor1DMappingCheckBtn").checked=!1,document.getElementById("OneAnchorCalculationCheckBtn").checked=!1,document.getElementById("GDOPresolveCheckBtn").checked=!1,document.getElementById("GDOPThresholdInputText").value="Loading...",document.getElementById("IMUVelocityCheckBtn").checked=!1,document.getElementById("IMUVelocityOffsetInputText").value="Loading...",document.getElementById("SteadyStateOffsetInputText").value=
"Loading...",document.getElementById("StayInWallTimeoutInputText").value="Loading...",document.getElementById("EnableFixHeightCheckBtn").checked=!1,document.getElementById("optionsPositionAlgorithm1").checked=!1,document.getElementById("optionsPositionAlgorithm2").checked=!1,document.getElementById("optionsPositionAlgorithm3").checked=!1,document.getElementById("WeightMovingAverageInputText1").value="Loading...",document.getElementById("WeightMovingAverageInputText2").value="Loading...",document.getElementById("WeightMovingAverageInputText3").value=
"Loading...",document.getElementById("SmoothingResultCheckBtn").checked=!1,document.getElementById("SmoothingResultOffsetInputText").value="Loading...",document.getElementById("SmoothingResultStepInputText").value="Loading...",document.getElementById("SmoothingResultFirstStateOffsetRatioInputText").value="Loading...",document.getElementById("SmoothingResultFirstStateRunTimeInputText").value="Loading...",document.getElementById("SmoothingResultSecondStateOffsetRatioInputText").value="Loading...",document.getElementById("SmoothingResultSecondStateRunTimeInputText").value=
"Loading...",document.getElementById("algorithmconfigupdatebtn").disabled=!0);null!=document.getElementById("lorawanconfigformid")&&(document.getElementById("LoRAWANTPOICInputText").value="Loading...",document.getElementById("MQTTHostIpInputText").value="Loading...",document.getElementById("MQTTHostPortInputText").value="Loading...",document.getElementById("MQTTHostUsernameInputText").value="Loading...",document.getElementById("MQTTHostPasswordInputText").value="Loading...",document.getElementById("MQTTClientIdInputText").value=
"Loading...",document.getElementById("lorawanconfigupdatebtn").disabled=!0);$.getJSON(gl_target_server+"/php/configvils.php","loadsystemconfig=1&project_id="+project_id,function(a){console.log(a);null!=document.getElementById("systemconfigformid")&&(document.getElementById("CenterWebPortInputText").value=a.web_udp_port,document.getElementById("CenterUdpPortInputText").value=a.center_udp_port,document.getElementById("CoordUdpPortInputText").value=a.coord_udp_port,document.getElementById("CenterBroadcastPortInputText").value=
a.center_broadcast_port,document.getElementById("CenterWebSocketPortInputText").value=a.web_socket_port,document.getElementById("TagAlertTimeoutInputText").value=a.TagAlertTimeout,document.getElementById("TagVoltageLowInputText").value=a.TagAlertVoltageLow,document.getElementById("VILSServerInputText").value=a.VILSServer,document.getElementById("ERPServerInputText").value=a.ERPServer,document.getElementById("SSOIPInputText").value=a.SSOIP,document.getElementById("systemconfigupdatebtn").disabled=
!1);null!=document.getElementById("algorithmconfigformid")&&(glSystemConfig.ValidDataTime=a.ValidDataTime,glSystemConfig.MaxRangindDistance=a.MaxRangindDistance,glSystemConfig.EnableNoiseMakup=a.EnableNoiseMakup,glSystemConfig.NoiseMakupRatio=a.NoiseMakupRatio,glSystemConfig.NoiseMakupWeight=a.NoiseMakupWeight,glSystemConfig.EnableKalman1D=a.EnableKalman1D,glSystemConfig.EnableRangingReliability=a.EnableRangingReliability,glSystemConfig.RangingReliabilityMaxDistance=a.RangingReliabilityMaxDistance,
glSystemConfig.RangingReliabilityMinCount=a.RangingReliabilityMinCount,glSystemConfig.RangingReliabilityAverageDiff=a.RangingReliabilityAverageDiff,glSystemConfig.EnableAnchor1DMapping=a.EnableAnchor1DMapping,glSystemConfig.EnableOneAnchorCalculation=a.EnableOneAnchorCalculation,glSystemConfig.EnableGDOP=a.EnableGDOP,glSystemConfig.GDOPThreshold=a.GDOPThreshold,glSystemConfig.CalculationMethod=a.CalculationMethod,glSystemConfig.EnableIMUVelocity=a.EnableIMUVelocity,glSystemConfig.IMUVelocityOffset=
a.IMUVelocityOffset,glSystemConfig.SteadyStateOffset=a.SteadyStateOffset,glSystemConfig.WeightMovingAverageValue1=a.WeightMovingAverageValue1,glSystemConfig.WeightMovingAverageValue2=a.WeightMovingAverageValue2,glSystemConfig.WeightMovingAverageValue3=a.WeightMovingAverageValue3,glSystemConfig.StayInWallTimeout=a.StayInWallTimeout,glSystemConfig.EnableFixHeight=a.EnableFixHeight,glSystemConfig.SmoothingResult=a.SmoothingResult,glSystemConfig.SmoothingResultOffset=a.SmoothingResultOffset,glSystemConfig.SmoothingResultStep=
a.SmoothingResultStep,glSystemConfig.SmoothingResultFirstStateOffsetRatio=a.SmoothingResultFirstStateOffsetRatio,glSystemConfig.SmoothingResultFirstStateRunTime=a.SmoothingResultFirstStateRunTime,glSystemConfig.SmoothingResultSecondStateOffsetRatio=a.SmoothingResultSecondStateOffsetRatio,glSystemConfig.SmoothingResultSecondStateRunTime=a.SmoothingResultSecondStateRunTime,document.getElementById("ValidDataTimeInputText").value=a.ValidDataTime,document.getElementById("MaxRangingDistanceInputText").value=
a.MaxRangindDistance,"1"==a.EnableNoiseMakup&&document.getElementById("NoiseMakupCheckBtn").click(),document.getElementById("NoiseMakupRatioInputText").value=a.NoiseMakupRatio,document.getElementById("NoiseMakupWeightInputText").value=a.NoiseMakupWeight,"1"==a.EnableKalman1D&&document.getElementById("EnableKalman1DCheckBtn").click(),"1"==a.EnableRangingReliability&&document.getElementById("EnableRangingReliabilityCheckBtn").click(),document.getElementById("RangingReliabilityMaxDistanceInputText").value=
a.RangingReliabilityMaxDistance,document.getElementById("RangingReliabilityMinCountInputText").value=a.RangingReliabilityMinCount,document.getElementById("RangingReliabilityAverageDiffInputText").value=a.RangingReliabilityAverageDiff,"1"==a.EnableAnchor1DMapping&&document.getElementById("Anchor1DMappingCheckBtn").click(),"1"==a.EnableOneAnchorCalculation&&document.getElementById("OneAnchorCalculationCheckBtn").click(),"1"==a.EnableGDOP&&document.getElementById("GDOPresolveCheckBtn").click(),document.getElementById("GDOPThresholdInputText").value=
a.GDOPThreshold,"1"==a.EnableIMUVelocity&&document.getElementById("IMUVelocityCheckBtn").click(),document.getElementById("IMUVelocityOffsetInputText").value=a.IMUVelocityOffset,document.getElementById("SteadyStateOffsetInputText").value=a.SteadyStateOffset,document.getElementById("StayInWallTimeoutInputText").value=a.StayInWallTimeout,"1"==a.EnableFixHeight&&document.getElementById("EnableFixHeightCheckBtn").click(),"0"==a.CalculationMethod&&document.getElementById("optionsPositionAlgorithm1").click(),
"1"==a.CalculationMethod&&document.getElementById("optionsPositionAlgorithm2").click(),"2"==a.CalculationMethod&&document.getElementById("optionsPositionAlgorithm3").click(),document.getElementById("WeightMovingAverageInputText1").value=a.WeightMovingAverageValue1,document.getElementById("WeightMovingAverageInputText2").value=a.WeightMovingAverageValue2,document.getElementById("WeightMovingAverageInputText3").value=a.WeightMovingAverageValue3,"1"==a.SmoothingResult&&document.getElementById("SmoothingResultCheckBtn").click(),
document.getElementById("SmoothingResultOffsetInputText").value=a.SmoothingResultOffset,document.getElementById("SmoothingResultStepInputText").value=a.SmoothingResultStep,document.getElementById("SmoothingResultFirstStateOffsetRatioInputText").value=a.SmoothingResultFirstStateOffsetRatio,document.getElementById("SmoothingResultFirstStateRunTimeInputText").value=a.SmoothingResultFirstStateRunTime,document.getElementById("SmoothingResultSecondStateOffsetRatioInputText").value=a.SmoothingResultSecondStateOffsetRatio,
document.getElementById("SmoothingResultSecondStateRunTimeInputText").value=a.SmoothingResultSecondStateRunTime,document.getElementById("algorithmconfigupdatebtn").disabled=!1);null!=document.getElementById("lorawanconfigformid")&&(document.getElementById("LoRAWANTPOICInputText").value=a.LoRAWANTPOIC,document.getElementById("MQTTHostIpInputText").value=a.MQTTHostIp,document.getElementById("MQTTHostPortInputText").value=a.MQTTHostPort,document.getElementById("MQTTHostUsernameInputText").value=a.MQTTHostUsername,
document.getElementById("MQTTHostPasswordInputText").value=a.MQTTHostPassword,document.getElementById("MQTTClientIdInputText").value=a.MQTTClientId,document.getElementById("lorawanconfigupdatebtn").disabled=!1)})}
function load_system_status(){$.getJSON(gl_target_server+"/php/configvils.php","loadsystemstatus=1&project_id="+project_id,function(a){if(null!=document.getElementById("systemstatusarea")){for(var b="",d=parseInt(a.STATUS_NUM),e=1;e<=d;++e)b+=a["STATUS_"+e],b+="\n";document.getElementById("systemstatusarea").value=b}})}
$("#algorithmconfigupdatebtn").click(function(){var a=document.getElementById("ValidDataTimeInputText").value,b=document.getElementById("MaxRangingDistanceInputText").value,d=0;document.getElementById("NoiseMakupCheckBtn").checked&&(d=1);var e=document.getElementById("NoiseMakupRatioInputText").value,g=document.getElementById("NoiseMakupWeightInputText").value,f=0;document.getElementById("EnableKalman1DCheckBtn").checked&&(f=1);var h=0;document.getElementById("EnableRangingReliabilityCheckBtn").checked&&
(h=1);var l=document.getElementById("RangingReliabilityMaxDistanceInputText").value,m=document.getElementById("RangingReliabilityMinCountInputText").value,n=document.getElementById("RangingReliabilityAverageDiffInputText").value,u=0;document.getElementById("Anchor1DMappingCheckBtn").checked&&(u=1);var v=0;document.getElementById("OneAnchorCalculationCheckBtn").checked&&(v=1);var p=0;document.getElementById("GDOPresolveCheckBtn").checked&&(p=1);var w=document.getElementById("GDOPThresholdInputText").value,
q=0;document.getElementById("IMUVelocityCheckBtn").checked&&(q=1);var x=document.getElementById("IMUVelocityOffsetInputText").value,y=document.getElementById("SteadyStateOffsetInputText").value,z=document.getElementById("StayInWallTimeoutInputText").value,r=0;document.getElementById("EnableFixHeightCheckBtn").checked&&(r=1);var k=0;document.getElementById("optionsPositionAlgorithm1").checked&&(k=0);document.getElementById("optionsPositionAlgorithm2").checked&&(k=1);document.getElementById("optionsPositionAlgorithm3").checked&&
(k=2);var A=document.getElementById("WeightMovingAverageInputText1").value,B=document.getElementById("WeightMovingAverageInputText2").value,C=document.getElementById("WeightMovingAverageInputText3").value,t=0;document.getElementById("SmoothingResultCheckBtn").checked&&(t=1);var D=document.getElementById("SmoothingResultOffsetInputText").value,E=document.getElementById("SmoothingResultStepInputText").value,F=document.getElementById("SmoothingResultFirstStateOffsetRatioInputText").value,G=document.getElementById("SmoothingResultFirstStateRunTimeInputText").value,
H=document.getElementById("SmoothingResultSecondStateOffsetRatioInputText").value,I=document.getElementById("SmoothingResultSecondStateRunTimeInputText").value;document.getElementById("algorithmconfigupdatebtn").disabled=!0;var c;c="updateAlgorithmConfig=1";a!=glSystemConfig.ValidDataTime&&(c+="&ValidDataTime="+a);b!=glSystemConfig.MaxRangindDistance&&(c+="&MaxRangindDistance="+b);d!=glSystemConfig.EnableNoiseMakup&&(c+="&EnableNoiseMakup="+d);e!=glSystemConfig.NoiseMakupRatio&&(c+="&NoiseMakupRatio="+
e);g!=glSystemConfig.NoiseMakupWeight&&(c+="&NoiseMakupWeight="+g);f!=glSystemConfig.EnableKalman1D&&(c+="&EnableKalman1D="+f);h!=glSystemConfig.EnableRangingReliability&&(c+="&EnableRangingReliability="+h);l!=glSystemConfig.RangingReliabilityMaxDistance&&(c+="&RangingReliabilityMaxDistance="+l);m!=glSystemConfig.RangingReliabilityMinCount&&(c+="&RangingReliabilityMinCount="+m);n!=glSystemConfig.RangingReliabilityAverageDiff&&(c+="&RangingReliabilityAverageDiff="+n);u!=glSystemConfig.EnableAnchor1DMapping&&
(c+="&EnableAnchor1DMapping="+u);v!=glSystemConfig.EnableOneAnchorCalculation&&(c+="&EnableOneAnchorCalculation="+v);p!=glSystemConfig.EnableGDOP&&(c+="&EnableGDOP="+p);w!=glSystemConfig.GDOPThreshold&&(c+="&GDOPThreshold="+w);k!=glSystemConfig.CalculationMethod&&(c+="&CalculationMethod="+k);q!=glSystemConfig.EnableIMUVelocity&&(c+="&EnableIMUVelocity="+q);x!=glSystemConfig.IMUVelocityOffset&&(c+="&IMUVelocityOffset="+x);y!=glSystemConfig.SteadyStateOffset&&(c+="&SteadyStateOffset="+y);A!=glSystemConfig.WeightMovingAverageValue1&&
(c+="&WeightMovingAverageValue1="+A);B!=glSystemConfig.WeightMovingAverageValue2&&(c+="&WeightMovingAverageValue2="+B);C!=glSystemConfig.WeightMovingAverageValue3&&(c+="&WeightMovingAverageValue3="+C);z!=glSystemConfig.StayInWallTimeout&&(c+="&StayInWallTimeout="+z);r!=glSystemConfig.EnableFixHeight&&(c+="&EnableFixHeight="+r);t!=glSystemConfig.SmoothingResult&&(c+="&SmoothingResult="+t);D!=glSystemConfig.SmoothingResultOffset&&(c+="&SmoothingResultOffset="+D);E!=glSystemConfig.SmoothingResultStep&&
(c+="&SmoothingResultStep="+E);F!=glSystemConfig.SmoothingResultFirstStateOffsetRatio&&(c+="&SmoothingResultFirstStateOffsetRatio="+F);G!=glSystemConfig.SmoothingResultFirstStateRunTime&&(c+="&SmoothingResultFirstStateRunTime="+G);H!=glSystemConfig.SmoothingResultSecondStateOffsetRatio&&(c+="&SmoothingResultSecondStateOffsetRatio="+H);I!=glSystemConfig.SmoothingResultSecondStateRunTime&&(c+="&SmoothingResultSecondStateRunTime="+I);c+="&project_id="+project_id;jQuery.ajax({url:gl_target_server+"/php/configvils.php",
type:"POST",data:c,dataType:"text",success:function(c){glSystemConfig.ValidDataTime=a;glSystemConfig.MaxRangindDistance=b;glSystemConfig.EnableNoiseMakup=d;glSystemConfig.NoiseMakupRatio=e;glSystemConfig.NoiseMakupWeight=g;glSystemConfig.EnableKalman1D=f;glSystemConfig.EnableRangingReliability=h;glSystemConfig.RangingReliabilityMaxDistance=l;glSystemConfig.RangingReliabilityMinCount=m;glSystemConfig.RangingReliabilityAverageDiff=n;glSystemConfig.EnableGDOP=p;glSystemConfig.GDOPThreshold=w;glSystemConfig.CalculationMethod=
k;glSystemConfig.EnableIMUVelocity=q;glSystemConfig.IMUVelocityOffset=x;glSystemConfig.SteadyStateOffset=y;glSystemConfig.WeightMovingAverageValue1=A;glSystemConfig.WeightMovingAverageValue2=B;glSystemConfig.WeightMovingAverageValue3=C;glSystemConfig.StayInWallTimeout=z;glSystemConfig.EnableFixHeight=r;glSystemConfig.SmoothingResult=t;glSystemConfig.SmoothingResultOffset=D;glSystemConfig.SmoothingResultStep=E;glSystemConfig.SmoothingResultFirstStateOffsetRatio=F;glSystemConfig.SmoothingResultFirstStateRunTime=
G;glSystemConfig.SmoothingResultSecondStateOffsetRatio=H;glSystemConfig.SmoothingResultSecondStateRunTime=I},error:function(a,b,c){},complete:function(){check_algorithmconfig_update()}});return!1});
function check_algorithmconfig_update(){$.getJSON(gl_target_server+"/php/configvils.php","loadsystemconfig=1&project_id="+project_id,function(a){var b;b=0+(glSystemConfig.ValidDataTime!=a.ValidDataTime);b+=glSystemConfig.MaxRangindDistance!=a.MaxRangindDistance;b+=glSystemConfig.EnableNoiseMakup!=a.EnableNoiseMakup;b+=glSystemConfig.NoiseMakupRatio!=a.NoiseMakupRatio;b+=glSystemConfig.NoiseMakupWeight!=a.NoiseMakupWeight;b+=glSystemConfig.EnableKalman1D!=a.EnableKalman1D;b+=glSystemConfig.EnableRangingReliability!=
a.EnableRangingReliability;b+=glSystemConfig.RangingReliabilityMaxDistance!=a.RangingReliabilityMaxDistance;b+=glSystemConfig.RangingReliabilityMinCount!=a.RangingReliabilityMinCount;b+=glSystemConfig.RangingReliabilityAverageDiff!=a.RangingReliabilityAverageDiff;b+=glSystemConfig.EnableAnchor1DMapping!=a.EnableAnchor1DMapping;b+=glSystemConfig.EnableOneAnchorCalculation!=a.EnableOneAnchorCalculation;b+=glSystemConfig.EnableGDOP!=a.EnableGDOP;b+=glSystemConfig.GDOPThreshold!=a.GDOPThreshold;b+=glSystemConfig.CalculationMethod!=
a.CalculationMethod;b+=glSystemConfig.EnableIMUVelocity!=a.EnableIMUVelocity;b+=glSystemConfig.IMUVelocityOffset!=a.IMUVelocityOffset;b+=glSystemConfig.SteadyStateOffset!=a.SteadyStateOffset;b+=glSystemConfig.WeightMovingAverageValue1!=a.WeightMovingAverageValue1;b+=glSystemConfig.WeightMovingAverageValue2!=a.WeightMovingAverageValue2;b+=glSystemConfig.WeightMovingAverageValue3!=a.WeightMovingAverageValue3;b+=glSystemConfig.StayInWallTimeout!=a.StayInWallTimeout;b+=glSystemConfig.EnableFixHeight!=
a.EnableFixHeight;b+=glSystemConfig.SmoothingResult!=a.SmoothingResult;b+=glSystemConfig.SmoothingResultOffset!=a.SmoothingResultOffset;b+=glSystemConfig.SmoothingResultStep!=a.SmoothingResultStep;b+=glSystemConfig.SmoothingResultFirstStateOffsetRatio!=a.SmoothingResultFirstStateOffsetRatio;b+=glSystemConfig.SmoothingResultFirstStateRunTime!=a.SmoothingResultFirstStateRunTime;b+=glSystemConfig.SmoothingResultSecondStateOffsetRatio!=a.SmoothingResultSecondStateOffsetRatio;b+=glSystemConfig.SmoothingResultSecondStateRunTime!=
a.SmoothingResultSecondStateRunTime;console.log("check_algorithmconfig_update() difference:"+b);0<b?(document.getElementById("algorithmconfig_warning_callout").style.display="block",setTimeout(check_algorithmconfig_update,1E3)):(console.log("check_algorithmconfig_update() update successfully!"),document.getElementById("algorithmconfig_warning_callout").style.display="none",document.getElementById("algorithmconfigupdate_callout").style.display="block",setTimeout(close_callout,2500,"algorithmconfigupdate_callout"),
document.getElementById("algorithmconfigupdatebtn").disabled=!1)})}
$("#systemconfigupdatebtn").click(function(){var a=document.getElementById("CenterWebPortInputText").value,b=document.getElementById("CenterUdpPortInputText").value,d=document.getElementById("CoordUdpPortInputText").value,e=document.getElementById("CenterBroadcastPortInputText").value,g=document.getElementById("CenterWebSocketPortInputText").value,f=document.getElementById("TagAlertTimeoutInputText").value,h=document.getElementById("TagVoltageLowInputText").value,l=document.getElementById("VILSServerInputText").value,
m=document.getElementById("ERPServerInputText").value,n=document.getElementById("SSOIPInputText").value;document.getElementById("systemconfigupdatebtn").disabled=!0;a="setcenterwebport="+a+"&"+("setcenterudpport="+b);a+="&";a+="setcoordudpport="+d;a+="&";a+="setcenterbroadcastport="+e;a+="&";a+="setwebsocketport="+g;a+="&";a+="settagalerttimeout="+f;a+="&";a+="settagvoltagelow="+h;a+="&";a+="setvilsserver="+l;a+="&";a+="seterpserver="+m;a+="&";a+="setssoip="+n;a+="&";a+="project_id="+project_id;jQuery.ajax({url:gl_target_server+
"/php/configvils.php",type:"POST",data:a,dataType:"text",success:function(a){},error:function(a,b,d){},complete:function(){check_systemconfig_update()}});return!1});
function check_systemconfig_update(){$.getJSON(gl_target_server+"/php/configvils.php","loadsystemconfig=1&project_id="+project_id,function(a){var b;b=0+(document.getElementById("CenterWebPortInputText").value!=a.web_udp_port);b+=document.getElementById("CenterUdpPortInputText").value!=a.center_udp_port;b+=document.getElementById("CoordUdpPortInputText").value!=a.coord_udp_port;b+=document.getElementById("CenterBroadcastPortInputText").value!=a.center_broadcast_port;b+=document.getElementById("CenterWebSocketPortInputText").value!=
a.web_socket_port;b+=document.getElementById("TagAlertTimeoutInputText").value!=a.TagAlertTimeout;b+=document.getElementById("TagVoltageLowInputText").value!=a.TagAlertVoltageLow;b+=document.getElementById("VILSServerInputText").value!=a.VILSServer;b+=document.getElementById("ERPServerInputText").value!=a.ERPServer;b+=document.getElementById("SSOIPInputText").value!=a.SSOIP;console.log("check_systemconfig_update() difference:"+b);0<b?(document.getElementById("systemconfig_warning_callout").style.display=
"block",setTimeout(check_systemconfig_update,1E3)):(console.log("check_systemconfig_update() update successfully!"),document.getElementById("systemconfig_warning_callout").style.display="none",document.getElementById("systemconfigupdate_callout").style.display="block",setTimeout(close_callout,2500,"systemconfigupdate_callout"),document.getElementById("systemconfigupdatebtn").disabled=!1)})}
$("#lorawanconfigupdatebtn").click(function(){var a=document.getElementById("LoRAWANTPOICInputText").value,b=document.getElementById("MQTTHostIpInputText").value,d=document.getElementById("MQTTHostPortInputText").value,e=document.getElementById("MQTTHostUsernameInputText").value,g=document.getElementById("MQTTHostPasswordInputText").value,f=document.getElementById("MQTTClientIdInputText").value;document.getElementById("lorawanconfigupdatebtn").disabled=!0;a="updateLoRAWANConfig=1&LoRAWANTPOIC="+a+
"&"+("MQTTHostIp="+b);a+="&";a+="MQTTHostPort="+d;a+="&";a+="MQTTHostUsername="+e;a+="&";a+="MQTTHostPassword="+g;a+="&";a+="MQTTClientId="+f;a+="&project_id="+project_id;jQuery.ajax({url:gl_target_server+"/php/configvils.php",type:"POST",data:a,dataType:"text",success:function(a){},error:function(a,b,d){},complete:function(){check_lorawanconfig_update()}});return!1});
$("#restlorabtn").click(function(){jQuery.ajax({url:gl_target_server+"/php/configvils.php",type:"POST",data:"resetLoRA=1",dataType:"text",success:function(a){},error:function(a,b,d){},complete:function(){check_lorawanconfig_update()}});return!1});
function check_lorawanconfig_update(){$.getJSON(gl_target_server+"/php/configvils.php","loadsystemconfig=1&project_id="+project_id,function(a){var b;b=0+(document.getElementById("LoRAWANTPOICInputText").value!=a.LoRAWANTPOIC);b+=document.getElementById("MQTTHostIpInputText").value!=a.MQTTHostIp;b+=document.getElementById("MQTTHostPortInputText").value!=a.MQTTHostPort;b+=document.getElementById("MQTTHostUsernameInputText").value!=a.MQTTHostUsername;b+=document.getElementById("MQTTHostPasswordInputText").value!=
a.MQTTHostPassword;b+=document.getElementById("MQTTClientIdInputText").value!=a.MQTTClientId;console.log("check_lorawanconfig_update() difference:"+b);0<b?(document.getElementById("lorawanconfig_warning_callout").style.display="block",setTimeout(check_lorawanconfig_update,1E3)):(console.log("check_lorawanconfig_update() update successfully!"),document.getElementById("lorawanconfig_warning_callout").style.display="none",document.getElementById("lorawanconfigupdate_callout").style.display="block",setTimeout(close_callout,
2500,"lorawanconfigupdate_callout"),document.getElementById("lorawanconfigupdatebtn").disabled=!1)})}
$("#prjsavebtn").click(function(){var a={};a.project_id=""+project_id;a.PROJECT_NAME=document.getElementById("Local_Project_Name").value;a.PROJECT_DESCRIPTION=document.getElementById("Local_Project_Desc").value;document.getElementById("prjsavebtn").innerText="updating...";document.getElementById("prjsavebtn").disabled=!0;jQuery.ajax({url:gl_target_server+"/php/configvils.php",type:"POST",data:a,success:function(a){check_vilssetting_update()},error:function(a,d,e){alert("error = "+e);alert("xhr.responseText = "+
a.responseText);document.getElementById("prjsavebtn").disabled=!1;document.getElementById("prjsavebtn").innerText="Save"}});return!1});
function check_vilssetting_update(){$.getJSON(gl_target_server+"/php/configvils.php","loadconfig=1&project_id="+project_id,function(a){var b;b=0+(document.getElementById("Local_Project_Name").value!=a.PROJECT_NAME);b+=document.getElementById("Local_Project_Desc").value!=a.PROJECT_DESCRIPTION;console.log("check_vilssetting_update() difference:"+b);0<b?(document.getElementById("vilssetting_warning_callout").style.display="block",setTimeout(check_vilssetting_update,1E3)):(console.log("check_vilssetting_update() update successfully!"),
document.getElementById("vilssetting_warning_callout").style.display="none",document.getElementById("vilssettingupdate_callout").style.display="block",setTimeout(reload_settingpage,500))})}function close_callout(a){document.getElementById(a).style.display="none"}function reload_settingpage(){document.getElementById("prjsavebtn").disabled=!1;document.getElementById("prjsavebtn").innerText="Save";window.location="/index.php/vilssettings/"+project_id}
$("#restartappbtn").click(function(){if(1==confirm("\u91cd\u65b0\u555f\u52d5\u7cfb\u7d71?")){var a={};a.project_id=""+project_id;a.restart_app=1;jQuery.ajax({url:gl_target_server+"/php/configvils.php",type:"POST",data:a,success:function(a){window.location="/index.php/vilssettings/"+project_id},error:function(a,d,e){alert("error = "+e);alert("xhr.responseText = "+a.responseText)}})}return!1});
$("#deletethisprojectbtn").click(function(){console.log("alertString=This step can not undo, Are you should want to delete this project?");1==window.confirm("This step can not undo, Are you should want to delete this project?")&&jQuery.ajax({url:"/php/configvils.php",type:"POST",data:"project_id="+project_id+"&delete_project=1",dataType:"text",success:function(a){console.log("response="+a);a=JSON.parse(a);void 0!=parent.$("#contentIframe")[0]?parent.window.location="/index.php/"+parseInt(a.PROJECT_ID):
window.location="/index.php/vilssettings/"+parseInt(a.PROJECT_ID)},error:function(a,b,d){alert("error = "+d);alert("xhr.responseText = "+a.responseText)}});return!1});function EnableRangingReliabilityCheckBtn_onclick(){document.getElementById("EnableRangingReliabilityCheckBtn").checked?document.getElementById("RangingReliabilityInputText_ul").style.display="block":document.getElementById("RangingReliabilityInputText_ul").style.display="none"}
function NoiseMakupCheckBtn_onclick(){document.getElementById("NoiseMakupCheckBtn").checked?document.getElementById("NoiseMakupCheckBtn_ul").style.display="block":document.getElementById("NoiseMakupCheckBtn_ul").style.display="none"}function optionsPositionAlgorithm1_onclick(){document.getElementById("optionsPositionAlgorithm3_ul").style.display="none"}function optionsPositionAlgorithm2_onclick(){document.getElementById("optionsPositionAlgorithm3_ul").style.display="none"}
function optionsPositionAlgorithm3_onclick(){document.getElementById("optionsPositionAlgorithm3_ul").style.display="block"}function GDOPresolveCheckBtn_onclick(){document.getElementById("GDOPresolveCheckBtn").checked?document.getElementById("GDOPresolveInputText_ul").style.display="block":document.getElementById("GDOPresolveInputText_ul").style.display="none"}
function IMUVelocityCheckBtn_onclick(){document.getElementById("IMUVelocityCheckBtn").checked?document.getElementById("IMUVelocityOffsetInputText_ul").style.display="block":document.getElementById("IMUVelocityOffsetInputText_ul").style.display="none"}
function SmoothingResultCheckBtn_onclick(){document.getElementById("SmoothingResultCheckBtn").checked?document.getElementById("SmoothingResultOffsetInputText_ul").style.display="block":document.getElementById("SmoothingResultOffsetInputText_ul").style.display="none"}function open_settings_page(){window.open("/index.php/vilssettings/"+project_id,"_blank").focus()};
