/*
: Copyright (c) 2012-2017 Dan Grossman. All rights reserved.
 @license: Licensed under the MIT license. See http://www.opensource.org/licenses/mit-license.php
 @website: http://www.daterangepicker.com/
*/
var $jscomp={scope:{},findInternal:function(c,e,b){c instanceof String&&(c=String(c));for(var d=c.length,a=0;a<d;a++){var h=c[a];if(e.call(b,h,a,c))return{i:a,v:h}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,e,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");c!=Array.prototype&&c!=Object.prototype&&(c[e]=b.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,e,b,d){if(e){b=$jscomp.global;c=c.split(".");for(d=0;d<c.length-1;d++){var a=c[d];a in b||(b[a]={});b=b[a]}c=c[c.length-1];d=b[c];e=e(d);e!=d&&null!=e&&$jscomp.defineProperty(b,c,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(e,c){return $jscomp.findInternal(this,e,c).v}},"es6-impl","es3");
(function(c,e){if("function"===typeof define&&define.amd)define(["moment","jquery"],function(a,d){d.fn||(d.fn={});return e(a,d)});else if("object"===typeof module&&module.exports){var b="undefined"!=typeof window?window.jQuery:void 0;b||(b=require("jquery"),b.fn||(b.fn={}));var d="undefined"!=typeof window&&"undefined"!=typeof window.moment?window.moment:require("moment");module.exports=e(d,b)}else c.daterangepicker=e(c.moment,c.jQuery)})(this,function(c,e){var b=function(d,a,h){this.parentEl="body";
this.element=e(d);this.startDate=c().startOf("day");this.endDate=c().endOf("day");this.showISOWeekNumbers=this.showWeekNumbers=this.showDropdowns=this.singleDatePicker=this.autoApply=this.dateLimit=this.maxDate=this.minDate=!1;this.showCustomRangeLabel=!0;this.timePicker24Hour=this.timePicker=!1;this.timePickerIncrement=1;this.timePickerSeconds=!1;this.autoUpdateInput=this.linkedCalendars=!0;this.alwaysShowCalendars=!1;this.manualInputs=!0;this.ranges={};this.opens="right";this.element.hasClass("pull-right")&&
(this.opens="left");this.drops="down";this.element.hasClass("dropup")&&(this.drops="up");this.buttonClasses="btn btn-sm";this.applyClass="btn-success";this.cancelClass="btn-default";this.locale={direction:"ltr",format:c.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:c.weekdaysMin(),monthNames:c.monthsShort(),firstDay:c.localeData().firstDayOfWeek()};this.callback=function(){};this.isShowing=!1;this.leftCalendar=
{};this.rightCalendar={};if("object"!==typeof a||null===a)a={};a=e.extend(this.element.data(),a);"string"===typeof a.template||a.template instanceof e||(a.template='<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_start" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_end" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>');
this.parentEl=a.parentEl&&e(a.parentEl).length?e(a.parentEl):e(this.parentEl);this.container=e(a.template).appendTo(this.parentEl);if("object"===typeof a.locale&&("string"===typeof a.locale.direction&&(this.locale.direction=a.locale.direction),"string"===typeof a.locale.format&&(this.locale.format=a.locale.format),"string"===typeof a.locale.separator&&(this.locale.separator=a.locale.separator),"object"===typeof a.locale.daysOfWeek&&(this.locale.daysOfWeek=a.locale.daysOfWeek.slice()),"object"===typeof a.locale.monthNames&&
(this.locale.monthNames=a.locale.monthNames.slice()),"number"===typeof a.locale.firstDay&&(this.locale.firstDay=a.locale.firstDay),"string"===typeof a.locale.applyLabel&&(this.locale.applyLabel=a.locale.applyLabel),"string"===typeof a.locale.cancelLabel&&(this.locale.cancelLabel=a.locale.cancelLabel),"string"===typeof a.locale.weekLabel&&(this.locale.weekLabel=a.locale.weekLabel),"string"===typeof a.locale.customRangeLabel)){var b=document.createElement("textarea");b.innerHTML=a.locale.customRangeLabel;
b=b.value;this.locale.customRangeLabel=b}this.container.addClass(this.locale.direction);"string"===typeof a.startDate&&(this.startDate=c(a.startDate,this.locale.format));"string"===typeof a.endDate&&(this.endDate=c(a.endDate,this.locale.format));"string"===typeof a.minDate&&(this.minDate=c(a.minDate,this.locale.format));"string"===typeof a.maxDate&&(this.maxDate=c(a.maxDate,this.locale.format));"object"===typeof a.startDate&&(this.startDate=c(a.startDate));"object"===typeof a.endDate&&(this.endDate=
c(a.endDate));"object"===typeof a.minDate&&(this.minDate=c(a.minDate));"object"===typeof a.maxDate&&(this.maxDate=c(a.maxDate));this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone());this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone());"string"===typeof a.applyClass&&(this.applyClass=a.applyClass);"string"===typeof a.cancelClass&&(this.cancelClass=a.cancelClass);"object"===typeof a.dateLimit&&(this.dateLimit=a.dateLimit);"string"===
typeof a.opens&&(this.opens=a.opens);"string"===typeof a.drops&&(this.drops=a.drops);"boolean"===typeof a.showWeekNumbers&&(this.showWeekNumbers=a.showWeekNumbers);"boolean"===typeof a.showISOWeekNumbers&&(this.showISOWeekNumbers=a.showISOWeekNumbers);"string"===typeof a.buttonClasses&&(this.buttonClasses=a.buttonClasses);"object"===typeof a.buttonClasses&&(this.buttonClasses=a.buttonClasses.join(" "));"boolean"===typeof a.showDropdowns&&(this.showDropdowns=a.showDropdowns);"boolean"===typeof a.showCustomRangeLabel&&
(this.showCustomRangeLabel=a.showCustomRangeLabel);"boolean"===typeof a.singleDatePicker&&(this.singleDatePicker=a.singleDatePicker)&&(this.endDate=this.startDate.clone());"boolean"===typeof a.timePicker&&(this.timePicker=a.timePicker);"boolean"===typeof a.timePickerSeconds&&(this.timePickerSeconds=a.timePickerSeconds);"number"===typeof a.timePickerIncrement&&(this.timePickerIncrement=a.timePickerIncrement);"boolean"===typeof a.timePicker24Hour&&(this.timePicker24Hour=a.timePicker24Hour);"boolean"===
typeof a.autoApply&&(this.autoApply=a.autoApply);"boolean"===typeof a.autoUpdateInput&&(this.autoUpdateInput=a.autoUpdateInput);"boolean"===typeof a.linkedCalendars&&(this.linkedCalendars=a.linkedCalendars);"function"===typeof a.isInvalidDate&&(this.isInvalidDate=a.isInvalidDate);"function"===typeof a.isCustomDate&&(this.isCustomDate=a.isCustomDate);"boolean"===typeof a.alwaysShowCalendars&&(this.alwaysShowCalendars=a.alwaysShowCalendars);"boolean"===typeof a.manualInputs&&(this.manualInputs=a.manualInputs);
if(0!=this.locale.firstDay)for(d=this.locale.firstDay;0<d;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),d--;var m,k;if("undefined"===typeof a.startDate&&"undefined"===typeof a.endDate&&e(this.element).is("input[type=text]")){var b=e(this.element).val(),f=b.split(this.locale.separator);d=m=null;2==f.length?(d=c(f[0],this.locale.format),m=c(f[1],this.locale.format)):this.singleDatePicker&&""!==b&&(d=c(b,this.locale.format),m=c(b,this.locale.format));null!==d&&null!==m&&(this.setStartDate(d),
this.setEndDate(m))}if("object"===typeof a.ranges){for(k in a.ranges)d="string"===typeof a.ranges[k][0]?c(a.ranges[k][0],this.locale.format):c(a.ranges[k][0]),m="string"===typeof a.ranges[k][1]?c(a.ranges[k][1],this.locale.format):c(a.ranges[k][1]),this.minDate&&d.isBefore(this.minDate)&&(d=this.minDate.clone()),b=this.maxDate,this.dateLimit&&b&&d.clone().add(this.dateLimit).isAfter(b)&&(b=d.clone().add(this.dateLimit)),b&&m.isAfter(b)&&(m=b.clone()),this.minDate&&m.isBefore(this.minDate,this.timepicker?
"minute":"day")||b&&d.isAfter(b,this.timepicker?"minute":"day")||(b=document.createElement("textarea"),b.innerHTML=k,b=b.value,this.ranges[b]=[d,m]);d="<ul>";for(k in this.ranges)d+='<li data-range-key="'+k+'">'+k+"</li>";this.showCustomRangeLabel&&(d+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>");d+="</ul>";this.container.find(".ranges").prepend(d)}"function"===typeof h&&(this.callback=h);this.timePicker||(this.startDate=this.startDate.startOf("day"),
this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide());this.timePicker&&this.autoApply&&(this.autoApply=!1);this.autoApply&&"object"!==typeof a.ranges?this.container.find(".ranges").hide():this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide");this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".calendar.left").addClass("single"),this.container.find(".calendar.left").show(),this.container.find(".calendar.right").hide(),
this.container.find(".daterangepicker_input input, .daterangepicker_input > i").hide(),this.timePicker?this.container.find(".ranges ul").hide():this.container.find(".ranges").hide());this.manualInputs||this.container.find(".daterangepicker_input input, .daterangepicker_input > i").hide();("undefined"===typeof a.ranges&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar");this.container.addClass("opens"+this.opens);"undefined"!==typeof a.ranges&&"right"==this.opens&&
this.container.find(".ranges").prependTo(this.container.find(".calendar.left").parent());this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses);this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass);this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass);this.container.find(".applyBtn").html(this.locale.applyLabel);this.container.find(".cancelBtn").html(this.locale.cancelLabel);this.container.find(".calendar").on("click.daterangepicker",
".prev",e.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",e.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",e.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",e.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",e.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",e.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",e.proxy(this.monthOrYearChanged,
this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",e.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",e.proxy(this.showCalendars,this)).on("focus.daterangepicker",".daterangepicker_input input",e.proxy(this.formInputsFocused,this)).on("blur.daterangepicker",".daterangepicker_input input",e.proxy(this.formInputsBlurred,this)).on("change.daterangepicker",".daterangepicker_input input",e.proxy(this.formInputsChanged,
this)).on("keydown.daterangepicker",".daterangepicker_input input",e.proxy(this.formInputsKeydown,this));this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",e.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",e.proxy(this.clickCancel,this)).on("click.daterangepicker","li",e.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",e.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",e.proxy(this.updateFormInputs,this));if(this.element.is("input")||
this.element.is("button"))this.element.on({"click.daterangepicker":e.proxy(this.show,this),"focus.daterangepicker":e.proxy(this.show,this),"keyup.daterangepicker":e.proxy(this.elementChanged,this),"keydown.daterangepicker":e.proxy(this.keydown,this)});else this.element.on("click.daterangepicker",e.proxy(this.toggle,this)),this.element.on("keydown.daterangepicker",e.proxy(this.toggle,this));this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+
this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))};b.prototype={constructor:b,setStartDate:function(d){"string"===typeof d&&(this.startDate=c(d,this.locale.format));"object"===typeof d&&(this.startDate=c(d));this.timePicker||(this.startDate=this.startDate.startOf("day"));this.timePicker&&this.timePickerIncrement&&
this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement));this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/
this.timePickerIncrement)*this.timePickerIncrement));this.isShowing||this.updateElement();this.updateMonthsInView()},setEndDate:function(d){"string"===typeof d&&(this.endDate=c(d,this.locale.format));"object"===typeof d&&(this.endDate=c(d));this.timePicker||(this.endDate=this.endDate.add(1,"d").startOf("day").subtract(1,"second"));this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);this.endDate.isBefore(this.startDate)&&
(this.endDate=this.startDate.clone());this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone());this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit));this.previousRightTime=this.endDate.clone();this.isShowing||this.updateElement();this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),
this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled"));this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("active"),this.container.find('input[name="daterangepicker_start"]').addClass("active")):(this.container.find('input[name="daterangepicker_end"]').addClass("active"),this.container.find('input[name="daterangepicker_start"]').removeClass("active"));
this.updateMonthsInView();this.updateCalendars();this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;
this.leftCalendar.month=this.startDate.clone().date(2);this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),
this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){if(this.timePicker){var d,a,e;if(this.endDate){if(d=parseInt(this.container.find(".left .hourselect").val(),10),a=parseInt(this.container.find(".left .minuteselect").val(),10),
e=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour){var c=this.container.find(".left .ampmselect").val();"PM"===c&&12>d&&(d+=12);"AM"===c&&12===d&&(d=0)}}else d=parseInt(this.container.find(".right .hourselect").val(),10),a=parseInt(this.container.find(".right .minuteselect").val(),10),e=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,this.timePicker24Hour||(c=this.container.find(".right .ampmselect").val(),
"PM"===c&&12>d&&(d+=12),"AM"===c&&12===d&&(d=0));this.leftCalendar.month.hour(d).minute(a).second(e);this.rightCalendar.month.hour(d).minute(a).second(e)}this.renderCalendar("left");this.renderCalendar("right");this.container.find(".ranges li").removeClass("active");null!=this.endDate&&this.calculateChosenLabel()},renderCalendar:function(d){var a="left"==d?this.leftCalendar:this.rightCalendar,b=a.month.month(),g=a.month.year(),m=a.month.hour(),k=a.month.minute(),f=a.month.second(),a=c([g,b]).daysInMonth(),
n=c([g,b,1]),q=c([g,b,a]),b=c(n).subtract(1,"month").month(),g=c(n).subtract(1,"month").year(),l=c([g,b]).daysInMonth(),t=n.day(),a=[];a.firstDay=n;a.lastDay=q;for(n=0;6>n;n++)a[n]=[];n=l-t+this.locale.firstDay+1;n>l&&(n-=7);t==this.locale.firstDay&&(n=l-6);l=c([g,b,n,12,k,f]);for(g=b=n=0;42>n;n++,b++,l=c(l).add(24,"hour"))0<n&&0===b%7&&(b=0,g++),a[g][b]=l.clone().hour(m).minute(k).second(f),l.hour(12),this.minDate&&a[g][b].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&a[g][b].isBefore(this.minDate)&&
"left"==d&&(a[g][b]=this.minDate.clone()),this.maxDate&&a[g][b].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&a[g][b].isAfter(this.maxDate)&&"right"==d&&(a[g][b]=this.maxDate.clone());"left"==d?this.leftCalendar.calendar=a:this.rightCalendar.calendar=a;var g="left"==d?this.minDate:this.startDate,m=this.maxDate,k="ltr"==this.locale.direction?{left:"chevron-left",right:"chevron-right"}:{left:"chevron-right",right:"chevron-left"},p='<table class="table-condensed">',p=p+"<thead>",p=p+"<tr>";
if(this.showWeekNumbers||this.showISOWeekNumbers)p+="<th></th>";p=g&&!g.isBefore(a.firstDay)||this.linkedCalendars&&"left"!=d?p+"<th></th>":p+('<th class="prev available"><i class="fa fa-'+k.left+" glyphicon glyphicon-"+k.left+'"></i></th>');f=this.locale.monthNames[a[1][1].month()]+a[1][1].format(" YYYY");if(this.showDropdowns){for(var t=a[1][1].month(),f=a[1][1].year(),n=m&&m.year()||f+5,l=g&&g.year()||f-50,q=f==l,u=f==n,b='<select class="monthselect">',r=0;12>r;r++)b=(!q||r>=g.month())&&(!u||r<=
m.month())?b+("<option value='"+r+"'"+(r===t?" selected='selected'":"")+">"+this.locale.monthNames[r]+"</option>"):b+("<option value='"+r+"'"+(r===t?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[r]+"</option>");for(g='<select class="yearselect">';l<=n;l++)g+='<option value="'+l+'"'+(l===f?' selected="selected"':"")+">"+l+"</option>";f=b+"</select>"+(g+"</select>")}p+='<th colspan="5" class="month">'+f+"</th>";p=m&&!m.isAfter(a.lastDay)||this.linkedCalendars&&"right"!=d&&
!this.singleDatePicker?p+"<th></th>":p+('<th class="next available"><i class="fa fa-'+k.right+" glyphicon glyphicon-"+k.right+'"></i></th>');p+="</tr>";p+="<tr>";if(this.showWeekNumbers||this.showISOWeekNumbers)p+='<th class="week">'+this.locale.weekLabel+"</th>";e.each(this.locale.daysOfWeek,function(a,d){p+="<th>"+d+"</th>"});p+="</tr>";p+="</thead>";p+="<tbody>";null==this.endDate&&this.dateLimit&&(k=this.startDate.clone().add(this.dateLimit).endOf("day"),!m||k.isBefore(m))&&(m=k);for(g=0;6>g;g++){p+=
"<tr>";this.showWeekNumbers?p+='<td class="week">'+a[g][0].week()+"</td>":this.showISOWeekNumbers&&(p+='<td class="week">'+a[g][0].isoWeek()+"</td>");for(b=0;7>b;b++){k=[];a[g][b].isSame(new Date,"day")&&k.push("today");5<a[g][b].isoWeekday()&&k.push("weekend");a[g][b].month()!=a[1][1].month()&&k.push("off");this.minDate&&a[g][b].isBefore(this.minDate,"day")&&k.push("off","disabled");m&&a[g][b].isAfter(m,"day")&&k.push("off","disabled");this.isInvalidDate(a[g][b])&&k.push("off","disabled");a[g][b].format("YYYY-MM-DD")==
this.startDate.format("YYYY-MM-DD")&&k.push("active","start-date");null!=this.endDate&&a[g][b].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&k.push("active","end-date");null!=this.endDate&&a[g][b]>this.startDate&&a[g][b]<this.endDate&&k.push("in-range");f=this.isCustomDate(a[g][b]);!1!==f&&("string"===typeof f?k.push(f):Array.prototype.push.apply(k,f));f="";l=!1;for(n=0;n<k.length;n++)f+=k[n]+" ","disabled"==k[n]&&(l=!0);l||(f+="available");p+='<td class="'+f.replace(/^\s+|\s+$/g,"")+'" data-title="r'+
g+"c"+b+'">'+a[g][b].date()+"</td>"}p+="</tr>"}p+="</tbody>";p+="</table>";this.container.find(".calendar."+d+" .calendar-table").html(p)},renderTimePicker:function(d){if("right"!=d||this.endDate){var a,b,e,c=this.maxDate;!this.dateLimit||this.maxDate&&!this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)||(c=this.startDate.clone().add(this.dateLimit));"left"==d?(b=this.startDate.clone(),e=this.minDate):"right"==d&&(b=this.endDate.clone(),e=this.startDate,a=this.container.find(".calendar.right .calendar-time div"),
""!=a.html()&&(b.hour(a.find(".hourselect option:selected").val()||b.hour()),b.minute(a.find(".minuteselect option:selected").val()||b.minute()),b.second(a.find(".secondselect option:selected").val()||b.second()),this.timePicker24Hour||(a=a.find(".ampmselect option:selected").val(),"PM"===a&&12>b.hour()&&b.hour(b.hour()+12),"AM"===a&&12===b.hour()&&b.hour(0))),b.isBefore(this.startDate)&&(b=this.startDate.clone()),c&&b.isAfter(c)&&(b=c.clone()));a='<select class="hourselect">';for(var k=this.timePicker24Hour?
23:12,f=this.timePicker24Hour?0:1;f<=k;f++){var n=f;this.timePicker24Hour||(n=12<=b.hour()?12==f?12:f+12:12==f?0:f);var q=b.clone().hour(n),l=!1;e&&q.minute(59).isBefore(e)&&(l=!0);c&&q.minute(0).isAfter(c)&&(l=!0);a=n!=b.hour()||l?l?a+('<option value="'+f+'" disabled="disabled" class="disabled">'+f+"</option>"):a+('<option value="'+f+'">'+f+"</option>"):a+('<option value="'+f+'" selected="selected">'+f+"</option>")}a+='</select> : <select class="minuteselect">';for(f=0;60>f;f+=this.timePickerIncrement)k=
10>f?"0"+f:f,q=b.clone().minute(f),l=!1,e&&q.second(59).isBefore(e)&&(l=!0),c&&q.second(0).isAfter(c)&&(l=!0),a=b.minute()!=f||l?l?a+('<option value="'+f+'" disabled="disabled" class="disabled">'+k+"</option>"):a+('<option value="'+f+'">'+k+"</option>"):a+('<option value="'+f+'" selected="selected">'+k+"</option>");a+="</select> ";if(this.timePickerSeconds){a+=': <select class="secondselect">';for(f=0;60>f;f++)k=10>f?"0"+f:f,q=b.clone().second(f),l=!1,e&&q.isBefore(e)&&(l=!0),c&&q.isAfter(c)&&(l=
!0),a=b.second()!=f||l?l?a+('<option value="'+f+'" disabled="disabled" class="disabled">'+k+"</option>"):a+('<option value="'+f+'">'+k+"</option>"):a+('<option value="'+f+'" selected="selected">'+k+"</option>");a+="</select> "}this.timePicker24Hour||(a+='<select class="ampmselect">',q=f="",e&&b.clone().hour(12).minute(0).second(0).isBefore(e)&&(f=' disabled="disabled" class="disabled"'),c&&b.clone().hour(0).minute(0).second(0).isAfter(c)&&(q=' disabled="disabled" class="disabled"'),a=12<=b.hour()?
a+('<option value="AM"'+f+'>AM</option><option value="PM" selected="selected"'+q+">PM</option>"):a+('<option value="AM" selected="selected"'+f+'>AM</option><option value="PM"'+q+">PM</option>"),a+="</select>");this.container.find(".calendar."+d+" .calendar-time div").html(a)}},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),
this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled"))},move:function(){var d=0,a=0,b=e(window).width();this.parentEl.is("body")||(d=this.parentEl.offset().top-this.parentEl.scrollTop(),a=this.parentEl.offset().left-
this.parentEl.scrollLeft(),b=this.parentEl[0].clientWidth+this.parentEl.offset().left);d="up"==this.drops?this.element.offset().top-this.container.outerHeight()-d:this.element.offset().top+this.element.outerHeight()-d;this.container["up"==this.drops?"addClass":"removeClass"]("dropup");"left"==this.opens?(this.container.css({top:d,right:b-this.element.offset().left-this.element.outerWidth(),left:"auto"}),0>this.container.offset().left&&this.container.css({right:"auto",left:9})):"center"==this.opens?
(this.container.css({top:d,left:this.element.offset().left-a+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),0>this.container.offset().left&&this.container.css({right:"auto",left:9})):(this.container.css({top:d,left:this.element.offset().left-a,right:"auto"}),this.container.offset().left+this.container.outerWidth()>e(window).width()&&this.container.css({left:"auto",right:0}))},show:function(d){this.isShowing||(this._outsideClickProxy=e.proxy(function(a){this.outsideClick(a)},
this),e(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),e(window).on("resize.daterangepicker",e.proxy(function(a){this.move(a)},this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),
this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(d){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.updateElement(),e(document).off(".daterangepicker"),e(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",
this),this.isShowing=!1)},toggle:function(d){this.isShowing?this.hide():this.show()},outsideClick:function(d){var a=e(d.target);"focusin"==d.type||a.closest(this.element).length||a.closest(this.container).length||a.closest(".calendar-table").length||(this.hide(),this.element.trigger("outsideClick.daterangepicker",this))},showCalendars:function(){this.container.addClass("show-calendar");this.move();this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar");
this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(d){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(d=d.target.getAttribute("data-range-key"),d==this.locale.customRangeLabel?this.updateView():(d=this.ranges[d],this.container.find("input[name=daterangepicker_start]").val(d[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(d[1].format(this.locale.format))))},
clickRange:function(d){this.chosenLabel=d=d.target.getAttribute("data-range-key");d==this.locale.customRangeLabel?this.showCalendars():(d=this.ranges[d],this.startDate=d[0],this.endDate=d[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply())},clickPrev:function(d){e(d.target).parents(".calendar").hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,
"month")):this.rightCalendar.month.subtract(1,"month");this.updateCalendars()},clickNext:function(d){e(d.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month"));this.updateCalendars()},hoverDate:function(d){if(e(d.target).hasClass("available")){var a=e(d.target).attr("data-title"),b=a.substr(1,1),a=a.substr(3,1),c=e(d.target).parents(".calendar").hasClass("left")?this.leftCalendar.calendar[b][a]:
this.rightCalendar.calendar[b][a];this.endDate&&!this.container.find("input[name=daterangepicker_start]").is(":focus")?this.container.find("input[name=daterangepicker_start]").val(c.format(this.locale.format)):this.endDate||this.container.find("input[name=daterangepicker_end]").is(":focus")||this.container.find("input[name=daterangepicker_end]").val(c.format(this.locale.format));var m=this.leftCalendar,k=this.rightCalendar,f=this.startDate;this.endDate||this.container.find(".calendar tbody td").each(function(a,
d){if(!e(d).hasClass("week")){var b=e(d).attr("data-title"),h=b.substr(1,1),b=b.substr(3,1),h=e(d).parents(".calendar").hasClass("left")?m.calendar[h][b]:k.calendar[h][b];h.isAfter(f)&&h.isBefore(c)||h.isSame(c,"day")?e(d).addClass("in-range"):e(d).removeClass("in-range")}})}},clickDate:function(d){if(e(d.target).hasClass("available")){var a=e(d.target).attr("data-title"),b=a.substr(1,1),a=a.substr(3,1),b=e(d.target).parents(".calendar").hasClass("left")?this.leftCalendar.calendar[b][a]:this.rightCalendar.calendar[b][a];
if(this.endDate||b.isBefore(this.startDate,"day")){if(this.timePicker){a=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour){var c=this.container.find(".left .ampmselect").val();"PM"===c&&12>a&&(a+=12);"AM"===c&&12===a&&(a=0)}var c=parseInt(this.container.find(".left .minuteselect").val(),10),m=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,b=b.clone().hour(a).minute(c).second(m)}this.endDate=null;this.setStartDate(b.clone())}else!this.endDate&&
b.isBefore(this.startDate)?this.setEndDate(this.startDate.clone()):(this.timePicker&&(a=parseInt(this.container.find(".right .hourselect").val(),10),this.timePicker24Hour||(c=this.container.find(".right .ampmselect").val(),"PM"===c&&12>a&&(a+=12),"AM"===c&&12===a&&(a=0)),c=parseInt(this.container.find(".right .minuteselect").val(),10),m=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,b=b.clone().hour(a).minute(c).second(m)),this.setEndDate(b.clone()),this.autoApply&&
(this.calculateChosenLabel(),this.clickApply()));this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply());this.updateView();d.stopPropagation()}},calculateChosenLabel:function(){var d=!0,a=0,b;for(b in this.ranges){if(this.timePicker){var c=this.timePickerSeconds?"YYYY-MM-DD hh:mm:ss":"YYYY-MM-DD hh:mm";if(this.startDate.format(c)==this.ranges[b][0].format(c)&&this.endDate.format(c)==this.ranges[b][1].format(c)){d=!1;this.chosenLabel=this.container.find(".ranges li:eq("+
a+")").addClass("active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[b][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[b][1].format("YYYY-MM-DD")){d=!1;this.chosenLabel=this.container.find(".ranges li:eq("+a+")").addClass("active").html();break}a++}d&&(this.chosenLabel=this.showCustomRangeLabel?this.container.find(".ranges li:last").addClass("active").html():null,this.showCalendars())},clickApply:function(d){this.hide();this.element.trigger("apply.daterangepicker",
this)},clickCancel:function(d){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.hide();this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(d){d=e(d.target).closest(".calendar").hasClass("left");var a=this.container.find(".calendar."+(d?"left":"right")),b=parseInt(a.find(".monthselect").val(),10),a=a.find(".yearselect").val();!d&&(a<this.startDate.year()||a==this.startDate.year()&&b<this.startDate.month())&&(b=this.startDate.month(),a=this.startDate.year());
this.minDate&&(a<this.minDate.year()||a==this.minDate.year()&&b<this.minDate.month())&&(b=this.minDate.month(),a=this.minDate.year());this.maxDate&&(a>this.maxDate.year()||a==this.maxDate.year()&&b>this.maxDate.month())&&(b=this.maxDate.month(),a=this.maxDate.year());d?(this.leftCalendar.month.month(b).year(a),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(b).year(a),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,
"month")));this.updateCalendars()},timeChanged:function(b){var a=e(b.target).closest(".calendar"),c=a.hasClass("left");b=parseInt(a.find(".hourselect").val(),10);var g=parseInt(a.find(".minuteselect").val(),10),m=this.timePickerSeconds?parseInt(a.find(".secondselect").val(),10):0;this.timePicker24Hour||(a=a.find(".ampmselect").val(),"PM"===a&&12>b&&(b+=12),"AM"===a&&12===b&&(b=0));c?(c=this.startDate.clone(),c.hour(b),c.minute(g),c.second(m),this.setStartDate(c),this.singleDatePicker?this.endDate=
this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==c.format("YYYY-MM-DD")&&this.endDate.isBefore(c)&&this.setEndDate(c.clone())):this.endDate&&(c=this.endDate.clone(),c.hour(b),c.minute(g),c.second(m),this.setEndDate(c));this.updateCalendars();this.updateFormInputs();this.renderTimePicker("left");this.renderTimePicker("right")},formInputsChanged:function(b){b=e(b.target).closest(".calendar").hasClass("right");var a=c(this.container.find('input[name="daterangepicker_start"]').val(),
this.locale.format),h=c(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);a.isValid()&&h.isValid()&&(b&&h.isBefore(a)&&(a=h.clone()),this.setStartDate(a),this.setEndDate(h),b?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format)));this.updateView()},formInputsFocused:function(b){this.container.find('input[name="daterangepicker_start"], input[name="daterangepicker_end"]').removeClass("active");
e(b.target).addClass("active");e(b.target).closest(".calendar").hasClass("right")&&(this.endDate=null,this.setStartDate(this.startDate.clone()),this.updateView())},formInputsBlurred:function(b){this.endDate||(b=this.container.find('input[name="daterangepicker_end"]').val(),b=c(b,this.locale.format),b.isValid()&&(this.setEndDate(b),this.updateView()))},formInputsKeydown:function(b){13===b.keyCode&&(b.preventDefault(),this.formInputsChanged(b))},elementChanged:function(){if(this.element.is("input")&&
this.element.val().length){var b=this.element.val().split(this.locale.separator),a=null,e=null;2===b.length&&(a=c(b[0],this.locale.format),e=c(b[1],this.locale.format));if(this.singleDatePicker||null===a||null===e)e=a=c(this.element.val(),this.locale.format);a.isValid()&&e.isValid()&&(this.setStartDate(a),this.setEndDate(e),this.updateView())}},keydown:function(b){9!==b.keyCode&&13!==b.keyCode||this.hide();27===b.keyCode&&(b.preventDefault(),b.stopPropagation(),this.hide())},updateElement:function(){this.element.is("input")&&
!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))},remove:function(){this.container.remove();this.element.off(".daterangepicker");this.element.removeData()}};e.fn.daterangepicker=function(c,a){var h=e.extend(!0,
{},e.fn.daterangepicker.defaultOptions,c);this.each(function(){var c=e(this);c.data("daterangepicker")&&c.data("daterangepicker").remove();c.data("daterangepicker",new b(c,h,a))});return this};return b});var glArea_List=[],LOAD_DEVICE_NUM=20,RECORD_PAGE_COUNT=5,PreLoadIndex=-1,CurrentLoadIndex=0,glCurrentArea_clicktime=new Date("2019/01/01"),glCurrentArea_id="",glTargetStartDate=null,glTargetEndDate=null,glCurrentArea_Records=[],glDataLoading=0;check_loading_status();
function check_loading_status(){switch(CurrentLoadIndex){case 0:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_maparea());break;case 1:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,click_area(""),CurrentLoadIndex=2);case 2:PreLoadIndex!=CurrentLoadIndex&&
(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex)}1!=CurrentLoadIndex?setTimeout(check_loading_status,100):console.log("check_loading_status() Stop.")}
function load_maparea(){$.getJSON(gl_target_server+"/php/map.php","project_id="+project_id+"&loadLocationArea=1",function(c){var e=0;$.each(c,function(b,c){var a=JSON.parse(c);c={};c.areaid=a.properties.areaid;c.areaname=a.properties.areaname;c.areatype=a.properties.areatype;glArea_List.push(c);console.log("areaid:"+c.areaid+", areaname:"+c.areaname+", areatype:"+c.areatype);e++})}).success(function(){add_areas_to_table();CurrentLoadIndex=1}).error(function(){CurrentLoadIndex=1}).complete(function(){CurrentLoadIndex=
1})}
function add_areas_to_table(){for(var c=document.getElementById("area_list_content");1<=c.rows.length;)c.deleteRow(0);console.log("add_areas_to_table() glArea_List.length:"+glArea_List.length);for(var e=0;e<glArea_List.length;e++){var b=glArea_List[e],d=document.createElement("tr");c.appendChild(d);var a=document.createElement("td");a.textContent=e+1;a.setAttribute("id","id_row_index_"+b.areaid);a.setAttribute("onclick",'click_area("'+b.areaid+'");return false;');d.appendChild(a);a=document.createElement("td");a.setAttribute("id",
"id_row_areaname_"+b.areaid);a.setAttribute("onclick",'click_area("'+b.areaid+'");return false;');d.appendChild(a);var h=document.createElement("span");h.setAttribute("style","display:inline;padding:.1em .6em .3em;font-size:95%;font-weight:700;line-height:1;position:relative;top:-1px;color:#fff;border-radius:2px;background-color:#4b4");h.textContent=b.areaname;a.appendChild(h);a=document.createElement("td");a.setAttribute("id","id_row_areatype_"+b.areaid);a.setAttribute("onclick",'click_area("'+b.areaid+
'");return false;');d.appendChild(a);d=document.createElement("span");d.setAttribute("style","font-size:14px; font-weight:bold; color:#330033;");"0"==b.areatype&&d.setAttribute("class","badge bg-yellow-active");"1"==b.areatype&&d.setAttribute("class","badge bg-fuchsia");"2"==b.areatype&&d.setAttribute("class","badge bg-green-active");"3"==b.areatype&&d.setAttribute("class","badge bg-purple");"4"==b.areatype&&d.setAttribute("class","badge bg-teal-active");"5"==b.areatype&&d.setAttribute("class","badge bg-green-active");
"6"==b.areatype&&d.setAttribute("class","badge bg-purple");d.textContent=get_Areatype(b.areatype);a.appendChild(d)}}
function click_area(c){var e=Math.abs((new Date).getTime()-glCurrentArea_clicktime.getTime());if(500>e||1==glDataLoading)console.log("click_area() diffTimeInMS:"+e);else{glDataLoading=1;glCurrentArea_clicktime=new Date;for(e=0;e<glArea_List.length;e++){var b=glArea_List[e],d=document.getElementById("id_row_index_"+b.areaid),a=document.getElementById("id_row_areaname_"+b.areaid),h=document.getElementById("id_row_areatype_"+b.areaid),g="background-color:#FFFFFF;";if(0==glCurrentArea_id.length||b.areaid===
c)glCurrentArea_id=b.areaid,g="background-color:#CCEEFF;";d.setAttribute("style",g);a.setAttribute("style",g);h.setAttribute("style",g)}load_area_record()}}function load_area_record(){console.log("load_area_record() glCurrentArea_id:"+glCurrentArea_id);var c=document.getElementById("record_box_title");void 0!=c&&(c.textContent="Loading...");glCurrentArea_Records=[];glTargetEndDate=glTargetStartDate=null;load_recent_record_express(glCurrentArea_id);clear_timeline()}
function load_recent_record_express(c){void 0==glTargetStartDate&&(glTargetStartDate=getAreaTargetDate(0));console.log("load_recent_record_express() areaId:"+c+" glTargetStartDate:"+glTargetStartDate);$.getJSON(gl_target_server+"/php/dashboarddata.php","loadrecentrollcallrecord=1&areaid="+c+"&recentdays="+RECORD_PAGE_COUNT+"&startdate="+glTargetStartDate+"&project_id="+project_id,function(c){glTargetEndDate=glTargetStartDate;var b=convertTimelineDateToNumber(glTargetEndDate),d;for(d in c){var a=c[d],
h=a.issueday,g={};g.issueday=h;g.data=a.data;a=convertTimelineDateToNumber(h);a<b&&(b=a,glTargetEndDate=h);glCurrentArea_Records.push(g)}console.log("load_recent_record_express() length:"+glCurrentArea_Records.length+", glTargetStartDate:"+glTargetStartDate+", glTargetEndDate:"+glTargetEndDate);update_show_data()})}
function update_show_data(){show_data_on_timeline();glDataLoading=0;var c=document.getElementById("record_box_title");if(void 0!=c){for(var e="",b=0;b<glArea_List.length;b++){var d=glArea_List[b];glCurrentArea_id===d.areaid&&(e=d.areaname)}c.textContent=e}}
function show_data_on_timeline(){var c=document.getElementById("main_timeline");if(0==glCurrentArea_Records.length)var e=create_nodata_btn();else{for(e in glCurrentArea_Records){var b=glCurrentArea_Records[e],d=create_time_label(b.issueday);c.appendChild(d);b=create_area_rollcall_data_info("table_"+b.issueday,b.issueday,b);c.appendChild(b)}e=glCurrentArea_Records.length<RECORD_PAGE_COUNT?create_nodata_btn():create_reload_btn()}c.appendChild(e)}
function create_area_rollcall_data_info(c,e,b){var d=document.createElement("li"),a=document.createElement("i");a.setAttribute("class","fa fa-location-arrow bg-blue");d.appendChild(a);a=document.createElement("div");a.setAttribute("class","timeline-item");d.appendChild(a);var h=create_timeline_time_header("\u5340\u57df\u9032\u51fa\u7d00\u9304");a.appendChild(h);h=create_timeline_time_body(c,"\u5171 "+b.data.length+" \u500b\u4eba\u54e1");a.appendChild(h);b=create_tag_badge(b.data);a.appendChild(b);
c=create_timeline_time_footer(e,c);a.appendChild(c);return d}function reload_rollcall_info(){glCurrentArea_Records=[];glTargetStartDate=getTargetDateTime(glTargetEndDate,-1);glTargetEndDate=getTargetDateTime(glTargetStartDate,RECORD_PAGE_COUNT);console.log("reload_rollcall_info() glCurrentArea_id:"+glCurrentArea_id+" glTargetStartDate:"+glTargetStartDate+" glTargetEndDate:"+glTargetEndDate);removeElement("reload_btn_id");load_recent_record_express(glCurrentArea_id)}
function load_area_rollcall_detail(c,e){var b=document.getElementById("timeline_footer_btn1_"+e);if(void 0!=b){if("\u8b80\u53d6\u4e2d..."===b.textContent||"\u8b80\u53d6\u5b8c\u6210"===b.textContent)return;b.textContent="\u8b80\u53d6\u4e2d..."}show_detail_rollcall(e,c)}
function show_detail_rollcall(c,e){var b=convertToTimelineDate(e);console.log("show_detail_rollcall() uiid:"+c+", query_date:"+b);b="record_box_table_area_"+c;if(void 0!=document.getElementById(b))console.log("show_detail_rollcall() table_id:"+b+", existed!");else for(var d in glCurrentArea_Records)if(b=glCurrentArea_Records[d],e===b.issueday){put_record_to_table(c,glCurrentArea_id,b.data);break}}
function put_record_to_table(c,e,b){e=document.getElementById("timeline_footer_"+c);var d=create_record_table_rollcall(c);e.appendChild(d);e=b.length;var a=50*(e+1)+50;5<e&&(a=300);d.setAttribute("style","height:"+a+"px;overflow:scroll");d=document.getElementById("record_table_rollcall_body_"+c);a=1;for(index in b){var h=b[index],h=create_course_rollcall_row(a,h);d.appendChild(h);a++}update_footer_btn1_ui(c,"\u8b80\u53d6\u5b8c\u6210");0==e&&(h={nodeid:"",nodename:"\u7121\u8cc7\u6599",count:"",max_time:"",
min_time:"",total_time:""},h=create_course_rollcall_row(0,h),d.appendChild(h))}
function create_course_rollcall_row(c,e){var b=0,d=document.createElement("tr");0==c%2&&d.setAttribute("bgcolor","#ebebe0");d.setAttribute("id","table_row_"+c);d.appendChild(document.createElement("td"));d.cells[b].appendChild(document.createTextNode(""+c));b++;d.appendChild(document.createElement("td"));var a=document.createElement("span");a.setAttribute("class","badge bg-green");a.textContent=e.nodename;d.cells[b].appendChild(a);b++;a=document.createElement("td");d.appendChild(a);var h=document.createElement("span");
h.setAttribute("class","label label-warning");h.textContent=convertPrettyRollCallTime(e.min_time);a.appendChild(h);b++;a=document.createElement("td");d.appendChild(a);h=document.createElement("span");h.setAttribute("class","label label-info");h.textContent=convertPrettyRollCallTime(e.max_time);a.appendChild(h);b++;d.appendChild(document.createElement("td"));d.cells[b].appendChild(document.createTextNode(convertPrettyTime(convertFormatTime(e.totaltime))));return d}
function create_record_table_rollcall(c){var e=document.createElement("div");e.setAttribute("id","record_box_table_area_"+c);var b=document.createElement("div");b.setAttribute("class","box");e.appendChild(b);var d=document.createElement("div");d.setAttribute("class","box-body no-padding");b.appendChild(d);b=document.createElement("table");b.setAttribute("class","table table-bordered");d.appendChild(b);var a=document.createElement("thead");b.appendChild(a);d=document.createElement("tr");d.setAttribute("bgcolor",
"#cce6ff");d.setAttribute("id","record_table_head");a.appendChild(d);a=document.createElement("th");a.setAttribute("style","width: 10px");a.textContent="#";d.appendChild(a);a=document.createElement("th");a.setAttribute("style","width: 150px");a.textContent="\u4eba\u54e1\u540d\u7a31";d.appendChild(a);a=document.createElement("th");a.setAttribute("style","width: 120px; text-align:center");a.textContent="\u6700\u65e9\u9032\u5165\u6642\u9593";d.appendChild(a);a=document.createElement("th");a.setAttribute("style",
"width: 120px; text-align:center");a.textContent="\u6700\u665a\u96e2\u958b\u6642\u9593";d.appendChild(a);a=document.createElement("th");a.textContent="\u505c\u7559\u7e3d\u6642\u9593";d.appendChild(a);d=document.createElement("tbody");d.setAttribute("id","record_table_rollcall_body_"+c);b.appendChild(d);return e}function update_footer_btn1_ui(c,e){var b=document.getElementById("timeline_footer_btn1_"+c);void 0!=b&&(b.textContent=e)}
function create_timeline_time_header(c){var e=document.createElement("h3");e.setAttribute("class","timeline-header");e.textContent=c;return e}function create_timeline_time_body(c,e){var b=document.createElement("div");b.setAttribute("class","timeline-body");b.textContent=e;return b}
function create_timeline_time_footer(c,e){var b=document.createElement("div");b.setAttribute("class","timeline-footer");var d=document.createElement("a");d.setAttribute("class","btn btn-primary btn-xs");d.setAttribute("onclick",'load_area_rollcall_detail("'+c+'","'+e+'");');d.setAttribute("id","timeline_footer_btn1_"+e);d.textContent="\u67e5\u770b\u8a73\u7d30\u8cc7\u6599";b.appendChild(d);d=document.createElement("div");d.setAttribute("id","timeline_footer_"+e);b.appendChild(d);return b}
function create_tag_badge(c){var e=document.createElement("div"),b=document.createElement("table");e.appendChild(b);var d=document.createElement("tr");b.appendChild(d);b=document.createElement("td");b.setAttribute("style","width:50px;text-align:center;");b.textContent="\u4eba\u54e1:";d.appendChild(b);var a;for(a=0;a<c.length;a++){var h=c[a],b=document.createElement("td");d.appendChild(b);var g=document.createElement("span");g.setAttribute("class","badge bg-green");g.textContent=h.nodename;b.appendChild(g)}return e}
function create_nodata_btn(){var c=document.createElement("li"),e=document.createElement("span");e.setAttribute("class","bg-red");c.appendChild(e);var b=document.createElement("button");b.setAttribute("type","button");b.setAttribute("class","btn btn-default btn-lrg ajax");b.textContent=DEFINE_STRING_nodata;e.appendChild(b);return c}
function create_reload_btn(){var c=document.createElement("li");c.setAttribute("id","reload_btn_id");c.setAttribute("class","time-label");var e=document.createElement("span");e.setAttribute("class","bg-green");c.appendChild(e);var b=document.createElement("button");b.setAttribute("type","button");b.setAttribute("onclick","reload_rollcall_info();");b.setAttribute("class","btn btn-default btn-lrg ajax");b.setAttribute("title","Ajax Request");b.setAttribute("id","AjaxLoadMode");b.textContent=DEFINE_STRING_reload;
e.appendChild(b);e=document.createElement("i");e.setAttribute("class","fa fa-spin fa-refresh");b.appendChild(e);return c}function clear_timeline(){for(var c=document.getElementById("main_timeline");c.firstChild;)c.removeChild(c.firstChild)}function create_time_label(c){var e=document.createElement("li");e.setAttribute("class","time-label");var b=document.createElement("span");b.setAttribute("class","bg-yellow");b.textContent=c;e.appendChild(b);return e}
function removeElement(c){c=document.getElementById(c);return c.parentNode.removeChild(c)}function convertPrettyDateOnly(c){var e=moment(c,"YYYY-MM-DD HH:mm:ss");c=e.format("YYYY");var b=e.format("M"),e=e.format("D");return c+"\u5e74"+b+"\u6708"+e+"\u65e5 "}function convertPrettyTimeOnly(c){var e=moment(c,"YYYY-MM-DD HH:mm:ss");c=e.hour();var b=e.minutes(),e=e.seconds(),d="";0<c&&(d+=c+"\u9ede");0<b&&(d+=b+"\u5206");0<e&&(d+=e+"\u79d2");return d}
function getTodayDate(){var c=new Date;return today=""+c.getFullYear()+(c.getMonth()+1)+c.getDate()}function convertToTimelineDate(c){return moment(c,"YYYYMMDD").format("YYYY-MM-DD")}function convertTimelineDateToNumber(c){c=moment(c,"YYYY-MM-DD").format("YYYYMMDD");return Number(c)}function getAreaTargetDate(c){return moment().add(c,"d").format("YYYY-MM-DD")}function getTargetDateTime(c,e){return moment(c,"YYYY-MM-DD").add(e,"d").format("YYYY-MM-DD HH:mm:ss")}
function convertPrettyTime(c){var e=moment(c,"HH:mm:ss");c=e.hour();var b=e.minutes(),e=e.seconds(),d="";0<c&&(d+=c+"\u5c0f\u6642");0<b&&(d+=b+"\u5206");0<e&&(d+=e+"\u79d2");return d}function convertPrettyRollCallTime(c){var e=moment(c,"HH:mm");c=e.hour();var b=e.minutes();e.seconds();e="";0<=c&&(e+=c+"\u9ede");0<=b&&(e+=b+"\u5206");return e}function convertFormatTime(c){return moment.utc(1E3*c).format("HH:mm:ss")}
function get_Areatype(c){var e="";"0"==c?e="\u666e\u901a":"1"==c?e="\u96fb\u5b50\u570d\u6b04":"2"==c?e="\u96fb\u5b50\u9ede\u540d":"3"==c?e="\u623f\u9593":"4"==c?e="\u6559\u5ba4":"5"==c?e="\u75c5\u623f":"6"==c&&(e="\u75c5\u5e8a");return e}function open_footprintareas_page(){window.open("/index.php/vilsfootprintareas/"+project_id,"_blank").focus()};
