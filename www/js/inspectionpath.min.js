var $jscomp={scope:{},findInternal:function(a,b,c){a instanceof String&&(a=String(a));for(var f=a.length,e=0;e<f;e++){var d=a[e];if(b.call(c,d,e,a))return{i:e,v:d}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,c,f){if(b){c=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var e=a[f];e in c||(c[e]={});c=c[e]}a=a[a.length-1];f=c[a];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,f={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
(function(a,b,c,f){var e=function(d,b){this.widget="";this.$element=a(d);this.defaultTime=b.defaultTime;this.disableFocus=b.disableFocus;this.isOpen=b.isOpen;this.minuteStep=b.minuteStep;this.modalBackdrop=b.modalBackdrop;this.secondStep=b.secondStep;this.showInputs=b.showInputs;this.showMeridian=b.showMeridian;this.showSeconds=b.showSeconds;this.template=b.template;this.appendWidgetTo=b.appendWidgetTo;this.upArrowStyle=b.upArrowStyle;this.downArrowStyle=b.downArrowStyle;this.containerClass=b.containerClass;
this._init()};e.prototype={constructor:e,_init:function(){var d=this;if(this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend")){if(this.$element.parent(".input-append, .input-prepend").find(".add-on").length)this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":a.proxy(this.showWidget,this)});else this.$element.closest(this.containerClass).find(".add-on").on({"click.timepicker":a.proxy(this.showWidget,this)});this.$element.on({"focus.timepicker":a.proxy(this.highlightUnit,
this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,this),"blur.timepicker":a.proxy(this.blurElement,this)})}else if(this.template)this.$element.on({"focus.timepicker":a.proxy(this.showWidget,this),"click.timepicker":a.proxy(this.showWidget,this),"blur.timepicker":a.proxy(this.blurElement,this)});else this.$element.on({"focus.timepicker":a.proxy(this.highlightUnit,this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,
this),"blur.timepicker":a.proxy(this.blurElement,this)});this.$widget=!1!==this.template?a(this.getTemplate()).prependTo(this.$element.parents(this.appendWidgetTo)).on("click",a.proxy(this.widgetClick,this)):!1;this.showInputs&&!1!==this.$widget&&this.$widget.find("input").each(function(){a(this).on({"click.timepicker":function(){a(this).select()},"keydown.timepicker":a.proxy(d.widgetKeydown,d)})});this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=f;this.updateFromElementVal()},
decrementHour:function(){if(this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else 0===this.hour?this.hour=23:this.hour--;this.update()},decrementMinute:function(a){a=a?this.minute-a:this.minute-this.minuteStep;0>a?(this.decrementHour(),this.minute=a+60):this.minute=a;this.update()},decrementSecond:function(){var a=this.second-this.secondStep;0>a?(this.decrementMinute(!0),
this.second=a+60):this.second=a;this.update()},elementKeydown:function(a){switch(a.keyCode){case 9:this.updateFromElementVal();switch(this.highlightedUnit){case "hour":a.preventDefault();this.highlightNextUnit();break;case "minute":if(this.showMeridian||this.showSeconds)a.preventDefault(),this.highlightNextUnit();break;case "second":this.showMeridian&&(a.preventDefault(),this.highlightNextUnit())}break;case 27:this.updateFromElementVal();break;case 37:a.preventDefault();this.highlightPrevUnit();this.updateFromElementVal();
break;case 38:a.preventDefault();switch(this.highlightedUnit){case "hour":this.incrementHour();this.highlightHour();break;case "minute":this.incrementMinute();this.highlightMinute();break;case "second":this.incrementSecond();this.highlightSecond();break;case "meridian":this.toggleMeridian(),this.highlightMeridian()}break;case 39:a.preventDefault();this.updateFromElementVal();this.highlightNextUnit();break;case 40:switch(a.preventDefault(),this.highlightedUnit){case "hour":this.decrementHour();this.highlightHour();
break;case "minute":this.decrementMinute();this.highlightMinute();break;case "second":this.decrementSecond();this.highlightSecond();break;case "meridian":this.toggleMeridian(),this.highlightMeridian()}}},formatTime:function(a,b,c,e){return(10>a?"0"+a:a)+":"+(10>b?"0"+b:b)+(this.showSeconds?":"+(10>c?"0"+c:c):"")+(this.showMeridian?" "+e:"")},getCursorPosition:function(){var a=this.$element.get(0);if("selectionStart"in a)return a.selectionStart;if(c.selection){a.focus();var b=c.selection.createRange(),
e=c.selection.createRange().text.length;b.moveStart("character",-a.value.length);return b.text.length-e}},getTemplate:function(){var a,b,c,e,f;this.showInputs?(b='<input type="text" name="hour" class="bootstrap-timepicker-hour form-control" maxlength="2"/>',c='<input type="text" name="minute" class="bootstrap-timepicker-minute form-control" maxlength="2"/>',e='<input type="text" name="second" class="bootstrap-timepicker-second form-control" maxlength="2"/>',f='<input type="text" name="meridian" class="bootstrap-timepicker-meridian form-control" maxlength="2"/>'):
(b='<span class="bootstrap-timepicker-hour"></span>',c='<span class="bootstrap-timepicker-minute"></span>',e='<span class="bootstrap-timepicker-second"></span>',f='<span class="bootstrap-timepicker-meridian"></span>');b='<table><tr><td><a href="#" data-action="incrementHour"><i class="'+this.upArrowStyle+'"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="'+this.upArrowStyle+'"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="'+
this.upArrowStyle+'"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="'+this.upArrowStyle+'"></i></a></td>':"")+"</tr><tr><td>"+b+'</td> <td class="separator">:</td><td>'+c+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+e+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+f+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="'+this.downArrowStyle+
'"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="'+this.downArrowStyle+'"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="'+this.downArrowStyle+'"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="'+this.downArrowStyle+'"></i></a></td>':"")+"</tr></table>";switch(this.template){case "modal":a='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+
(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">\u00d7</a><h3>Pick a Time</h3></div><div class="modal-content">'+b+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case "dropdown":a='<div class="bootstrap-timepicker-widget dropdown-menu">'+b+"</div>"}return a},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},hideWidget:function(){!1!==
this.isOpen&&(this.showInputs&&this.updateFromWidgetInputs(),this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template&&this.$widget.modal?this.$widget.modal("hide"):this.$widget.removeClass("open"),a(c).off("mousedown.timepicker"),this.isOpen=!1)},highlightUnit:function(){this.position=this.getCursorPosition();0<=this.position&&2>=this.position?this.highlightHour():3<=this.position&&
5>=this.position?this.highlightMinute():6<=this.position&&8>=this.position?this.showSeconds?this.highlightSecond():this.highlightMeridian():9<=this.position&&11>=this.position&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case "hour":this.highlightMinute();break;case "minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case "second":this.showMeridian?this.highlightMeridian():this.highlightHour();
break;case "meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case "hour":this.highlightMeridian();break;case "minute":this.highlightHour();break;case "second":this.highlightMinute();break;case "meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var a=this.$element.get(0);this.highlightedUnit="hour";a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(0,2)},0)},highlightMinute:function(){var a=this.$element.get(0);
this.highlightedUnit="minute";a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(3,5)},0)},highlightSecond:function(){var a=this.$element.get(0);this.highlightedUnit="second";a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(6,8)},0)},highlightMeridian:function(){var a=this.$element.get(0);this.highlightedUnit="meridian";a.setSelectionRange&&(this.showSeconds?setTimeout(function(){a.setSelectionRange(9,11)},0):setTimeout(function(){a.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(11===
this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}23===this.hour?this.hour=0:(this.hour++,this.update())},incrementMinute:function(a){a=a?this.minute+a:this.minute+this.minuteStep-this.minute%this.minuteStep;59<a?(this.incrementHour(),this.minute=a-60):this.minute=a;this.update()},incrementSecond:function(){var a=this.second+this.secondStep-this.second%this.secondStep;59<a?(this.incrementMinute(!0),this.second=a-60):this.second=a;this.update()},remove:function(){a("document").off(".timepicker");
this.$widget&&this.$widget.remove();delete this.$element.data().timepicker},setDefaultTime:function(a){if(this.$element.val())this.updateFromElementVal();else if("current"===a){var b=new Date;a=b.getHours();var c=Math.floor(b.getMinutes()/this.minuteStep)*this.minuteStep,b=Math.floor(b.getSeconds()/this.secondStep)*this.secondStep,e="AM";this.showMeridian&&(0===a?a=12:12<=a?(12<a&&(a-=12),e="PM"):e="AM");this.hour=a;this.minute=c;this.second=b;this.meridian=e;this.update()}else!1===a?(this.second=
this.minute=this.hour=0,this.meridian="AM"):this.setTime(a)},setTime:function(a){var b;this.showMeridian?(a=a.split(" "),b=a[0].split(":"),this.meridian=a[1]):b=a.split(":");this.hour=parseInt(b[0],10);this.minute=parseInt(b[1],10);this.second=parseInt(b[2],10);isNaN(this.hour)&&(this.hour=0);isNaN(this.minute)&&(this.minute=0);if(this.showMeridian){12<this.hour?this.hour=12:1>this.hour&&(this.hour=12);if("am"===this.meridian||"a"===this.meridian)this.meridian="AM";else if("pm"===this.meridian||"p"===
this.meridian)this.meridian="PM";"AM"!==this.meridian&&"PM"!==this.meridian&&(this.meridian="AM")}else 24<=this.hour?this.hour=23:0>this.hour&&(this.hour=0);0>this.minute?this.minute=0:60<=this.minute&&(this.minute=59);this.showSeconds&&(isNaN(this.second)?this.second=0:0>this.second?this.second=0:60<=this.second&&(this.second=59));this.update()},showWidget:function(){if(!this.isOpen&&!this.$element.is(":disabled")){var b=this;a(c).on("mousedown.timepicker",function(c){0===a(c.target).closest(".bootstrap-timepicker-widget").length&&
b.hideWidget()});this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});this.disableFocus&&this.$element.blur();this.updateFromElementVal();if("modal"===this.template&&this.$widget.modal)this.$widget.modal("show").on("hidden",a.proxy(this.hideWidget,this));else!1===this.isOpen&&this.$widget.addClass("open");this.isOpen=!0}},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM";this.update()},
update:function(){this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}});this.updateElement();this.updateWidget()},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){var a=this.$element.val();a&&this.setTime(a)},updateWidget:function(){if(!1!==this.$widget){var a=10>this.hour?"0"+this.hour:this.hour,b=10>this.minute?"0"+this.minute:this.minute,
c=10>this.second?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(a),this.$widget.find("input.bootstrap-timepicker-minute").val(b),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(c),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(a),this.$widget.find("span.bootstrap-timepicker-minute").text(b),this.showSeconds&&
this.$widget.find("span.bootstrap-timepicker-second").text(c),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(!1!==this.$widget){var b=a("input.bootstrap-timepicker-hour",this.$widget).val()+":"+a("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+a("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+a("input.bootstrap-timepicker-meridian",this.$widget).val():
"");this.setTime(b)}},widgetClick:function(b){b.stopPropagation();b.preventDefault();if(b=a(b.target).closest("a").data("action"))this[b]()},widgetKeydown:function(b){var c=a(b.target).closest("input").attr("name");switch(b.keyCode){case 9:if(this.showMeridian){if("meridian"===c)return this.hideWidget()}else if(this.showSeconds){if("second"===c)return this.hideWidget()}else if("minute"===c)return this.hideWidget();this.updateFromWidgetInputs();break;case 27:this.hideWidget();break;case 38:b.preventDefault();
switch(c){case "hour":this.incrementHour();break;case "minute":this.incrementMinute();break;case "second":this.incrementSecond();break;case "meridian":this.toggleMeridian()}break;case 40:switch(b.preventDefault(),c){case "hour":this.decrementHour();break;case "minute":this.decrementMinute();break;case "second":this.decrementSecond();break;case "meridian":this.toggleMeridian()}}}};a.fn.timepicker=function(b){var c=Array.apply(null,arguments);c.shift();return this.each(function(){var f=a(this),l=f.data("timepicker"),
p="object"===typeof b&&b;l||f.data("timepicker",l=new e(this,a.extend({},a.fn.timepicker.defaults,p,a(this).data())));"string"===typeof b&&l[b].apply(l,c)})};a.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,secondStep:15,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:".bootstrap-timepicker",upArrowStyle:"glyphicon glyphicon-chevron-up",downArrowStyle:"glyphicon glyphicon-chevron-down",containerClass:"bootstrap-timepicker"};
a.fn.timepicker.Constructor=e})(jQuery,window,document);var glTags=[],glAnchors=[],gl_tag_num=0,gl_anchor_num=0,gl_locator_num=0,gl_tag_load_index=0,gl_anchor_load_index=0,gl_locator_load_index=0,LOAD_DEVICE_NUM=20,PreLoadIndex=-1,CurrentLoadIndex=0,glDropdown_checkbox_anchor_click=!1,glInspectionGroups=[],gl_inspectiongroup_num=0,gl_inspectiongroup_load_index=0,gl_active_group_index=1,gl_edit_group_info=-1,gl_edit_inspection_info_ui_index=-1,gl_show_create_inspectionpoint_btn=-1,gl_EditMode=!1;check_loading_status();
function check_loading_status(){switch(CurrentLoadIndex){case 0:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_devices());break;case 1:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_inspectiongroup_exist());break;case 2:PreLoadIndex!=CurrentLoadIndex&&
(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_inspectionpoint_exist())}3!=CurrentLoadIndex?setTimeout(check_loading_status,100):console.log("check_loading_status() Stop.")}
function load_inspectiongroup_exist(){$.getJSON(gl_target_server+"/php/inspectionpath.php","loadinspectiongroup=1&project_id="+project_id,function(a){for(var b=document.getElementById("inspectiongroup_nav_tabs");b.firstChild;)b.removeChild(b.firstChild);gl_inspectiongroup_load_index=gl_inspectiongroup_num=0;glInspectionGroups=[];var c=1;$.each(a,function(a,b){add_exist_inspectiongroup_tab(c,a,b);glInspectionGroups[gl_inspectiongroup_num]=b;c++;gl_inspectiongroup_num++});CurrentLoadIndex=2});return!1}
function load_inspectionpoint_exist(){console.log("load_inspectionpoint_exist() gl_inspectiongroup_load_index:"+gl_inspectiongroup_load_index+", gl_inspectiongroup_num:"+gl_inspectiongroup_num);if(gl_inspectiongroup_load_index>=gl_inspectiongroup_num)document.getElementById("INSPECTION_TABLE_MSG").innerText="",create_inspectiongroup_newBtn(),console.log("load_inspectionpoint_exist() Finished!"),gl_EditMode=-1==gl_edit_group_info?!1:!0,CurrentLoadIndex=3;else{var a=glInspectionGroups[gl_inspectiongroup_load_index].GroupID;
$.getJSON(gl_target_server+"/php/inspectionpath.php","loadinspectionpoint=1&project_id="+project_id+"&GroupID="+a,function(b){void 0==document.getElementById("inspectionPoint_table_"+a)&&(console.log("load_inspectionpoint_exist() create_inspectionPoint_table GroupID:"+a+", gl_inspectiongroup_load_index:"+gl_inspectiongroup_load_index),create_inspectionPoint_table(a,gl_inspectiongroup_load_index));var c=document.getElementById("inspectionGroup_table_body_"+a);if(void 0!=c)for(console.log("load_inspectionpoint_exist() clear old inspectionGroup_table_body");c.firstChild;)c.removeChild(c.firstChild);
c=document.getElementById("inspectionPoint_table_body_"+a);if(void 0!=c)for(console.log("load_inspectionpoint_exist() clear old inspectionPoint_table_body_");c.firstChild;)c.removeChild(c.firstChild);c=glInspectionGroups[gl_inspectiongroup_load_index];gl_edit_group_info==a?(console.log("load_inspectionpoint_exist() add_exist_inspectiongroup_edit_mode"),add_exist_inspectiongroup_edit_mode(a,gl_inspectiongroup_load_index+1,c),update_selected_inspectors(a)):(console.log("load_inspectionpoint_exist() add_exist_inspectiongroup"),
add_exist_inspectiongroup(a,gl_inspectiongroup_load_index+1,c));var f=Object.keys(b).length,e=1;$.each(b,function(b,c){var h=0;e==f&&(h=1);console.log("PathCount:"+f+", index:"+e+", lastPath:"+h);add_exist_inspectionpoint(a,e,gl_inspectiongroup_load_index+1,b,c,h);e++});1==gl_show_create_inspectionpoint_btn?add_inspectionpoint_CreateBtn(a,e,gl_inspectiongroup_load_index+1,"","",0,0,0,0):add_inspectionpoint_NewBtn(a,e,gl_inspectiongroup_load_index+1);gl_inspectiongroup_load_index++}).success(function(){gl_inspectiongroup_load_index!=
gl_active_group_index&&1!=gl_inspectiongroup_load_index||document.getElementById("inspectionPoint_table_"+a+"_tab").click();setTimeout(load_inspectionpoint_exist,10);$(".timepicker").timepicker({showInputs:!1})}).error(function(){}).complete(function(){});return!1}}
function add_exist_inspectiongroup_tab(a,b,c){var f=document.getElementById("inspectiongroup_nav_tabs"),e=document.createElement("li"),d=document.createElement("a");d.setAttribute("href","#inspectionPoint_table_"+b);d.setAttribute("data-toggle","tab");d.setAttribute("id","inspectionPoint_table_"+b+"_tab");d.setAttribute("onclick","inspection_tab_onclick("+a+", "+b+', "'+c.GroupName+'");return false;');var g=document.createElement("span");g.setAttribute("class","badge bg-blue-active");g.setAttribute("id",
"inspection_tab_"+b);g.textContent=c.GroupName;d.appendChild(g);e.appendChild(d);f.appendChild(e);console.log("add_exist_inspectiongroup_tab() ui_index:"+a+", gl_active_group_index:"+gl_active_group_index);a==gl_active_group_index&&e.setAttribute("class","active")}
function inspection_tab_onclick(a,b,c){gl_EditMode&&gl_edit_group_info==b&&(c=prompt("Edit Inspection Group Name:",c))&&(document.getElementById("inspectionPoint_table_"+b+"_tab").setAttribute("onclick","inspection_tab_onclick("+a+', "'+b+'", "'+c+'");return false;'),document.getElementById("inspection_tab_"+b).innerHTML=c)}
function create_inspectiongroup_newBtn(){var a=document.getElementById("inspectiongroup_nav_tabs"),b=document.createElement("li"),c=document.createElement("a");c.setAttribute("href","javascript:;");c.setAttribute("onclick","create_inspectiongroup();return false;");var f=document.createElement("span");f.setAttribute("class","badge bg-red");f.textContent="\u65b0\u589e\u8def\u7dda+";c.appendChild(f);b.appendChild(c);a.appendChild(b)}
function add_exist_inspectiongroup(a,b,c){var f=document.getElementById("inspectionGroup_table_body_"+a),e=0,d=document.createElement("tr");d.appendChild(document.createElement("td"));var g=document.createElement("span");g.setAttribute("class","badge bg-yellow-active");g.textContent=c.StartTime;d.cells[e].appendChild(g);e++;d.appendChild(document.createElement("td"));g=document.createElement("span");g.setAttribute("class","badge bg-yellow-active");g.textContent=c.EndTime;d.cells[e].appendChild(g);
e++;d.appendChild(document.createElement("td"));g=create_inspectors_node(c.Inspectors);d.cells[e].appendChild(g);e++;d.appendChild(document.createElement("td"));g=document.createElement("span");g.setAttribute("class","label label-warning");g.textContent=c.AlertTime+" \u5206\u9418\u524d";d.cells[e].appendChild(g);e++;d.appendChild(document.createElement("td"));g=document.createElement("button");g.setAttribute("title","Edit this Group");g.setAttribute("href","javascript:;");g.setAttribute("onclick",
"edit_inspectiongroup("+a+',"'+c.GroupName+'",'+b+");return false;");b=document.createElement("i");b.setAttribute("class","fa fa-edit");g.appendChild(b);d.cells[e].appendChild(g);b=document.createElement("button");b.setAttribute("title","Delete this Group");b.setAttribute("href","javascript:;");b.setAttribute("onclick","delete_inspectionGroup_confirmbox("+a+',"'+c.GroupName+'");return false;');a=document.createElement("i");a.setAttribute("class","fa fa-trash-o");b.appendChild(a);d.cells[e].appendChild(b);
"1"===c.AutoFeed&&(c=document.createElement("div"),a=document.createElement("label"),a.textContent="\u4f7f\u7528\u81ea\u52d5\u4e82\u6578\u586b\u5165\u5de1\u6aa2\u8cc7\u6599",c.appendChild(a),d.cells[e].appendChild(c));f.appendChild(d)}function create_inspectors_node(a){var b=document.createElement("span");a=a.split(",");for(var c=0;c<a.length;c++)for(var f=0;f<glTags.length;f++){var e=glTags[f],d=e[3],e=e[5];d===a[c]&&(d=create_inspector_node(d,e),b.appendChild(d))}return b}
function add_exist_inspectiongroup_edit_mode(a,b,c){var f=document.getElementById("inspectionGroup_table_body_"+a),e=0,d=document.createElement("tr");d.appendChild(document.createElement("td"));var g=document.createElement("div");g.setAttribute("class","bootstrap-timepicker");g.setAttribute("style","width:200px;");d.cells[e].appendChild(g);var h=document.createElement("div");h.setAttribute("class","input-group");g.appendChild(h);g=document.createElement("input");g.setAttribute("type","text");g.setAttribute("id",
"inspectionGroup_StartTime_"+a);g.setAttribute("readonly","readonly");g.setAttribute("class","form-control timepicker");g.setAttribute("value",c.StartTime);h.appendChild(g);g=document.createElement("div");g.setAttribute("class","input-group-addon");h.appendChild(g);h=document.createElement("i");h.setAttribute("class","fa fa-clock-o");g.appendChild(h);e++;d.appendChild(document.createElement("td"));g=document.createElement("div");g.setAttribute("class","bootstrap-timepicker");g.setAttribute("style",
"width:200px;");d.cells[e].appendChild(g);h=document.createElement("div");h.setAttribute("class","input-group");g.appendChild(h);g=document.createElement("input");g.setAttribute("type","text");g.setAttribute("id","inspectionGroup_EndTime_"+a);g.setAttribute("readonly","readonly");g.setAttribute("class","form-control timepicker");g.setAttribute("value",c.EndTime);h.appendChild(g);g=document.createElement("div");g.setAttribute("class","input-group-addon");h.appendChild(g);h=document.createElement("i");
h.setAttribute("class","fa fa-clock-o");g.appendChild(h);e++;h=document.createElement("td");h.setAttribute("align","center");d.appendChild(h);h=document.createElement("div");h.setAttribute("class","btn-group");d.cells[e].appendChild(h);g=document.createElement("button");g.setAttribute("type","button");g.setAttribute("class","btn btn-default btn-sm dropdown-toggle");g.setAttribute("data-toggle","dropdown");g.textContent="\u5de1\u6aa2\u54e1 ";g.setAttribute("id","dropdown_inspectors_"+a);h.appendChild(g);
var l=document.createElement("span");l.setAttribute("class","caret");g.appendChild(l);g=document.createElement("ul");g.setAttribute("class","dropdown-menu");g.setAttribute("id","dropdown_menu_inspectors_"+a);h.appendChild(g);h=c.Inspectors.split(",");put_Inspectors_to_dropdownlist(a,g,h);h=document.createElement("div");h.setAttribute("id","Inspectors_selected_"+a);d.cells[e].appendChild(h);e++;d.appendChild(document.createElement("td"));h=document.createElement("input");h.setAttribute("type","text");
h.setAttribute("style","width:50px;");h.setAttribute("class","form-control");h.setAttribute("id","inspectionGroup_AlertTime_"+a);h.setAttribute("value",c.AlertTime);d.cells[e].appendChild(h);d.cells[e].appendChild(document.createTextNode("\u5206\u9418\u524d"));e++;d.appendChild(document.createElement("td"));h=document.createElement("button");h.setAttribute("title","Edit this Group");h.setAttribute("href","javascript:;");h.setAttribute("onclick","save_inspectiongroup("+a+',"'+c.GroupName+'",'+b+");return false;");
b=document.createElement("i");b.setAttribute("class","fa fa-save");h.appendChild(b);d.cells[e].appendChild(h);b=c.AutoFeed;c=document.createElement("div");d.cells[e].appendChild(c);e=document.createElement("input");e.setAttribute("id","checkbox_AutoFeed_"+a);e.setAttribute("type","checkbox");"1"===b&&(e.checked=!0);b=document.createElement("label");b.setAttribute("for","checkbox_AutoFeed_"+a);b.textContent="\u81ea\u52d5\u4e82\u6578\u586b\u5165\u5de1\u6aa2\u8cc7\u6599";c.appendChild(e);c.appendChild(b);
f.appendChild(d)}function put_Inspectors_to_dropdownlist(a,b,c){for(var f=0;f<glTags.length;f++){nodeData=glTags[f];for(var e=nodeData[3],d=nodeData[5],g=!1,h=0;h<c.length;h++)e===c[h]&&(g=!0);e=create_dropdown_tag_item(a,f,e,d,g);b.appendChild(e)}}
function create_dropdown_tag_item(a,b,c,f,e){c=document.createElement("li");var d=document.createElement("a");d.setAttribute("class","small");d.setAttribute("tabIndex","-1");d.setAttribute("data-value",b);d.setAttribute("href","javascript:;");d.setAttribute("onclick",'dropdown_tag_click("'+a+'","'+b+'");return true;');var g=document.createElement("input");g.setAttribute("type","checkbox");g.setAttribute("id","dropdown_checkbox_tag_"+b);g.setAttribute("onclick",'dropdown_checkbox_tag_click("'+a+'","'+
b+'");return true;');g.checked=e;d.appendChild(g);d.appendChild(document.createTextNode(" "+f));c.appendChild(d);return c}function dropdown_checkbox_tag_click(a,b){glDropdown_checkbox_tag_click=!0;update_selected_inspectors(a)}var glDropdown_checkbox_tag_click=!1;
function dropdown_tag_click(a,b){1!=glDropdown_checkbox_tag_click&&(1==document.getElementById("dropdown_checkbox_tag_"+b).checked?document.getElementById("dropdown_checkbox_tag_"+b).checked=!1:document.getElementById("dropdown_checkbox_tag_"+b).checked=!0,update_selected_inspectors(a));glDropdown_checkbox_tag_click=!1}
function update_selected_inspectors(a){for(a=document.getElementById("Inspectors_selected_"+a);a.firstChild;)a.removeChild(a.firstChild);for(var b=0;b<glTags.length;b++){var c=glTags[b],f=c[3],c=c[5];document.getElementById("dropdown_checkbox_tag_"+b).checked&&(f=create_inspector_node(f,c),a.appendChild(f))}}function create_inspector_node(a,b){var c=document.createElement("span");c.setAttribute("class","badge bg-light-blue-active");c.setAttribute("title","id: "+a);c.textContent=b;return c}
function add_exist_inspectionpoint(a,b,c,f,e,d){f=document.getElementById("inspectionPoint_table_body_"+a);var g=e.PointID,h=e.PointIndex,l=e.AnchorNodeId,p=e.Distance,q=e.MinTime,r=e.MaxTime,n=e.TravelTime;e=e.Message;var m=getNodeName(l);console.log("add_exist_inspectionpoint() GroupID:"+a+" PointID:"+g+" PointIndex:"+h+" gl_edit_inspection_info_ui_index:"+gl_edit_inspection_info_ui_index+" ui_index:"+b);1!=b&&(n=add_inspectionpoint_traveltime(a,c,g,h,n),f.appendChild(n));n=gl_edit_inspection_info_ui_index==
b?add_inspectionpoint_edit_mode(a,b,c,g,h,l,m,p,q,r,e,d):add_inspectionpoint(a,b,c,g,h,l,m,p,q,r,e,d);f.appendChild(n)}
function add_inspectionpoint(a,b,c,f,e,d,g,h,l,p,q,r){var n=0,m=document.createElement("tr");m.appendChild(document.createElement("td"));m.cells[n].appendChild(document.createTextNode(""+b));n++;var k=document.createElement("td");k.setAttribute("align","center");m.appendChild(k);k=document.createElement("span");k.setAttribute("class","badge bg-light-blue-active");k.textContent=g;m.cells[n].appendChild(k);n++;m.appendChild(document.createElement("td"));n++;k=document.createElement("td");k.setAttribute("align",
"center");m.appendChild(k);k=document.createElement("span");k.setAttribute("class","badge bg-gray-active");k.textContent=h;m.cells[n].appendChild(k);n++;k=document.createElement("td");k.setAttribute("align","center");m.appendChild(k);k=document.createElement("span");k.setAttribute("class","badge bg-green-active");k.textContent=l;m.cells[n].appendChild(k);n++;k=document.createElement("td");k.setAttribute("align","center");m.appendChild(k);k=document.createElement("span");k.setAttribute("class","badge bg-purple-active");
k.textContent=p;m.cells[n].appendChild(k);n++;m.appendChild(document.createElement("td"));void 0!=q?m.cells[n].appendChild(document.createTextNode(q)):m.cells[n].appendChild(document.createTextNode(""));n++;m.appendChild(document.createElement("td"));1==r&&(h=document.createElement("button"),h.setAttribute("title","Delete this Inspection Point"),h.setAttribute("href","javascript:;"),h.setAttribute("onclick",'delete_inspectionpoint_dialog("'+d+'","'+g+'",'+a+","+f+","+c+");return false;"),d=document.createElement("i"),
d.setAttribute("class","fa fa-trash-o"),h.appendChild(d),m.cells[n].appendChild(h));d=document.createElement("button");d.setAttribute("title","Edit this Inspection Point");d.setAttribute("href","javascript:;");d.setAttribute("onclick","edit_inspectionpoint("+a+","+b+","+c+","+f+","+e+");return false;");a=document.createElement("i");a.setAttribute("class","fa fa-edit");d.appendChild(a);m.cells[n].appendChild(d);return m}
function add_inspectionpoint_edit_mode(a,b,c,f,e,d,g,h,l,p,q,r){var n=0,m=document.createElement("tr");m.appendChild(document.createElement("td"));m.cells[n].appendChild(document.createTextNode(""+b));n++;var k=document.createElement("td");k.setAttribute("align","center");m.appendChild(k);k=document.createElement("div");k.setAttribute("class","btn-group");k.setAttribute("id","NodeId_selection_"+a);load_Items_to_dropdown_UI(a,"edit","btn-success",k,glAnchors,d,g);m.cells[n].appendChild(k);n++;m.appendChild(document.createElement("td"));
n++;k=document.createElement("td");k.setAttribute("align","center");m.appendChild(k);k=document.createElement("input");k.setAttribute("type","text");k.setAttribute("class","form-control");k.setAttribute("id","Distance_"+a+"_"+e);k.setAttribute("value",h);m.cells[n].appendChild(k);n++;k=document.createElement("td");k.setAttribute("align","center");m.appendChild(k);h=document.createElement("input");h.setAttribute("type","text");h.setAttribute("class","form-control");h.setAttribute("id","MinTime_"+a+
"_"+e);h.setAttribute("value",l);m.cells[n].appendChild(h);n++;k=document.createElement("td");k.setAttribute("align","center");m.appendChild(k);l=document.createElement("input");l.setAttribute("type","text");l.setAttribute("class","form-control");l.setAttribute("id","MaxTime_"+a+"_"+e);l.setAttribute("value",p);m.cells[n].appendChild(l);n++;k=document.createElement("td");k.setAttribute("align","center");m.appendChild(k);p=document.createElement("input");p.setAttribute("type","text");p.setAttribute("class",
"form-control");p.setAttribute("id","Message_"+a+"_"+e);void 0!=q?p.setAttribute("value",q):p.setAttribute("value","");m.cells[n].appendChild(p);n++;m.appendChild(document.createElement("td"));1==r&&(q=document.createElement("button"),q.setAttribute("title","Delete this Inspection Point"),q.setAttribute("href","javascript:;"),q.setAttribute("onclick",'delete_inspectionpoint_dialog("'+d+'","'+g+'",'+a+","+f+","+c+");return false;"),d=document.createElement("i"),d.setAttribute("class","fa fa-trash-o"),
q.appendChild(d),m.cells[n].appendChild(q));d=document.createElement("button");d.setAttribute("title","Edit this Inspection Point");d.setAttribute("href","javascript:;");d.setAttribute("onclick","update_inspectionpoint("+a+","+b+","+c+","+f+","+e+","+r+");return false;");a=document.createElement("i");a.setAttribute("class","fa fa-save");d.appendChild(a);m.cells[n].appendChild(d);return m}
function add_inspectionpoint_traveltime(a,b,c,f,e){var d=0,g=document.createElement("tr");g.setAttribute("bgcolor","#ebebe0");g.appendChild(document.createElement("td"));d++;var h=document.createElement("td");h.setAttribute("align","center");g.appendChild(h);h=document.createElement("span");h.setAttribute("class","badge bg-aqua");g.cells[d].appendChild(h);var l=document.createElement("i");l.setAttribute("class","fa fa-long-arrow-down");h.appendChild(l);d++;h=document.createElement("td");h.setAttribute("align",
"center");g.appendChild(h);h=document.createElement("span");h.setAttribute("class","badge bg-yellow-active");h.textContent=e;g.cells[d].appendChild(h);d++;g.appendChild(document.createElement("td"));d++;g.appendChild(document.createElement("td"));d++;g.appendChild(document.createElement("td"));d++;g.appendChild(document.createElement("td"));d++;g.appendChild(document.createElement("td"));h=document.createElement("button");h.setAttribute("title","Edit this travel time");h.setAttribute("href","javascript:;");
h.setAttribute("onclick","edit_traveltime_dialog("+e+","+a+","+c+","+f+","+b+");return false;");a=document.createElement("i");a.setAttribute("class","fa fa-edit");h.appendChild(a);g.cells[d].appendChild(h);return g}
function add_inspectionpoint_NewBtn(a,b,c){a=document.getElementById("inspectionPoint_table_body_"+a);b=0;var f=document.createElement("tr");f.setAttribute("bgcolor","#ebebe0");f.appendChild(document.createElement("td"));b++;f.appendChild(document.createElement("td"));var e=document.createElement("button");e.setAttribute("title","\u65b0\u589e\u5de1\u6aa2\u9ede");e.setAttribute("style","background-color:rgb(236, 240, 245);");e.setAttribute("href","javascript:;");e.setAttribute("onclick","show_inspectionpoint_CreateBtn("+
c+");return false;");c=document.createElement("i");c.setAttribute("class","fa fa-plus");c.textContent="  \u65b0\u589e\u5de1\u6aa2\u9ede";e.appendChild(c);f.cells[b].appendChild(e);f.appendChild(document.createElement("td"));f.appendChild(document.createElement("td"));f.appendChild(document.createElement("td"));f.appendChild(document.createElement("td"));f.appendChild(document.createElement("td"));f.appendChild(document.createElement("td"));a.appendChild(f);return f}
function add_inspectionpoint_CreateBtn(a,b,c,f,e,d,g,h,l){var p=document.getElementById("inspectionPoint_table_body_"+a);if(1==b){var q=create_empty_inspectionpoint(a);p.appendChild(q);a=create_inspectionpoint_selection(a,b,c,!0,f,e,d,g,h,l,b)}else q=create_travel_time_input(a),p.appendChild(q),a=create_inspectionpoint_selection(a,b+1,c,!0,f,e,d,g,h,l,b);p.appendChild(a)}
function create_empty_inspectionpoint(a){a=0;var b=document.createElement("tr");b.setAttribute("bgcolor","#ebebe0");b.appendChild(document.createElement("td"));a++;b.appendChild(document.createElement("td"));b.cells[a].appendChild(document.createTextNode("\u5c1a\u7121\u5de1\u6aa2\u9ede"));b.appendChild(document.createElement("td"));b.appendChild(document.createElement("td"));b.appendChild(document.createElement("td"));b.appendChild(document.createElement("td"));b.appendChild(document.createElement("td"));
return b}
function create_inspectionpoint_selection(a,b,c,f,e,d,g,h,l,p,q){e=0;d=document.createElement("tr");d.appendChild(document.createElement("td"));f?d.cells[e].appendChild(document.createTextNode("")):d.cells[e].appendChild(document.createTextNode(""+b));e++;b=document.createElement("td");b.setAttribute("align","center");d.appendChild(b);b=document.createElement("div");b.setAttribute("class","btn-group");b.setAttribute("id","NodeId_selection_"+a);load_Items_to_dropdown_UI(a,"create","btn-success",b,
glAnchors,"","");d.cells[e].appendChild(b);e++;d.appendChild(document.createElement("td"));e++;b=document.createElement("td");b.setAttribute("align","center");d.appendChild(b);b=document.createElement("input");b.setAttribute("type","text");b.setAttribute("class","form-control");b.setAttribute("id","Distance_"+a);b.setAttribute("value",500);d.cells[e].appendChild(b);e++;b=document.createElement("td");b.setAttribute("align","center");d.appendChild(b);b=document.createElement("input");b.setAttribute("type",
"text");b.setAttribute("class","form-control");b.setAttribute("id","MinTime_"+a);b.setAttribute("value",30);d.cells[e].appendChild(b);e++;b=document.createElement("td");b.setAttribute("align","center");d.appendChild(b);b=document.createElement("input");b.setAttribute("type","text");b.setAttribute("class","form-control");b.setAttribute("id","MaxTime_"+a);b.setAttribute("value",120);d.cells[e].appendChild(b);e++;b=document.createElement("td");b.setAttribute("align","center");d.appendChild(b);b=document.createElement("input");
b.setAttribute("type","text");b.setAttribute("class","form-control");b.setAttribute("id","Message_"+a);b.setAttribute("value","");d.cells[e].appendChild(b);e++;d.appendChild(document.createElement("td"));f&&(f=document.createElement("button"),f.setAttribute("title","\u5132\u5b58\u5de1\u6aa2\u9ede"),f.setAttribute("style","background-color:rgb(236, 240, 245);"),f.setAttribute("href","javascript:;"),f.setAttribute("onclick","create_inspectionpoint("+a+","+c+","+q+");return false;"),a=document.createElement("i"),
a.setAttribute("class","fa fa-plus"),a.textContent="  \u5132\u5b58\u5de1\u6aa2\u9ede",f.appendChild(a),d.cells[e].appendChild(f));return d}
function create_travel_time_input(a){var b=0,c=document.createElement("tr");c.setAttribute("bgcolor","#ebebe0");c.appendChild(document.createElement("td"));b++;var f=document.createElement("td");f.setAttribute("align","center");c.appendChild(f);f=document.createElement("span");f.setAttribute("class","badge bg-aqua");c.cells[b].appendChild(f);var e=document.createElement("i");e.setAttribute("class","fa fa-long-arrow-down");f.appendChild(e);b++;c.appendChild(document.createElement("td"));f=document.createElement("input");
f.setAttribute("type","text");f.setAttribute("class","form-control");f.setAttribute("id","TravelTime_"+a);f.setAttribute("value","500");c.cells[b].appendChild(f);c.appendChild(document.createElement("td"));c.appendChild(document.createElement("td"));c.appendChild(document.createElement("td"));c.appendChild(document.createElement("td"));return c}
function load_Items_to_dropdown_UI(a,b,c,f,e,d,g){var h=g;0==d.length&&0<e.length&&(d=e[0].itemid,h=e[0].itemname);g=document.createElement("button");f.appendChild(g);g.setAttribute("class","btn "+c);g.setAttribute("data-id",d);g.id=b+"_dropdown_"+a+"_show";d=document.createTextNode(h);g.appendChild(d);d=document.createElement("button");f.appendChild(d);d.setAttribute("class","btn "+c+" dropdown-toggle");d.setAttribute("data-toggle","dropdown");d.id=b+"_dropdown_"+a;c=document.createElement("span");
d.appendChild(c);c.setAttribute("class","caret");c=document.createElement("span");d.appendChild(c);c.setAttribute("class","sr-only");c=document.createElement("ul");f.appendChild(c);c.setAttribute("class","dropdown-menu");c.setAttribute("role","menu");for(f=0;f<e.length;f++)g=document.createElement("li"),c.appendChild(g),d=document.createElement("a"),g.appendChild(d),d.setAttribute("href","javascript:;"),d.setAttribute("onclick",'dropdown_select("'+b+'",'+a+","+f+");return false;"),d.setAttribute("data-id",
e[f].itemid),d.id=b+"_dropdown_"+a+"_item_"+f,"anchor"==e[f].type?(g=document.createElement("span"),g.textContent=e[f].itemname,g.setAttribute("class","badge bg-green-active"),d.appendChild(g)):"locator"==e[f].type&&(g=document.createElement("span"),g.textContent=e[f].itemname,g.setAttribute("class","badge bg-yellow-active"),d.appendChild(g))}
function dropdown_select(a,b,c){console.log("dropdown_select() prefix:"+a+" GroupID:"+b+", itemidx:"+c);var f=$("#"+a+"_dropdown_"+b+"_item_"+c).html();c=$("#"+a+"_dropdown_"+b+"_item_"+c).attr("data-id");$("#"+a+"_dropdown_"+b+"_show").html(f);$("#"+a+"_dropdown_"+b+"_show").attr("data-id",c)}function show_inspectionpoint_CreateBtn(a){gl_active_group_index=a;gl_edit_group_info=-1;gl_show_create_inspectionpoint_btn=1;setTimeout(reload_inspectionGroup,100)}
function create_inspectionPoint_table(a,b){var c=document.getElementById("inspectiongroup_tab_content"),f=document.createElement("div");0==b?f.setAttribute("class","tab-pane active"):f.setAttribute("class","tab-pane");f.setAttribute("id","inspectionPoint_table_"+a);var e=document.createElement("table");e.setAttribute("class","table table-bordered");var d=document.createElement("thead");e.appendChild(d);var g=document.createElement("tr");g.setAttribute("bgcolor","#cce6ff");d.appendChild(g);d=document.createElement("th");
d.textContent="\u958b\u59cb\u5de1\u6aa2\u6642\u9593";g.appendChild(d);d=document.createElement("th");d.textContent="\u7d50\u675f\u5de1\u6aa2\u6642\u9593";g.appendChild(d);d=document.createElement("th");d.textContent="\u6307\u6d3e\u5de1\u6aa2\u54e1";g.appendChild(d);d=document.createElement("th");d.textContent="\u63a8\u64ad\u63d0\u9192\u6642\u9593";g.appendChild(d);d=document.createElement("th");d.textContent="\u64cd\u4f5c";g.appendChild(d);g=document.createElement("tbody");g.setAttribute("id","inspectionGroup_table_body_"+
a);e.appendChild(g);f.appendChild(e);e=document.createElement("table");e.setAttribute("class","table table-bordered");f.appendChild(e);d=document.createElement("thead");e.appendChild(d);g=document.createElement("tr");g.setAttribute("bgcolor","#cce6ff");d.appendChild(g);d=document.createElement("th");d.setAttribute("style","width: 10px");d.textContent="#";g.appendChild(d);d=document.createElement("th");d.setAttribute("style","width: 200px; text-align:center");d.textContent="\u5de1\u6aa2\u9ede";g.appendChild(d);
d=document.createElement("th");d.setAttribute("style","width: 150px; text-align:center");d.textContent="\u5de1\u6aa2\u9ede\u8f49\u63db\u6642\u9593(\u79d2)";g.appendChild(d);d=document.createElement("th");d.setAttribute("style","width: 200px; text-align:center");d.textContent="\u81f3\u5c11\u8207\u5de1\u6aa2\u9ede\u8ddd\u96e2(cm):";g.appendChild(d);d=document.createElement("th");d.setAttribute("style","width: 150px; text-align:center");d.textContent="\u81f3\u5c11\u5de1\u6aa2\u6642\u9593(\u79d2):";g.appendChild(d);
d=document.createElement("th");d.setAttribute("style","width: 150px; text-align:center");d.textContent="\u81f3\u591a\u5de1\u6aa2\u6642\u9593(\u79d2):";g.appendChild(d);var h=document.createElement("th");h.textContent="\u63a8\u64ad\u63d0\u9192\u8a0a\u606f";g.appendChild(h);h=document.createElement("th");d.setAttribute("style","width: 150px; text-align:center");h.textContent="\u64cd\u4f5c";g.appendChild(h);g=document.createElement("tbody");g.setAttribute("id","inspectionPoint_table_body_"+a);e.appendChild(g);
c.appendChild(f)}function load_devices(){$.getJSON(gl_target_server+"/php/vilsnodes.php","devicescount=1&project_id="+project_id,function(a){gl_tag_num=parseInt(a.LOC_TAG_NUM);gl_anchor_num=parseInt(a.LOC_ANCHOR_NUM);gl_locator_num=parseInt(a.LOC_LOCATOR_NUM);gl_locator_load_index=gl_anchor_load_index=gl_tag_load_index=0}).success(function(){setTimeout(load_tags,10)}).error(function(){setTimeout(load_devices,1E3)}).complete(function(){})}
function load_tags(){gl_tag_load_index>=gl_tag_num?(gl_tag_load_index=0,setTimeout(load_anchors,10)):(0==gl_tag_load_index&&(glTags=[]),$.getJSON(gl_target_server+"/php/vilsnodes.php","loadtag=1&s="+gl_tag_load_index+"&count="+LOAD_DEVICE_NUM+"&project_id="+project_id,function(a){var b=parseInt(a.LOC_TAG_NUM);0==gl_tag_load_index&&0==b&&(gl_tag_load_index=gl_tag_num=0);for(var c=gl_tag_load_index;c<gl_tag_load_index+b;++c){var f=a["LOC_TAG_INDEX_"+c];void 0!=f&&(f=f.split(","),"1"===f[4]&&glTags.push(f))}gl_tag_load_index+=
b}).success(function(){gl_tag_load_index>=gl_tag_num?(gl_tag_load_index=0,setTimeout(load_anchors,10)):setTimeout(load_tags,10)}).error(function(){gl_tag_load_index=0;setTimeout(load_tags,1E3)}).complete(function(){}))}
function load_anchors(){gl_anchor_load_index>=gl_anchor_num?(gl_anchor_load_index=0,setTimeout(load_locators,10)):(0==gl_anchor_load_index&&(glAnchors=[]),$.getJSON(gl_target_server+"/php/vilsnodes.php","loadanchor=1&s="+gl_anchor_load_index+"&count="+LOAD_DEVICE_NUM+"&project_id="+project_id,function(a){for(var b=parseInt(a.LOC_ANCHOR_NUM),c=gl_anchor_load_index;c<gl_anchor_load_index+b;++c){var f="LOC_ANCHOR_INDEX_"+c;void 0!=a[f]&&null!=a[f]&&(f=a[f].split(","),glAnchors[c]={},glAnchors[c].itemid=
f[3],glAnchors[c].itemname=f[5],glAnchors[c].posX=f[7],glAnchors[c].posY=f[8],glAnchors[c].posZ=f[9],glAnchors[c].type="anchor")}gl_anchor_load_index+=b}).success(function(){gl_anchor_load_index>=gl_anchor_num?(gl_anchor_load_index=0,setTimeout(load_locators,10)):setTimeout(load_anchors,10)}).error(function(){gl_anchor_load_index=0;setTimeout(load_anchors,1E3)}).complete(function(){}))}
function load_locators(){console.log("load_locators(): gl_locator_num:"+gl_locator_num+" gl_locator_load_index:"+gl_locator_load_index);gl_locator_load_index>=gl_locator_num?(gl_locator_load_index=0,CurrentLoadIndex=1):(0==gl_locator_load_index&&(glLocator_List=[]),$.getJSON(gl_target_server+"/php/vilsnodes.php","loadlocator=1&s="+gl_locator_load_index+"&count="+LOAD_DEVICE_NUM+"&project_id="+project_id,function(a){for(var b=parseInt(a.LOC_LOCATOR_NUM),c=gl_anchor_num,f=gl_locator_load_index;f<gl_locator_load_index+
b;++f){var e="LOC_LOCATOR_INDEX_"+f;void 0!=a[e]&&null!=a[e]&&(e=a[e].split(","),glAnchors[c+f]={},glAnchors[c+f].itemid=e[3],glAnchors[c+f].itemname=e[5],glAnchors[c+f].posX=e[7],glAnchors[c+f].posY=e[8],glAnchors[c+f].posZ=e[9],glAnchors[c+f].type="locator")}gl_locator_load_index+=b}).success(function(){gl_locator_load_index>=gl_locator_num?(gl_locator_load_index=0,CurrentLoadIndex=1):load_locators()}).error(function(){gl_locator_load_index=0;CurrentLoadIndex=1;setTimeout(load_locators,1E3)}).complete(function(){}))}
function dropdown_checkbox_anchor_click(a){glDropdown_checkbox_anchor_click=!0}glDropdown_checkbox_anchor_click=!1;function dropdown_anchor_click(a){document.getElementById("dropdown_checkbox_anchor_"+a).checked=!0;glDropdown_checkbox_anchor_click=!1}function edit_inspectiongroup(a,b,c){console.log("edit_inspectiongroup() GroupID:"+a+", GroupName:"+b+", index:"+c);gl_active_group_index=c;gl_edit_group_info=a;reload_inspectionGroup()}
function update_inspectionpoint(a,b,c,f,e,d){console.log("update_inspectionpoint() GroupID:"+a+", PointID:"+f+", PointIndex:"+e+", active_tab_index:"+c);gl_active_group_index=c;gl_edit_inspection_info_ui_index=-1;var g="Distance_"+a+"_"+e,h="MinTime_"+a+"_"+e;c="MaxTime_"+a+"_"+e;d="Message_"+a+"_"+e;e=$("#edit_dropdown_"+a+"_show").attr("data-id");g=document.getElementById(g).value;h=document.getElementById(h).value;c=document.getElementById(c).value;d=document.getElementById(d).value;isANumber(g)&&
isANumber(h)&&isANumber(c)?(console.log("update_inspectionpoint() ui_index:"+b+", value_NodeId:"+e+", value_Distance:"+g+", value_MinTime:"+h+", value_MaxTime:"+c),update_inspectionpoint_value(a,f,e,g,h,c,d)):alert("Error format: \u8acb\u586b\u5165\u6578\u5b57!")}
function update_inspectionpoint_value(a,b,c,f,e,d,g){console.log("update_checkpoint_path_startnode() GroupID:"+a+", PointID:"+b);var h={UPDATE_POINT:1};h.project_id=""+project_id;h.GroupID=a;h.PointID=b;h.AnchorNodeId=c;h.Distance=f;h.MinTime=e;h.MaxTime=d;h.Message=g;return jQuery.ajax({url:"/php/inspectionpath.php",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(h),success:function(a){console.log(a);setTimeout(reload_inspectionGroup,100)},error:function(a,b,c){console.log(c);
console.log(a.responseText);setTimeout(reload_inspectionGroup,100)}})}function edit_inspectionpoint(a,b,c,f,e){console.log("edit_inspectionpoint() GroupID:"+a+", PointID:"+f+", PointIndex:"+e+", active_tab_index:"+c+", ui_index:"+b);gl_active_group_index=c;gl_edit_inspection_info_ui_index=b;reload_inspectionGroup()}
function delete_inspectionGroup_confirmbox(a,b){console.log("delete_inspectionGroup_confirmbox() GroupID:"+a);gl_active_group_index=1;confirm("Are you sure you want to delete this inspection group:"+b+" ?")&&delete_inspectionGroup(a)}
function delete_inspectionGroup(a){a="GroupID="+a+("&project_id="+project_id);return jQuery.ajax({url:"/php/inspectionpath.php",type:"POST",data:a+"&delete_inspectiongroup=1",dataType:"text",success:function(a){console.log(JSON.stringify(a));gl_edit_group_info=-1;gl_active_group_index=1;gl_show_create_inspectionpoint_btn=-1;setTimeout(reload_inspectionGroup,100)},error:function(a,c,f){console.log(f);console.log(a.responseText);setTimeout(reload_inspectionGroup,100)}})}
function reload_inspectionGroup(){PreLoadIndex=0;CurrentLoadIndex=1;check_loading_status()}
function create_inspectiongroup(){var a=prompt("\u65b0\u589e\u5de1\u6aa2\u8def\u7dda, \u8def\u7dda\u540d\u7a31:","\u5de1\u6aa2\u8def\u7dda"+parseInt(gl_inspectiongroup_num+1));if(a){var b={};b.project_id=""+project_id;b.CREATE_GROUP=1;b.GroupName=a;b.StartTime="12:00 PM";b.EndTime="12:00 PM";b.Inspectors="";b.AlertTime="30";return jQuery.ajax({url:"/php/inspectionpath.php",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(b),success:function(a){console.log(a);gl_edit_group_info=
-1;gl_active_group_index=glInspectionGroups.length+1;gl_show_create_inspectionpoint_btn=-1;setTimeout(reload_inspectionGroup,100)},error:function(a,b,e){console.log(e);console.log(a.responseText)}})}}
function save_inspectiongroup(a,b,c){console.log("save_inspectiongroup() GroupID:"+a+", index:"+c);b=document.getElementById("inspection_tab_"+a).innerHTML;var f=document.getElementById("inspectionGroup_StartTime_"+a).value,e=document.getElementById("inspectionGroup_EndTime_"+a).value,d=document.getElementById("inspectionGroup_AlertTime_"+a).value,g=0;document.getElementById("checkbox_AutoFeed_"+a).checked&&(g=1);if(isANumber(d)){var h="";for(c=0;c<glTags.length;c++){var l=glTags[c][3];document.getElementById("dropdown_checkbox_tag_"+
c).checked&&(0!=h.length&&(h+=","),h+=l)}l={};l.project_id=""+project_id;l.GroupID=a;l.UPDATE_GROUP=1;l.GroupName=b;l.StartTime=f;l.EndTime=e;l.Inspectors=h;l.AlertTime=d;l.AutoFeed=g;console.log("save_inspectiongroup() GroupName:"+b);console.log("save_inspectiongroup() inspectionGroup_StartTime:"+f);console.log("save_inspectiongroup() inspectionGroup_EndTime:"+e);console.log("save_inspectiongroup() inspectionGroup_AlertTime:"+d);console.log("save_inspectiongroup() Inspectors:"+h);console.log("save_inspectiongroup() inspectionGroup_AutoFeed:"+
g);return jQuery.ajax({url:"/php/inspectionpath.php",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(l),success:function(a){console.log(a);gl_active_group_index=c;gl_show_create_inspectionpoint_btn=gl_edit_group_info=-1;setTimeout(reload_inspectionGroup,100)},error:function(a,b,c){console.log(c);console.log(a.responseText)}})}alert("Error format: \u63a8\u64ad\u63d0\u9192\u6642\u9593 \u8acb\u586b\u5165\u6578\u5b57!")}
function create_inspectionpoint(a,b,c){var f=$("#create_dropdown_"+a+"_show").attr("data-id"),e=document.getElementById("Distance_"+a).value,d=document.getElementById("MinTime_"+a).value,g=document.getElementById("MaxTime_"+a).value,h=document.getElementById("Message_"+a).value,l=0,p=document.getElementById("TravelTime_"+a);void 0!=p&&(l=p.value);p={CREATE_POINT:1};p.project_id=""+project_id;p.GroupID=a;p.PointIndex=c;p.AnchorNodeId=f;p.Distance=e;p.MinTime=d;p.MaxTime=g;p.Message=h;p.TravelTime=
l;return jQuery.ajax({url:"/php/inspectionpath.php",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(p),success:function(a){console.log(a);gl_active_group_index=b;gl_show_create_inspectionpoint_btn=-1;setTimeout(reload_inspectionGroup,100)},error:function(a,b,c){console.log(c);console.log(a.responseText)}})}function delete_inspectionpoint_dialog(a,b,c,f,e){confirm("Are you sure you want to delete this checkpoint:"+b+"?")&&delete_inspectionpoint(c,f,e)}
function delete_inspectionpoint(a,b,c){a="GroupID="+a+("&PointID="+b)+("&project_id="+project_id);a+="&delete_inspectionpoint=1";return jQuery.ajax({url:"/php/inspectionpath.php",type:"POST",data:a,dataType:"text",success:function(a){console.log(JSON.stringify(a));gl_active_group_index=c;gl_show_create_inspectionpoint_btn=-1;setTimeout(reload_inspectionGroup,100)},error:function(a,b,d){console.log(d);console.log(a.responseText);gl_active_group_index=c;gl_show_create_inspectionpoint_btn=-1;setTimeout(reload_inspectionGroup,
100)}})}
function edit_traveltime_dialog(a,b,c,f,e){if(a=prompt("\u7de8\u8f2f\u5de1\u6aa2\u9ede\u8f49\u63db\u6642\u9593(\u79d2)",a)){if(isANumber(a)){var d={UPDATE_TRAVELTIME:1};d.project_id=""+project_id;d.GroupID=b;d.PointID=c;d.PointIndex=f;d.TravelTime=a;return jQuery.ajax({url:"/php/inspectionpath.php",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(d),success:function(a){console.log(a);gl_active_group_index=e;setTimeout(reload_inspectionGroup,100)},error:function(a,b,c){console.log(c);
console.log(a.responseText)}})}alert("Error format: \u8acb\u586b\u5165\u6578\u5b57!")}}function getNodeName(a){for(var b=a,c=0;c<glAnchors.length;c++)if(glAnchors[c].itemid==a){b=glAnchors[c].itemname;break}return b}function isANumber(a){return!/\D/.test(a)}function open_inspection_page(){window.open("/index.php/vilsinspection/"+project_id,"_blank").focus()};
