var gl_tag_num=0,gl_locator_num=0,gl_anchor_num=0,gl_tag_load_index=0,gl_locator_load_index=0,gl_anchor_load_index=0,glTag_List=[],glLocator_List=[],glAnchor_List=[],glAllAnchorsData={},glAllAnchorsPreData={},glAllAnchorsUpdateTime={},glAllGatewayData={},glAnchorUIList=[],glCurrentTagMacaddress="",glCurrentLocatorLoRAMacaddress="",LOAD_DEVICE_NUM=20;load_devices();
function load_devices(){$.getJSON(gl_target_server+"/php/vilsnodes.php","devicescount=1&project_id="+project_id,function(a){gl_tag_num=parseInt(a.LOC_TAG_NUM);gl_locator_num=parseInt(a.LOC_LOCATOR_NUM);gl_anchor_num=parseInt(a.LOC_ANCHOR_NUM);gl_anchor_load_index=gl_locator_load_index=gl_tag_load_index=0;glTag_List=[];glLocator_List=[];glAnchor_List=[]}).success(function(){setTimeout(load_tag,10)}).error(function(){}).complete(function(){})}
function load_tag(){gl_tag_load_index>=gl_tag_num?(gl_tag_load_index=0,setTimeout(load_locator,20)):(0==gl_tag_load_index&&(glTag_List=[]),$.getJSON(gl_target_server+"/php/vilsnodes.php","loadtag=1&s="+gl_tag_load_index+"&count="+LOAD_DEVICE_NUM+"&project_id="+project_id,function(a){var b=parseInt(a.LOC_TAG_NUM);console.log("tag_num:"+b+", gl_tag_load_index:"+gl_tag_load_index);for(var c=gl_tag_load_index;c<gl_tag_load_index+b;++c){var d="LOC_TAG_INDEX_"+c;void 0!=a[d]&&null!=a[d]&&(d=a[d].split(","),
glTag_List.push(d))}gl_tag_load_index+=b}).success(function(){gl_tag_load_index>=gl_tag_num?setTimeout(load_locator,20):setTimeout(load_tag,1)}).error(function(){gl_tag_load_index=0;setTimeout(load_tag,UPDATE_INTERVAL)}).complete(function(){}))}
function load_locator(){gl_locator_load_index>=gl_locator_num?(gl_locator_load_index=0,setTimeout(load_anchor,10)):(0==gl_locator_load_index&&(glLocator_List=[]),$.getJSON(gl_target_server+"/php/vilsnodes.php","loadlocator=1&s="+gl_locator_load_index+"&count="+LOAD_DEVICE_NUM+"&project_id="+project_id,function(a){var b=parseInt(a.LOC_LOCATOR_NUM);console.log("locator_num:"+b+", gl_locator_load_index:"+gl_locator_load_index);for(var c=gl_locator_load_index;c<gl_locator_load_index+b;++c){var d="LOC_LOCATOR_INDEX_"+
c;void 0!=a[d]&&null!=a[d]&&(d=a[d].split(","),glLocator_List.push(d))}gl_locator_load_index+=b}).success(function(){gl_locator_load_index>=gl_locator_num?setTimeout(load_anchor,10):setTimeout(load_locator,1)}).error(function(){gl_locator_load_index=0;setTimeout(load_locator,UPDATE_INTERVAL)}).complete(function(){}))}
function load_anchor(){gl_anchor_load_index>=gl_anchor_num?(gl_anchor_load_index=0,setTimeout(put_tags_to_dropdownlist,10),setTimeout(put_locators_to_dropdownlist,10),setTimeout(load_ranging_Diagnosis,100),setTimeout(load_locator_rssiinfo,1E3)):(0==gl_anchor_load_index&&(glAnchor_List=[]),$.getJSON(gl_target_server+"/php/vilsnodes.php","loadanchor=1&s="+gl_anchor_load_index+"&count="+LOAD_DEVICE_NUM+"&project_id="+project_id,function(a){for(var b=parseInt(a.LOC_ANCHOR_NUM),c=gl_anchor_load_index;c<
gl_anchor_load_index+b;++c){var d="LOC_ANCHOR_INDEX_"+c;void 0!=a[d]&&null!=a[d]&&(d=a[d].split(","),glLocator_List.push(d))}gl_anchor_load_index+=b}).success(function(){gl_anchor_load_index>=gl_anchor_num?(setTimeout(put_tags_to_dropdownlist,10),setTimeout(put_locators_to_dropdownlist,10),setTimeout(load_ranging_Diagnosis,100),setTimeout(load_locator_rssiinfo,1E3)):setTimeout(load_anchor,10)}).error(function(){console.log("load_anchors() error gl_anchor_load_index:"+gl_anchor_load_index+", gl_anchor_num:"+
gl_anchor_num);gl_anchor_load_index=0;setTimeout(load_locator,10)}).complete(function(){}))}function put_tags_to_dropdownlist(){var a=document.getElementById("dropdown_tags"),b;for(b=0;b<glTag_List.length;b++){nodeData=glTag_List[b];var c=nodeData[6],d=nodeData[3],f=nodeData[5],e=!1;0==b&&(glCurrentTagMacaddress=c,e=!0,document.getElementById("dropdown_cur_tag").innerHTML=f+'<span class="caret"></span>');c=create_dropdown_tag_item(b,d,f,e);a.appendChild(c)}}
function create_dropdown_tag_item(a,b,c,d){b=document.createElement("li");var f=document.createElement("a");f.setAttribute("class","small");f.setAttribute("tabIndex","-1");f.setAttribute("data-value",a);f.setAttribute("href","javascript:;");f.setAttribute("onclick",'dropdown_tag_click("'+a+'");return true;');var e=document.createElement("input");e.setAttribute("type","checkbox");e.setAttribute("id","dropdown_checkbox_tag_"+a);e.setAttribute("onclick",'dropdown_checkbox_tag_click("'+a+'");return true;');
e.checked=d;f.appendChild(e);f.appendChild(document.createTextNode(" "+c));b.appendChild(f);return b}function dropdown_checkbox_tag_click(a){glDropdown_checkbox_tag_click=!0}var glDropdown_checkbox_tag_click=!1;
function dropdown_tag_click(a){clear_table();var b;for(b=0;b<glTag_List.length;b++)if(b==a){nodeData=glTag_List[b];glCurrentTagMacaddress=nodeData[6];var c=nodeData[5];document.getElementById("dropdown_cur_tag").innerHTML=c+'<span class="caret"></span>';document.getElementById("dropdown_checkbox_tag_"+b).checked=!0}else document.getElementById("dropdown_checkbox_tag_"+b).checked=!1;glDropdown_checkbox_tag_click=!1}
function clear_table(){for(var a=document.getElementById("DIAGNOSIS_TABLE_CONTENT");1<=a.rows.length;)a.deleteRow(0)}
function put_locators_to_dropdownlist(){var a=document.getElementById("dropdown_locators"),b;for(b=0;b<glLocator_List.length;b++){nodeData=glLocator_List[b];var c=nodeData[5],d=nodeData[22],f=!1;0==b&&(glCurrentLocatorLoRAMacaddress=d,f=!0,document.getElementById("dropdown_cur_locator").innerHTML=c+'<span class="caret"></span>');c=create_dropdown_locator_item(b,c,f);a.appendChild(c)}}
function create_dropdown_locator_item(a,b,c){var d=document.createElement("li"),f=document.createElement("a");f.setAttribute("class","small");f.setAttribute("tabIndex","-1");f.setAttribute("data-value",a);f.setAttribute("href","javascript:;");f.setAttribute("onclick",'dropdown_locator_click("'+a+'");return true;');var e=document.createElement("input");e.setAttribute("type","checkbox");e.setAttribute("id","dropdown_checkbox_locator_"+a);e.setAttribute("onclick",'dropdown_checkbox_locator_click("'+
a+'");return true;');e.checked=c;f.appendChild(e);f.appendChild(document.createTextNode(" "+b));d.appendChild(f);return d}var glDropdown_checkbox_locator_click=!1;function dropdown_checkbox_locator_click(a){glDropdown_checkbox_locator_click=!0}
function dropdown_locator_click(a){clear_locator_table();for(var b=0;b<glLocator_List.length;b++)if(b==a){var c=glLocator_List[b],d=c[5];glCurrentLocatorLoRAMacaddress=c[22];document.getElementById("dropdown_cur_locator").innerHTML=d+'<span class="caret"></span>';document.getElementById("dropdown_checkbox_locator_"+b).checked=!0}else document.getElementById("dropdown_checkbox_locator_"+b).checked=!1;glDropdown_checkbox_locator_click=!1}
function clear_locator_table(){for(var a=document.getElementById("LOCATOR_TABLE_CONTENT");1<=a.rows.length;)a.deleteRow(0)}
function load_ranging_Diagnosis(){document.getElementById("DIAGNOSIS_TABLE_MSG").innerText="";if(0==glCurrentTagMacaddress.length)return setTimeout(load_ranging_Diagnosis,500),!0;$.getJSON(gl_target_server+"/php/diagnosis.php","getrangingdiagnosis="+glCurrentTagMacaddress+"&project_id="+project_id,function(a){var b=document.getElementById("DIAGNOSIS_TABLE_CONTENT"),c=0;$.each(a,function(a,f){var e=JSON.parse(f),g=e.Ranging,k=e.PCnt,l=e.AnCnt,q=e.TagRecv,m=e.TagFP,p=e.AnRecv,x=e.AnFP,n=e.TagVelocity,
r=e.LostRate,u=e.SD,v=e.IMU,t=e.DataRate,y=e.ValidRate,z=e.DataCount,w=e.SlotTime,e=e.ResetTime;void 0==glAllAnchorsData[a]&&(glAllAnchorsData[a]={});glAllAnchorsData[a].Ranging=g;glAllAnchorsData[a].PCnt=k;glAllAnchorsData[a].AnCnt=l;glAllAnchorsData[a].TagRecv=q;glAllAnchorsData[a].TagFP=m;glAllAnchorsData[a].AnRecv=p;glAllAnchorsData[a].AnFP=x;glAllAnchorsData[a].TagVelocity=n;glAllAnchorsData[a].LostRate=r;glAllAnchorsData[a].SD=u;glAllAnchorsData[a].IMU=v;glAllAnchorsData[a].DataRate=t;glAllAnchorsData[a].ValidRate=
y;glAllAnchorsData[a].DataCount=z;glAllAnchorsData[a].SlotTime=w;glAllAnchorsData[a].ResetTime=e;var h=document.getElementById("row_"+a);null==h?(g=create_table_row(glAnchorUIList.length,a,g,k,l,q,m,p,x,n,r,u,v,t,y,z,w,e),b.appendChild(g),glAnchorUIList.push(a)):update_row(h,a,g,k,l,q,m,p,x,n,r,u,v,t,y,z,w,e);c++});update_timeout_table();$(".sparktristate").sparkline("html",{type:"tristate"});$(".sparkbar").sparkline("html",{type:"bar"});setTimeout(load_ranging_Diagnosis,500)}).done(function(){}).fail(function(a,
b,c){console.log("load_ranging_Diagnosis() fail");setTimeout(load_ranging_Diagnosis,5E3)}).always(function(){});return!1}
function load_locator_rssiinfo(){if(0==glCurrentLocatorLoRAMacaddress.length)return setTimeout(load_locator_rssiinfo,1E3),!0;$.getJSON(gl_target_server+"/php/diagnosis.php","getlocatorrssiinfo="+glCurrentLocatorLoRAMacaddress+"&project_id="+project_id,function(a){var b=document.getElementById("LOCATOR_TABLE_CONTENT"),c=0;$.each(a,function(a,f){var e=JSON.parse(f),g=e.rssi,k=e.count,l=e.startdatetime,e=e.enddatetime;void 0==glAllGatewayData[a]&&(glAllGatewayData[a]={});glAllGatewayData[a].rssi=g;glAllGatewayData[a].count=
k;glAllGatewayData[a].startdatetime=l;glAllGatewayData[a].enddatetime=e;var q=document.getElementById("row_"+a);void 0==q?(g=create_gateway_table_row(c,a,g,k,l,e),b.appendChild(g)):update_gateway_row(q,a,g,k,l,e);c++});setTimeout(load_locator_rssiinfo,1E3)}).done(function(){}).fail(function(a,b,c){console.log("load_locator_rssiinfo() fail");setTimeout(load_locator_rssiinfo,5E3)}).always(function(){});return!1}
function create_table_row(a,b,c,d,f,e,g,k,l,q,m,p,x,n,r,u,v,t){d=0;var y=Number(n),z=Number(r),w=1E3/Number(t),h=document.createElement("tr");h.setAttribute("id","row_"+b);1==a%2&&h.setAttribute("bgcolor","#ebebe0");h.appendChild(document.createElement("td"));h.cells[d].appendChild(document.createTextNode(""+a));d++;h.appendChild(document.createElement("td"));a=document.createElement("span");a.setAttribute("class","badge bg-light-blue");a.textContent=getAnchorName(b);h.cells[d].appendChild(a);d++;
a=Number(c);h.appendChild(document.createElement("td"));var A=document.createElement("span");A.setAttribute("id","row_"+b+"_Ranging");2500<=a?A.setAttribute("class","badge bg-red"):A.setAttribute("class","badge bg-yellow");A.textContent=c;h.cells[d].appendChild(A);d++;c=Number(p);h.appendChild(document.createElement("td"));a=document.createElement("span");a.setAttribute("id","row_"+b+"_SD");8<=c?a.setAttribute("class","badge bg-red"):a.setAttribute("class","badge bg-green");a.textContent=p;h.cells[d].appendChild(a);
d++;p=Number(m);h.appendChild(document.createElement("td"));c=document.createElement("div");c.setAttribute("class","progress progress-xs");a=document.createElement("div");a.setAttribute("id","row_"+b+"_LostRate1");10<=p?a.setAttribute("class","progress-bar progress-bar-danger"):a.setAttribute("class","progress-bar progress-bar-green");a.setAttribute("style","width:"+m+"%");c.appendChild(a);h.cells[d].appendChild(c);c=document.createElement("span");c.setAttribute("id","row_"+b+"_LostRate");10<=p?c.setAttribute("class",
"badge bg-red"):c.setAttribute("class","badge bg-green");c.textContent=m;h.cells[d].appendChild(c);d++;h.appendChild(document.createElement("td"));m=document.createElement("span");m.setAttribute("id","row_"+b+"_DataRate");y<w?m.setAttribute("class","badge bg-red"):m.setAttribute("class","badge bg-green");m.textContent=Number(n).toFixed(1);h.cells[d].appendChild(m);n=document.createElement("span");n.setAttribute("id","row_"+b+"_ValidRate");1>z?n.setAttribute("class","badge bg-red"):n.setAttribute("class",
"badge bg-green");n.textContent=Number(r).toFixed(1);h.cells[d].appendChild(n);d++;h.appendChild(document.createElement("td"));r=document.createElement("span");r.setAttribute("id","row_"+b+"_DataCount");r.setAttribute("class","badge bg-green");r.textContent=Number(u);h.cells[d].appendChild(r);d++;h.appendChild(document.createElement("td"));u=document.createElement("span");u.setAttribute("id","row_"+b+"_SlotTime");u.setAttribute("class","badge bg-yellow");u.textContent=Number(v);h.cells[d].appendChild(u);
v=document.createElement("span");v.setAttribute("id","row_"+b+"_ResetTime");v.setAttribute("class","badge bg-blue");v.textContent=Number(t);h.cells[d].appendChild(v);t=document.createElement("span");t.setAttribute("id","row_"+b+"_RangingDataRate");t.setAttribute("class","badge bg-light-blue");t.textContent=Number(w).toFixed(2);h.cells[d].appendChild(t);d++;h.appendChild(document.createElement("td"));t=Number(e);w=document.createElement("span");w.setAttribute("id","row_"+b+"_recvdBm");-135>=t?w.setAttribute("class",
"badge bg-red"):w.setAttribute("class","badge bg-green");w.textContent=e;h.cells[d].appendChild(w);e=document.createElement("span");e.setAttribute("id","row_"+b+"_firstpathdBm");-135>=t?e.setAttribute("class","badge bg-red"):e.setAttribute("class","badge bg-green");e.textContent=g;h.cells[d].appendChild(e);g=Number(k);e=document.createElement("span");e.setAttribute("id","row_"+b+"_anrecvdBm");-135>=g?e.setAttribute("class","badge bg-red"):e.setAttribute("class","badge bg-green");e.textContent=k;h.cells[d].appendChild(e);
k=Number(l);g=document.createElement("span");g.setAttribute("id","row_"+b+"_anfirstpathdBm");-135>=k?g.setAttribute("class","badge bg-red"):g.setAttribute("class","badge bg-green");g.textContent=l;h.cells[d].appendChild(g);d++;h.appendChild(document.createElement("td"));l=document.createElement("span");l.setAttribute("id","row_"+b+"_TagVelocity");l.setAttribute("class","badge bg-green");l.textContent=q;h.cells[d].appendChild(l);d++;h.appendChild(document.createElement("td"));q=document.createElement("span");
q.setAttribute("id","row_"+b+"_RangingAnchorCnt");q.setAttribute("class","badge bg-green");q.textContent=f;h.cells[d].appendChild(q);d++;h.appendChild(document.createElement("td"));f=document.createElement("span");f.setAttribute("id","row_"+b+"_IMU");f.setAttribute("class","sparkbar");f.textContent=x;h.cells[d].appendChild(f);return h}
function update_row(a,b,c,d,f,e,g,k,l,q,m,p,x,n,r,u,v,t){a=document.getElementById("row_"+b+"_Ranging");2500<=Number(c)?a.setAttribute("class","badge bg-red"):a.setAttribute("class","badge bg-yellow");a.textContent=c;c=document.getElementById("row_"+b+"_SD");8<=Number(p)?c.setAttribute("class","badge bg-red"):c.setAttribute("class","badge bg-green");c.textContent=p;c=document.getElementById("row_"+b+"_LostRate1");p=Number(m);10<=p?c.setAttribute("class","progress-bar progress-bar-danger"):c.setAttribute("class",
"progress-bar progress-bar-green");c.setAttribute("style","width:"+m+"%");c=document.getElementById("row_"+b+"_LostRate");10<=p?c.setAttribute("class","badge bg-red"):c.setAttribute("class","badge bg-green");c.textContent=m;c=Number(n);m=Number(r);p=1E3/Number(t);a=document.getElementById("row_"+b+"_DataRate");c<p?a.setAttribute("class","badge bg-red"):a.setAttribute("class","badge bg-green");a.textContent=Number(n).toFixed(1);n=document.getElementById("row_"+b+"_ValidRate");1>m?n.setAttribute("class",
"badge bg-red"):n.setAttribute("class","badge bg-green");n.textContent=Number(r).toFixed(1);document.getElementById("row_"+b+"_DataCount").textContent=Number(u);document.getElementById("row_"+b+"_SlotTime").textContent=Number(v);document.getElementById("row_"+b+"_ResetTime").textContent=Number(t);document.getElementById("row_"+b+"_RangingDataRate").textContent=Number(p).toFixed(2);u=document.getElementById("row_"+b+"_recvdBm");r=Number(e);-135>=r?u.setAttribute("class","badge bg-red"):u.setAttribute("class",
"badge bg-green");u.textContent=e;e=document.getElementById("row_"+b+"_firstpathdBm");-135>=r?e.setAttribute("class","badge bg-red"):e.setAttribute("class","badge bg-green");e.textContent=g;g=document.getElementById("row_"+b+"_anrecvdBm");-135>=Number(k)?g.setAttribute("class","badge bg-red"):g.setAttribute("class","badge bg-green");g.textContent=k;g=document.getElementById("row_"+b+"_anfirstpathdBm");-135>=Number(l)?g.setAttribute("class","badge bg-red"):g.setAttribute("class","badge bg-green");
g.textContent=l;document.getElementById("row_"+b+"_TagVelocity").textContent=q;document.getElementById("row_"+b+"_RangingAnchorCnt").textContent=f;document.getElementById("row_"+b+"_IMU").textContent=x}
function create_gateway_table_row(a,b,c,d,f,e){var g=0,k=document.createElement("tr");k.setAttribute("id","row_"+b);1==a%2&&k.setAttribute("bgcolor","#ebebe0");k.appendChild(document.createElement("td"));k.cells[g].appendChild(document.createTextNode(""+a));g++;k.appendChild(document.createElement("td"));a=document.createElement("span");a.setAttribute("class","badge bg-light-blue");a.textContent=b;k.cells[g].appendChild(a);g++;k.appendChild(document.createElement("td"));a=document.createElement("span");
a.setAttribute("id","row_"+b+"_RSSI");a.setAttribute("class","badge bg-red");a.textContent=c;k.cells[g].appendChild(a);g++;k.appendChild(document.createElement("td"));c=document.createElement("span");c.setAttribute("id","row_"+b+"_Count");c.setAttribute("class","badge bg-light-green");c.textContent=d;k.cells[g].appendChild(c);g++;k.appendChild(document.createElement("td"));d=document.createElement("span");d.setAttribute("id","row_"+b+"_StartDate");d.setAttribute("class","label label-info");d.textContent=
convertPrettyDateOnly(f);k.cells[g].appendChild(d);d=document.createElement("span");d.setAttribute("id","row_"+b+"_StartTime");d.setAttribute("class","label label-warning");d.textContent=convertPrettyTimeOnly(f);k.cells[g].appendChild(d);g++;k.appendChild(document.createElement("td"));f=document.createElement("span");f.setAttribute("id","row_"+b+"_EndDate");f.setAttribute("class","label label-info");f.textContent=convertPrettyDateOnly(e);k.cells[g].appendChild(f);f=document.createElement("span");
f.setAttribute("id","row_"+b+"_EndTime");f.setAttribute("class","label label-warning");f.textContent=convertPrettyTimeOnly(e);k.cells[g].appendChild(f);return k}
function update_gateway_row(a,b,c,d,f,e){a=document.getElementById("row_"+b+"_RSSI");var g=document.getElementById("row_"+b+"_Count"),k=document.getElementById("row_"+b+"_StartDate"),l=document.getElementById("row_"+b+"_StartTime"),q=document.getElementById("row_"+b+"_EndDate");b=document.getElementById("row_"+b+"_EndTime");a.textContent=c;g.textContent=d;k.textContent=convertPrettyDateOnly(f);l.textContent=convertPrettyTimeOnly(f);q.textContent=convertPrettyDateOnly(e);b.textContent=convertPrettyTimeOnly(e)}
function update_timeout_table(){$.each(glAllAnchorsData,function(a,b){var c=0;void 0==glAllAnchorsPreData[a]?(glAllAnchorsPreData[a]={},c=15):(glAllAnchorsPreData[a].Ranging!=b.Ranging&&c++,glAllAnchorsPreData[a].PCnt!=b.PCnt&&c++,glAllAnchorsPreData[a].AnCnt!=b.AnCnt&&c++,glAllAnchorsPreData[a].TagRecv!=b.TagRecv&&c++,glAllAnchorsPreData[a].TagFP!=b.TagFP&&c++,glAllAnchorsPreData[a].AnRecv!=b.AnRecv&&c++,glAllAnchorsPreData[a].AnFP!=b.AnFP&&c++,glAllAnchorsPreData[a].TagVelocity!=b.TagVelocity&&
c++,glAllAnchorsPreData[a].LostRate!=b.LostRate&&c++,glAllAnchorsPreData[a].SD!=b.SD&&c++,glAllAnchorsPreData[a].IMU!=b.IMU&&c++,glAllAnchorsPreData[a].DataRate!=b.DataRate&&c++,glAllAnchorsPreData[a].ValidRate!=b.ValidRate&&c++,glAllAnchorsPreData[a].DataCount!=b.DataCount&&c++,glAllAnchorsPreData[a].SlotTime!=b.SlotTime&&c++,glAllAnchorsPreData[a].ResetTime!=b.ResetTime&&c++);glAllAnchorsPreData[a].Ranging=b.Ranging;glAllAnchorsPreData[a].PCnt=b.PCnt;glAllAnchorsPreData[a].AnCnt=b.AnCnt;glAllAnchorsPreData[a].TagRecv=
b.TagRecv;glAllAnchorsPreData[a].TagFP=b.TagFP;glAllAnchorsPreData[a].AnRecv=b.AnRecv;glAllAnchorsPreData[a].AnFP=b.AnFP;glAllAnchorsPreData[a].TagVelocity=b.TagVelocity;glAllAnchorsPreData[a].LostRate=b.LostRate;glAllAnchorsPreData[a].SD=b.SD;glAllAnchorsPreData[a].IMU=b.IMU;glAllAnchorsPreData[a].DataRate=b.DataRate;glAllAnchorsPreData[a].ValidRate=b.ValidRate;glAllAnchorsPreData[a].DataCount=b.DataCount;glAllAnchorsPreData[a].SlotTime=b.SlotTime;glAllAnchorsPreData[a].ResetTime=b.ResetTime;var d=
0;void 0==glAllAnchorsUpdateTime[a]?glAllAnchorsUpdateTime[a]=new Date:0<c?glAllAnchorsUpdateTime[a]=new Date:3<getDifferentTimeInSeconds(glAllAnchorsUpdateTime[a],new Date)&&(d=1);c=document.getElementById("row_"+a);null!=c&&(1==d?c.setAttribute("bgcolor","#a3c2c2"):c.setAttribute("bgcolor","#FFFFFF"))})}function calculate_acceleration(a,b){var c=b.split(","),d=Number(c[0]),f=Number(c[1]),c=Number(c[2]);console.log(a+" IMU:"+b+" ("+d+","+f+","+c+") acceleration:"+Math.sqrt(d*d+f*f+c*c))}
function getDifferentTimeInSeconds(a,b){var c=b.getTime()-a.getTime();return Math.abs(c/1E3)}function getTagName(a){for(var b=0;b<glTag_List.length;b++){var c=glTag_List[b],d=c[5];if(a===c[3])return d}return a}function getAnchorName(a){for(var b=0;b<glLocator_List.length;b++){var c=glLocator_List[b],d=c[5],c=c[3];if(a===c)return d}for(b=0;b<glAnchor_List.length;b++)if(c=glAnchor_List[b],d=c[5],c=c[3],a===c)return d;return a}
function convertPrettyDateOnly(a){var b=moment(a,"YYYY-MM-DD HH:mm:ss");a=b.format("YYYY");var c=b.format("M"),b=b.format("D");return a+"\u5e74"+c+"\u6708"+b+"\u65e5 "}function convertPrettyTimeOnly(a){var b=moment(a,"YYYY-MM-DD HH:mm:ss");a=b.hour();var c=b.minutes(),b=b.seconds(),d="";0<=a&&(d+=a+"\u9ede");0<=c&&(d+=c+"\u5206");0<=b&&(d+=b+"\u79d2");return d}function open_diagnosis_page(){window.open("/index.php/vilsdiagnosis/"+project_id,"_blank").focus()};
