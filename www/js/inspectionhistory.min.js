/*
: Copyright (c) 2012-2017 Dan Grossman. All rights reserved.
 @license: Licensed under the MIT license. See http://www.opensource.org/licenses/mit-license.php
 @website: http://www.daterangepicker.com/
*/
var $jscomp={scope:{},findInternal:function(a,d,e){a instanceof String&&(a=String(a));for(var c=a.length,b=0;b<c;b++){var g=a[b];if(d.call(e,g,b,a))return{i:b,v:g}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[d]=e.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,d,e,c){if(d){e=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var b=a[c];b in e||(e[b]={});e=e[b]}a=a[a.length-1];c=e[a];d=d(c);d!=c&&null!=d&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,e){return $jscomp.findInternal(this,a,e).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var d=0;return $jscomp.iteratorPrototype(function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var e=0,c={next:function(){if(e<a.length){var b=e++;return{value:d(b,a[b]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
(function(a,d){if("function"===typeof define&&define.amd)define(["moment","jquery"],function(b,c){c.fn||(c.fn={});return d(b,c)});else if("object"===typeof module&&module.exports){var e="undefined"!=typeof window?window.jQuery:void 0;e||(e=require("jquery"),e.fn||(e.fn={}));var c="undefined"!=typeof window&&"undefined"!=typeof window.moment?window.moment:require("moment");module.exports=d(c,e)}else a.daterangepicker=d(a.moment,a.jQuery)})(this,function(a,d){var e=function(c,b,g){this.parentEl="body";
this.element=d(c);this.startDate=a().startOf("day");this.endDate=a().endOf("day");this.showISOWeekNumbers=this.showWeekNumbers=this.showDropdowns=this.singleDatePicker=this.autoApply=this.dateLimit=this.maxDate=this.minDate=!1;this.showCustomRangeLabel=!0;this.timePicker24Hour=this.timePicker=!1;this.timePickerIncrement=1;this.timePickerSeconds=!1;this.autoUpdateInput=this.linkedCalendars=!0;this.alwaysShowCalendars=!1;this.manualInputs=!0;this.ranges={};this.opens="right";this.element.hasClass("pull-right")&&
(this.opens="left");this.drops="down";this.element.hasClass("dropup")&&(this.drops="up");this.buttonClasses="btn btn-sm";this.applyClass="btn-success";this.cancelClass="btn-default";this.locale={direction:"ltr",format:a.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:a.weekdaysMin(),monthNames:a.monthsShort(),firstDay:a.localeData().firstDayOfWeek()};this.callback=function(){};this.isShowing=!1;this.leftCalendar=
{};this.rightCalendar={};if("object"!==typeof b||null===b)b={};b=d.extend(this.element.data(),b);"string"===typeof b.template||b.template instanceof d||(b.template='<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_start" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_end" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>');
this.parentEl=b.parentEl&&d(b.parentEl).length?d(b.parentEl):d(this.parentEl);this.container=d(b.template).appendTo(this.parentEl);if("object"===typeof b.locale&&("string"===typeof b.locale.direction&&(this.locale.direction=b.locale.direction),"string"===typeof b.locale.format&&(this.locale.format=b.locale.format),"string"===typeof b.locale.separator&&(this.locale.separator=b.locale.separator),"object"===typeof b.locale.daysOfWeek&&(this.locale.daysOfWeek=b.locale.daysOfWeek.slice()),"object"===typeof b.locale.monthNames&&
(this.locale.monthNames=b.locale.monthNames.slice()),"number"===typeof b.locale.firstDay&&(this.locale.firstDay=b.locale.firstDay),"string"===typeof b.locale.applyLabel&&(this.locale.applyLabel=b.locale.applyLabel),"string"===typeof b.locale.cancelLabel&&(this.locale.cancelLabel=b.locale.cancelLabel),"string"===typeof b.locale.weekLabel&&(this.locale.weekLabel=b.locale.weekLabel),"string"===typeof b.locale.customRangeLabel)){var f=document.createElement("textarea");f.innerHTML=b.locale.customRangeLabel;
f=f.value;this.locale.customRangeLabel=f}this.container.addClass(this.locale.direction);"string"===typeof b.startDate&&(this.startDate=a(b.startDate,this.locale.format));"string"===typeof b.endDate&&(this.endDate=a(b.endDate,this.locale.format));"string"===typeof b.minDate&&(this.minDate=a(b.minDate,this.locale.format));"string"===typeof b.maxDate&&(this.maxDate=a(b.maxDate,this.locale.format));"object"===typeof b.startDate&&(this.startDate=a(b.startDate));"object"===typeof b.endDate&&(this.endDate=
a(b.endDate));"object"===typeof b.minDate&&(this.minDate=a(b.minDate));"object"===typeof b.maxDate&&(this.maxDate=a(b.maxDate));this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone());this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone());"string"===typeof b.applyClass&&(this.applyClass=b.applyClass);"string"===typeof b.cancelClass&&(this.cancelClass=b.cancelClass);"object"===typeof b.dateLimit&&(this.dateLimit=b.dateLimit);"string"===
typeof b.opens&&(this.opens=b.opens);"string"===typeof b.drops&&(this.drops=b.drops);"boolean"===typeof b.showWeekNumbers&&(this.showWeekNumbers=b.showWeekNumbers);"boolean"===typeof b.showISOWeekNumbers&&(this.showISOWeekNumbers=b.showISOWeekNumbers);"string"===typeof b.buttonClasses&&(this.buttonClasses=b.buttonClasses);"object"===typeof b.buttonClasses&&(this.buttonClasses=b.buttonClasses.join(" "));"boolean"===typeof b.showDropdowns&&(this.showDropdowns=b.showDropdowns);"boolean"===typeof b.showCustomRangeLabel&&
(this.showCustomRangeLabel=b.showCustomRangeLabel);"boolean"===typeof b.singleDatePicker&&(this.singleDatePicker=b.singleDatePicker)&&(this.endDate=this.startDate.clone());"boolean"===typeof b.timePicker&&(this.timePicker=b.timePicker);"boolean"===typeof b.timePickerSeconds&&(this.timePickerSeconds=b.timePickerSeconds);"number"===typeof b.timePickerIncrement&&(this.timePickerIncrement=b.timePickerIncrement);"boolean"===typeof b.timePicker24Hour&&(this.timePicker24Hour=b.timePicker24Hour);"boolean"===
typeof b.autoApply&&(this.autoApply=b.autoApply);"boolean"===typeof b.autoUpdateInput&&(this.autoUpdateInput=b.autoUpdateInput);"boolean"===typeof b.linkedCalendars&&(this.linkedCalendars=b.linkedCalendars);"function"===typeof b.isInvalidDate&&(this.isInvalidDate=b.isInvalidDate);"function"===typeof b.isCustomDate&&(this.isCustomDate=b.isCustomDate);"boolean"===typeof b.alwaysShowCalendars&&(this.alwaysShowCalendars=b.alwaysShowCalendars);"boolean"===typeof b.manualInputs&&(this.manualInputs=b.manualInputs);
if(0!=this.locale.firstDay)for(c=this.locale.firstDay;0<c;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),c--;var e,h;if("undefined"===typeof b.startDate&&"undefined"===typeof b.endDate&&d(this.element).is("input[type=text]")){var f=d(this.element).val(),k=f.split(this.locale.separator);c=e=null;2==k.length?(c=a(k[0],this.locale.format),e=a(k[1],this.locale.format)):this.singleDatePicker&&""!==f&&(c=a(f,this.locale.format),e=a(f,this.locale.format));null!==c&&null!==e&&(this.setStartDate(c),
this.setEndDate(e))}if("object"===typeof b.ranges){for(h in b.ranges)c="string"===typeof b.ranges[h][0]?a(b.ranges[h][0],this.locale.format):a(b.ranges[h][0]),e="string"===typeof b.ranges[h][1]?a(b.ranges[h][1],this.locale.format):a(b.ranges[h][1]),this.minDate&&c.isBefore(this.minDate)&&(c=this.minDate.clone()),f=this.maxDate,this.dateLimit&&f&&c.clone().add(this.dateLimit).isAfter(f)&&(f=c.clone().add(this.dateLimit)),f&&e.isAfter(f)&&(e=f.clone()),this.minDate&&e.isBefore(this.minDate,this.timepicker?
"minute":"day")||f&&c.isAfter(f,this.timepicker?"minute":"day")||(f=document.createElement("textarea"),f.innerHTML=h,f=f.value,this.ranges[f]=[c,e]);c="<ul>";for(h in this.ranges)c+='<li data-range-key="'+h+'">'+h+"</li>";this.showCustomRangeLabel&&(c+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>");c+="</ul>";this.container.find(".ranges").prepend(c)}"function"===typeof g&&(this.callback=g);this.timePicker||(this.startDate=this.startDate.startOf("day"),
this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide());this.timePicker&&this.autoApply&&(this.autoApply=!1);this.autoApply&&"object"!==typeof b.ranges?this.container.find(".ranges").hide():this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide");this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".calendar.left").addClass("single"),this.container.find(".calendar.left").show(),this.container.find(".calendar.right").hide(),
this.container.find(".daterangepicker_input input, .daterangepicker_input > i").hide(),this.timePicker?this.container.find(".ranges ul").hide():this.container.find(".ranges").hide());this.manualInputs||this.container.find(".daterangepicker_input input, .daterangepicker_input > i").hide();("undefined"===typeof b.ranges&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar");this.container.addClass("opens"+this.opens);"undefined"!==typeof b.ranges&&"right"==this.opens&&
this.container.find(".ranges").prependTo(this.container.find(".calendar.left").parent());this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses);this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass);this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass);this.container.find(".applyBtn").html(this.locale.applyLabel);this.container.find(".cancelBtn").html(this.locale.cancelLabel);this.container.find(".calendar").on("click.daterangepicker",
".prev",d.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",d.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",d.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",d.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",d.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",d.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",d.proxy(this.monthOrYearChanged,
this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",d.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",d.proxy(this.showCalendars,this)).on("focus.daterangepicker",".daterangepicker_input input",d.proxy(this.formInputsFocused,this)).on("blur.daterangepicker",".daterangepicker_input input",d.proxy(this.formInputsBlurred,this)).on("change.daterangepicker",".daterangepicker_input input",d.proxy(this.formInputsChanged,
this)).on("keydown.daterangepicker",".daterangepicker_input input",d.proxy(this.formInputsKeydown,this));this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",d.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",d.proxy(this.clickCancel,this)).on("click.daterangepicker","li",d.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",d.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",d.proxy(this.updateFormInputs,this));if(this.element.is("input")||
this.element.is("button"))this.element.on({"click.daterangepicker":d.proxy(this.show,this),"focus.daterangepicker":d.proxy(this.show,this),"keyup.daterangepicker":d.proxy(this.elementChanged,this),"keydown.daterangepicker":d.proxy(this.keydown,this)});else this.element.on("click.daterangepicker",d.proxy(this.toggle,this)),this.element.on("keydown.daterangepicker",d.proxy(this.toggle,this));this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+
this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))};e.prototype={constructor:e,setStartDate:function(c){"string"===typeof c&&(this.startDate=a(c,this.locale.format));"object"===typeof c&&(this.startDate=a(c));this.timePicker||(this.startDate=this.startDate.startOf("day"));this.timePicker&&this.timePickerIncrement&&
this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement));this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/
this.timePickerIncrement)*this.timePickerIncrement));this.isShowing||this.updateElement();this.updateMonthsInView()},setEndDate:function(c){"string"===typeof c&&(this.endDate=a(c,this.locale.format));"object"===typeof c&&(this.endDate=a(c));this.timePicker||(this.endDate=this.endDate.add(1,"d").startOf("day").subtract(1,"second"));this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);this.endDate.isBefore(this.startDate)&&
(this.endDate=this.startDate.clone());this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone());this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit));this.previousRightTime=this.endDate.clone();this.isShowing||this.updateElement();this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),
this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled"));this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("active"),this.container.find('input[name="daterangepicker_start"]').addClass("active")):(this.container.find('input[name="daterangepicker_end"]').addClass("active"),this.container.find('input[name="daterangepicker_start"]').removeClass("active"));
this.updateMonthsInView();this.updateCalendars();this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;
this.leftCalendar.month=this.startDate.clone().date(2);this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),
this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){if(this.timePicker){var c,b,a;if(this.endDate){if(c=parseInt(this.container.find(".left .hourselect").val(),10),b=parseInt(this.container.find(".left .minuteselect").val(),10),
a=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour){var d=this.container.find(".left .ampmselect").val();"PM"===d&&12>c&&(c+=12);"AM"===d&&12===c&&(c=0)}}else c=parseInt(this.container.find(".right .hourselect").val(),10),b=parseInt(this.container.find(".right .minuteselect").val(),10),a=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,this.timePicker24Hour||(d=this.container.find(".right .ampmselect").val(),
"PM"===d&&12>c&&(c+=12),"AM"===d&&12===c&&(c=0));this.leftCalendar.month.hour(c).minute(b).second(a);this.rightCalendar.month.hour(c).minute(b).second(a)}this.renderCalendar("left");this.renderCalendar("right");this.container.find(".ranges li").removeClass("active");null!=this.endDate&&this.calculateChosenLabel()},renderCalendar:function(c){var b="left"==c?this.leftCalendar:this.rightCalendar,g=b.month.month(),f=b.month.year(),e=b.month.hour(),h=b.month.minute(),k=b.month.second(),b=a([f,g]).daysInMonth(),
l=a([f,g,1]),q=a([f,g,b]),g=a(l).subtract(1,"month").month(),f=a(l).subtract(1,"month").year(),m=a([f,g]).daysInMonth(),t=l.day(),b=[];b.firstDay=l;b.lastDay=q;for(l=0;6>l;l++)b[l]=[];l=m-t+this.locale.firstDay+1;l>m&&(l-=7);t==this.locale.firstDay&&(l=m-6);m=a([f,g,l,12,h,k]);for(f=g=l=0;42>l;l++,g++,m=a(m).add(24,"hour"))0<l&&0===g%7&&(g=0,f++),b[f][g]=m.clone().hour(e).minute(h).second(k),m.hour(12),this.minDate&&b[f][g].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&b[f][g].isBefore(this.minDate)&&
"left"==c&&(b[f][g]=this.minDate.clone()),this.maxDate&&b[f][g].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&b[f][g].isAfter(this.maxDate)&&"right"==c&&(b[f][g]=this.maxDate.clone());"left"==c?this.leftCalendar.calendar=b:this.rightCalendar.calendar=b;var f="left"==c?this.minDate:this.startDate,e=this.maxDate,h="ltr"==this.locale.direction?{left:"chevron-left",right:"chevron-right"}:{left:"chevron-right",right:"chevron-left"},p='<table class="table-condensed">',p=p+"<thead>",p=p+"<tr>";
if(this.showWeekNumbers||this.showISOWeekNumbers)p+="<th></th>";p=f&&!f.isBefore(b.firstDay)||this.linkedCalendars&&"left"!=c?p+"<th></th>":p+('<th class="prev available"><i class="fa fa-'+h.left+" glyphicon glyphicon-"+h.left+'"></i></th>');k=this.locale.monthNames[b[1][1].month()]+b[1][1].format(" YYYY");if(this.showDropdowns){for(var t=b[1][1].month(),k=b[1][1].year(),l=e&&e.year()||k+5,m=f&&f.year()||k-50,q=k==m,u=k==l,g='<select class="monthselect">',r=0;12>r;r++)g=(!q||r>=f.month())&&(!u||r<=
e.month())?g+("<option value='"+r+"'"+(r===t?" selected='selected'":"")+">"+this.locale.monthNames[r]+"</option>"):g+("<option value='"+r+"'"+(r===t?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[r]+"</option>");for(f='<select class="yearselect">';m<=l;m++)f+='<option value="'+m+'"'+(m===k?' selected="selected"':"")+">"+m+"</option>";k=g+"</select>"+(f+"</select>")}p+='<th colspan="5" class="month">'+k+"</th>";p=e&&!e.isAfter(b.lastDay)||this.linkedCalendars&&"right"!=c&&
!this.singleDatePicker?p+"<th></th>":p+('<th class="next available"><i class="fa fa-'+h.right+" glyphicon glyphicon-"+h.right+'"></i></th>');p+="</tr>";p+="<tr>";if(this.showWeekNumbers||this.showISOWeekNumbers)p+='<th class="week">'+this.locale.weekLabel+"</th>";d.each(this.locale.daysOfWeek,function(b,c){p+="<th>"+c+"</th>"});p+="</tr>";p+="</thead>";p+="<tbody>";null==this.endDate&&this.dateLimit&&(h=this.startDate.clone().add(this.dateLimit).endOf("day"),!e||h.isBefore(e))&&(e=h);for(f=0;6>f;f++){p+=
"<tr>";this.showWeekNumbers?p+='<td class="week">'+b[f][0].week()+"</td>":this.showISOWeekNumbers&&(p+='<td class="week">'+b[f][0].isoWeek()+"</td>");for(g=0;7>g;g++){h=[];b[f][g].isSame(new Date,"day")&&h.push("today");5<b[f][g].isoWeekday()&&h.push("weekend");b[f][g].month()!=b[1][1].month()&&h.push("off");this.minDate&&b[f][g].isBefore(this.minDate,"day")&&h.push("off","disabled");e&&b[f][g].isAfter(e,"day")&&h.push("off","disabled");this.isInvalidDate(b[f][g])&&h.push("off","disabled");b[f][g].format("YYYY-MM-DD")==
this.startDate.format("YYYY-MM-DD")&&h.push("active","start-date");null!=this.endDate&&b[f][g].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&h.push("active","end-date");null!=this.endDate&&b[f][g]>this.startDate&&b[f][g]<this.endDate&&h.push("in-range");k=this.isCustomDate(b[f][g]);!1!==k&&("string"===typeof k?h.push(k):Array.prototype.push.apply(h,k));k="";m=!1;for(l=0;l<h.length;l++)k+=h[l]+" ","disabled"==h[l]&&(m=!0);m||(k+="available");p+='<td class="'+k.replace(/^\s+|\s+$/g,"")+'" data-title="r'+
f+"c"+g+'">'+b[f][g].date()+"</td>"}p+="</tr>"}p+="</tbody>";p+="</table>";this.container.find(".calendar."+c+" .calendar-table").html(p)},renderTimePicker:function(c){if("right"!=c||this.endDate){var b,a,d,e=this.maxDate;!this.dateLimit||this.maxDate&&!this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)||(e=this.startDate.clone().add(this.dateLimit));"left"==c?(a=this.startDate.clone(),d=this.minDate):"right"==c&&(a=this.endDate.clone(),d=this.startDate,b=this.container.find(".calendar.right .calendar-time div"),
""!=b.html()&&(a.hour(b.find(".hourselect option:selected").val()||a.hour()),a.minute(b.find(".minuteselect option:selected").val()||a.minute()),a.second(b.find(".secondselect option:selected").val()||a.second()),this.timePicker24Hour||(b=b.find(".ampmselect option:selected").val(),"PM"===b&&12>a.hour()&&a.hour(a.hour()+12),"AM"===b&&12===a.hour()&&a.hour(0))),a.isBefore(this.startDate)&&(a=this.startDate.clone()),e&&a.isAfter(e)&&(a=e.clone()));b='<select class="hourselect">';for(var h=this.timePicker24Hour?
23:12,k=this.timePicker24Hour?0:1;k<=h;k++){var l=k;this.timePicker24Hour||(l=12<=a.hour()?12==k?12:k+12:12==k?0:k);var q=a.clone().hour(l),m=!1;d&&q.minute(59).isBefore(d)&&(m=!0);e&&q.minute(0).isAfter(e)&&(m=!0);b=l!=a.hour()||m?m?b+('<option value="'+k+'" disabled="disabled" class="disabled">'+k+"</option>"):b+('<option value="'+k+'">'+k+"</option>"):b+('<option value="'+k+'" selected="selected">'+k+"</option>")}b+='</select> : <select class="minuteselect">';for(k=0;60>k;k+=this.timePickerIncrement)h=
10>k?"0"+k:k,q=a.clone().minute(k),m=!1,d&&q.second(59).isBefore(d)&&(m=!0),e&&q.second(0).isAfter(e)&&(m=!0),b=a.minute()!=k||m?m?b+('<option value="'+k+'" disabled="disabled" class="disabled">'+h+"</option>"):b+('<option value="'+k+'">'+h+"</option>"):b+('<option value="'+k+'" selected="selected">'+h+"</option>");b+="</select> ";if(this.timePickerSeconds){b+=': <select class="secondselect">';for(k=0;60>k;k++)h=10>k?"0"+k:k,q=a.clone().second(k),m=!1,d&&q.isBefore(d)&&(m=!0),e&&q.isAfter(e)&&(m=
!0),b=a.second()!=k||m?m?b+('<option value="'+k+'" disabled="disabled" class="disabled">'+h+"</option>"):b+('<option value="'+k+'">'+h+"</option>"):b+('<option value="'+k+'" selected="selected">'+h+"</option>");b+="</select> "}this.timePicker24Hour||(b+='<select class="ampmselect">',q=k="",d&&a.clone().hour(12).minute(0).second(0).isBefore(d)&&(k=' disabled="disabled" class="disabled"'),e&&a.clone().hour(0).minute(0).second(0).isAfter(e)&&(q=' disabled="disabled" class="disabled"'),b=12<=a.hour()?
b+('<option value="AM"'+k+'>AM</option><option value="PM" selected="selected"'+q+">PM</option>"):b+('<option value="AM" selected="selected"'+k+'>AM</option><option value="PM"'+q+">PM</option>"),b+="</select>");this.container.find(".calendar."+c+" .calendar-time div").html(b)}},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),
this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled"))},move:function(){var c=0,b=0,a=d(window).width();this.parentEl.is("body")||(c=this.parentEl.offset().top-this.parentEl.scrollTop(),b=this.parentEl.offset().left-
this.parentEl.scrollLeft(),a=this.parentEl[0].clientWidth+this.parentEl.offset().left);c="up"==this.drops?this.element.offset().top-this.container.outerHeight()-c:this.element.offset().top+this.element.outerHeight()-c;this.container["up"==this.drops?"addClass":"removeClass"]("dropup");"left"==this.opens?(this.container.css({top:c,right:a-this.element.offset().left-this.element.outerWidth(),left:"auto"}),0>this.container.offset().left&&this.container.css({right:"auto",left:9})):"center"==this.opens?
(this.container.css({top:c,left:this.element.offset().left-b+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),0>this.container.offset().left&&this.container.css({right:"auto",left:9})):(this.container.css({top:c,left:this.element.offset().left-b,right:"auto"}),this.container.offset().left+this.container.outerWidth()>d(window).width()&&this.container.css({left:"auto",right:0}))},show:function(c){this.isShowing||(this._outsideClickProxy=d.proxy(function(b){this.outsideClick(b)},
this),d(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),d(window).on("resize.daterangepicker",d.proxy(function(b){this.move(b)},this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),
this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(c){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.updateElement(),d(document).off(".daterangepicker"),d(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",
this),this.isShowing=!1)},toggle:function(c){this.isShowing?this.hide():this.show()},outsideClick:function(c){var b=d(c.target);"focusin"==c.type||b.closest(this.element).length||b.closest(this.container).length||b.closest(".calendar-table").length||(this.hide(),this.element.trigger("outsideClick.daterangepicker",this))},showCalendars:function(){this.container.addClass("show-calendar");this.move();this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar");
this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(c){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(c=c.target.getAttribute("data-range-key"),c==this.locale.customRangeLabel?this.updateView():(c=this.ranges[c],this.container.find("input[name=daterangepicker_start]").val(c[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(c[1].format(this.locale.format))))},
clickRange:function(c){this.chosenLabel=c=c.target.getAttribute("data-range-key");c==this.locale.customRangeLabel?this.showCalendars():(c=this.ranges[c],this.startDate=c[0],this.endDate=c[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply())},clickPrev:function(c){d(c.target).parents(".calendar").hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,
"month")):this.rightCalendar.month.subtract(1,"month");this.updateCalendars()},clickNext:function(c){d(c.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month"));this.updateCalendars()},hoverDate:function(c){if(d(c.target).hasClass("available")){var b=d(c.target).attr("data-title"),a=b.substr(1,1),b=b.substr(3,1),e=d(c.target).parents(".calendar").hasClass("left")?this.leftCalendar.calendar[a][b]:
this.rightCalendar.calendar[a][b];this.endDate&&!this.container.find("input[name=daterangepicker_start]").is(":focus")?this.container.find("input[name=daterangepicker_start]").val(e.format(this.locale.format)):this.endDate||this.container.find("input[name=daterangepicker_end]").is(":focus")||this.container.find("input[name=daterangepicker_end]").val(e.format(this.locale.format));var n=this.leftCalendar,h=this.rightCalendar,k=this.startDate;this.endDate||this.container.find(".calendar tbody td").each(function(b,
c){if(!d(c).hasClass("week")){var a=d(c).attr("data-title"),g=a.substr(1,1),a=a.substr(3,1),g=d(c).parents(".calendar").hasClass("left")?n.calendar[g][a]:h.calendar[g][a];g.isAfter(k)&&g.isBefore(e)||g.isSame(e,"day")?d(c).addClass("in-range"):d(c).removeClass("in-range")}})}},clickDate:function(c){if(d(c.target).hasClass("available")){var b=d(c.target).attr("data-title"),a=b.substr(1,1),b=b.substr(3,1),a=d(c.target).parents(".calendar").hasClass("left")?this.leftCalendar.calendar[a][b]:this.rightCalendar.calendar[a][b];
if(this.endDate||a.isBefore(this.startDate,"day")){if(this.timePicker){b=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour){var e=this.container.find(".left .ampmselect").val();"PM"===e&&12>b&&(b+=12);"AM"===e&&12===b&&(b=0)}var e=parseInt(this.container.find(".left .minuteselect").val(),10),n=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,a=a.clone().hour(b).minute(e).second(n)}this.endDate=null;this.setStartDate(a.clone())}else!this.endDate&&
a.isBefore(this.startDate)?this.setEndDate(this.startDate.clone()):(this.timePicker&&(b=parseInt(this.container.find(".right .hourselect").val(),10),this.timePicker24Hour||(e=this.container.find(".right .ampmselect").val(),"PM"===e&&12>b&&(b+=12),"AM"===e&&12===b&&(b=0)),e=parseInt(this.container.find(".right .minuteselect").val(),10),n=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,a=a.clone().hour(b).minute(e).second(n)),this.setEndDate(a.clone()),this.autoApply&&
(this.calculateChosenLabel(),this.clickApply()));this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply());this.updateView();c.stopPropagation()}},calculateChosenLabel:function(){var c=!0,b=0,a;for(a in this.ranges){if(this.timePicker){var d=this.timePickerSeconds?"YYYY-MM-DD hh:mm:ss":"YYYY-MM-DD hh:mm";if(this.startDate.format(d)==this.ranges[a][0].format(d)&&this.endDate.format(d)==this.ranges[a][1].format(d)){c=!1;this.chosenLabel=this.container.find(".ranges li:eq("+
b+")").addClass("active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[a][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[a][1].format("YYYY-MM-DD")){c=!1;this.chosenLabel=this.container.find(".ranges li:eq("+b+")").addClass("active").html();break}b++}c&&(this.chosenLabel=this.showCustomRangeLabel?this.container.find(".ranges li:last").addClass("active").html():null,this.showCalendars())},clickApply:function(c){this.hide();this.element.trigger("apply.daterangepicker",
this)},clickCancel:function(c){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.hide();this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(c){c=d(c.target).closest(".calendar").hasClass("left");var b=this.container.find(".calendar."+(c?"left":"right")),a=parseInt(b.find(".monthselect").val(),10),b=b.find(".yearselect").val();!c&&(b<this.startDate.year()||b==this.startDate.year()&&a<this.startDate.month())&&(a=this.startDate.month(),b=this.startDate.year());
this.minDate&&(b<this.minDate.year()||b==this.minDate.year()&&a<this.minDate.month())&&(a=this.minDate.month(),b=this.minDate.year());this.maxDate&&(b>this.maxDate.year()||b==this.maxDate.year()&&a>this.maxDate.month())&&(a=this.maxDate.month(),b=this.maxDate.year());c?(this.leftCalendar.month.month(a).year(b),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(a).year(b),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,
"month")));this.updateCalendars()},timeChanged:function(c){var b=d(c.target).closest(".calendar"),a=b.hasClass("left");c=parseInt(b.find(".hourselect").val(),10);var e=parseInt(b.find(".minuteselect").val(),10),n=this.timePickerSeconds?parseInt(b.find(".secondselect").val(),10):0;this.timePicker24Hour||(b=b.find(".ampmselect").val(),"PM"===b&&12>c&&(c+=12),"AM"===b&&12===c&&(c=0));a?(a=this.startDate.clone(),a.hour(c),a.minute(e),a.second(n),this.setStartDate(a),this.singleDatePicker?this.endDate=
this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==a.format("YYYY-MM-DD")&&this.endDate.isBefore(a)&&this.setEndDate(a.clone())):this.endDate&&(a=this.endDate.clone(),a.hour(c),a.minute(e),a.second(n),this.setEndDate(a));this.updateCalendars();this.updateFormInputs();this.renderTimePicker("left");this.renderTimePicker("right")},formInputsChanged:function(c){c=d(c.target).closest(".calendar").hasClass("right");var b=a(this.container.find('input[name="daterangepicker_start"]').val(),
this.locale.format),e=a(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);b.isValid()&&e.isValid()&&(c&&e.isBefore(b)&&(b=e.clone()),this.setStartDate(b),this.setEndDate(e),c?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format)));this.updateView()},formInputsFocused:function(a){this.container.find('input[name="daterangepicker_start"], input[name="daterangepicker_end"]').removeClass("active");
d(a.target).addClass("active");d(a.target).closest(".calendar").hasClass("right")&&(this.endDate=null,this.setStartDate(this.startDate.clone()),this.updateView())},formInputsBlurred:function(c){this.endDate||(c=this.container.find('input[name="daterangepicker_end"]').val(),c=a(c,this.locale.format),c.isValid()&&(this.setEndDate(c),this.updateView()))},formInputsKeydown:function(a){13===a.keyCode&&(a.preventDefault(),this.formInputsChanged(a))},elementChanged:function(){if(this.element.is("input")&&
this.element.val().length){var c=this.element.val().split(this.locale.separator),b=null,d=null;2===c.length&&(b=a(c[0],this.locale.format),d=a(c[1],this.locale.format));if(this.singleDatePicker||null===b||null===d)d=b=a(this.element.val(),this.locale.format);b.isValid()&&d.isValid()&&(this.setStartDate(b),this.setEndDate(d),this.updateView())}},keydown:function(a){9!==a.keyCode&&13!==a.keyCode||this.hide();27===a.keyCode&&(a.preventDefault(),a.stopPropagation(),this.hide())},updateElement:function(){this.element.is("input")&&
!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))},remove:function(){this.container.remove();this.element.off(".daterangepicker");this.element.removeData()}};d.fn.daterangepicker=function(a,b){var g=d.extend(!0,
{},d.fn.daterangepicker.defaultOptions,a);this.each(function(){var a=d(this);a.data("daterangepicker")&&a.data("daterangepicker").remove();a.data("daterangepicker",new e(a,g,b))});return this};return e});var glTags=[],glAnchors=[],gl_tag_num=0,gl_anchor_num=0,gl_locator_num=0,gl_tag_load_index=0,gl_anchor_load_index=0,gl_locator_load_index=0,LOAD_DEVICE_NUM=20,PreLoadIndex=-1,CurrentLoadIndex=0,glInspectionGroups=[],glInspectionGroupPath=[[]],gl_inspectiongroup_num=0,gl_inspectiongroup_load_index=0,gl_inspectionpoint_load_index=0,gl_active_group_index=1,glTargetStartDate=[],glTargetEndDate=[];check_loading_status();
function check_loading_status(){switch(CurrentLoadIndex){case 0:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_devices());break;case 1:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_inspectiongroup_exist());break;case 2:PreLoadIndex!=CurrentLoadIndex&&
(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_inspectionpoint_exist());break;case 3:if(PreLoadIndex!=CurrentLoadIndex){console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex);PreLoadIndex=CurrentLoadIndex;if(void 0==glInspectionGroups[gl_inspectiongroup_load_index])return;load_inspectiongroup_dailydata(gl_inspectiongroup_load_index);CurrentLoadIndex=4}}4>
CurrentLoadIndex?setTimeout(check_loading_status,100):console.log("check_loading_status() Stop.")}
function load_inspectiongroup_exist(){$.getJSON(gl_target_server+"/php/inspectionpath.php","loadinspectiongroup=1&project_id="+project_id,function(a){for(var d=document.getElementById("inspectiongroup_nav_tabs");d.firstChild;)d.removeChild(d.firstChild);gl_inspectiongroup_num=0;glInspectionGroups=[];var e=1;$.each(a,function(a,b){add_exist_inspectiongroup(e,a,gl_inspectiongroup_num,b);if(void 0==document.getElementById("inspectionpoint_table_"+a)){console.log("load_inspectiongroup_dailydata() inspectionpoint_table == undefined");
create_inspectionpoint_table(a,b,gl_inspectiongroup_num);var d=glTargetStartDate[a],f=glTargetEndDate[a],n=gl_inspectiongroup_num;$("#Group_Status_Page_"+a).daterangepicker({autoApply:!0,manualInputs:!1,startDate:d,endDate:f,locale:{format:"YYYY/MM/DD"}},function(b,d){glTargetStartDate[a]=b.format("YYYYMMDD");glTargetEndDate[a]=d.format("YYYYMMDD");load_inspectiongroup_dailydata(n)})}else console.log("load_inspectiongroup_dailydata() inspectionpoint_table existed!");glInspectionGroups[gl_inspectiongroup_num]=
b;void 0==glTargetStartDate[a]&&(glTargetStartDate[a]=getTargetDate(-30));void 0==glTargetEndDate[a]&&(glTargetEndDate[a]=getTargetDate(0));console.log("load_inspectiongroup_exist() glTargetStartDate["+a+"]:"+glTargetStartDate[a]+", glTargetEndDate["+a+"]:"+glTargetEndDate[a]);e++;gl_inspectiongroup_num++});gl_inspectiongroup_load_index=0;CurrentLoadIndex=2});return!1}
function load_inspectiongroup_dailydata(a){console.log("load_inspectiongroup_dailydata() Group_Load_Index:"+a);var d=glInspectionGroups[a];if(void 0==d)console.log("load_inspectiongroup_dailydata() inspectionGroup == undefined");else{var e=d.GroupID,c=glTargetStartDate[e],b=glTargetEndDate[e];$.getJSON(gl_target_server+"/php/inspectionpath.php","loadinspectiongrouphistory=1&project_id="+project_id+"&GroupID="+e+"&startdate="+c+"&enddate="+b,function(a){var d=document.getElementById("inspectionpoint_table_body_"+
e);if(void 0!=d)for(;d.firstChild;)d.removeChild(d.firstChild);else console.log("load_inspectiongroup_dailydata() checkpointGroup_table_body == undefined");var n=1;$.each(a,function(a,b){add_history_row(e,n,a,b);n++});a=document.getElementById("Group_Status_Page_"+e);void 0!=a&&(a.textContent=convertToShowDate(c)+" - "+convertToShowDate(b))}).success(function(){load_inspectionpoint_dailydata(a)}).error(function(){}).complete(function(){});return!1}}
function load_inspectionpoint_exist(){if(gl_inspectionpoint_load_index>=gl_inspectiongroup_num)console.log("load_inspectionpoint_exist() Finished!"),CurrentLoadIndex=3;else{var a=glInspectionGroups[gl_inspectionpoint_load_index].GroupID;$.getJSON(gl_target_server+"/php/inspectionpath.php","loadinspectionpoint=1&project_id="+project_id+"&GroupID="+a,function(d){var e=1;Object.keys(d);glInspectionGroupPath[a]=[];$.each(d,function(c,b){1<e&&add_inspectionpoint_table_head_traveltime(a,b);add_inspectionpoint_table_head_point(a,
b);e++;glInspectionGroupPath[a].push(b)});gl_inspectionpoint_load_index++}).success(function(){setTimeout(load_inspectionpoint_exist,10)}).error(function(){}).complete(function(){});return!1}}
function load_inspectionpoint_dailydata(a){console.log("load_inspectionpoint_dailydata() Group_Load_Index:"+a);a=glInspectionGroups[a];if(void 0==a)console.log("load_inspectionpoint_dailydata() inspectionGroup == undefined");else{var d=a.GroupID;$.getJSON(gl_target_server+"/php/inspectionpath.php","loadinspectionpointdailyhistory=1&project_id="+project_id+"&GroupID="+d+"&startdate="+glTargetStartDate[d]+"&enddate="+glTargetEndDate[d],function(a){console.log("load_inspectionpoint_dailydata() data.length:"+
a.length);var c=[];$.each(a,function(a,b){var d=b.DateTime;void 0==c[d]&&(c[d]=[]);c[d].push(b)});for(var b in c)update_table_dailydata(d,b,c[b])}).success(function(){}).error(function(){}).complete(function(){});return!1}}
function update_table_dailydata(a,d,e){var c=document.getElementById("table_row_"+a+"_"+d);if(void 0!=c){var b=1,g;for(g in e){var f=e[g];console.log("load_inspectionpoint_dailydata() daydata index:"+b+", PointID:"+f.PointID+", Checked:"+f.Checked+", Finished:"+f.Finished+", Exceed:"+f.Exceed);var n=getCheckPointPath(a,f.PointID);if(void 0!=n){var h="PATH_"+a+"_"+n.PointIndex,k=document.getElementById("AnchorNodeId_"+a+"_"+n.PointIndex+"_"+n.AnchorNodeId),l=document.getElementById(h);if(1<b&&void 0!=
l&&(console.log("load_inspectionpoint_dailydata() PathId:"+h),l="PathStatus_"+a+"_"+n.PointIndex+"_"+d,h=document.getElementById(l),void 0==h)){h=document.createElement("td");h.setAttribute("align","center");c.appendChild(h);var q=getStatusPath(f);q.setAttribute("id",l);h.appendChild(q)}void 0!=k&&(k="Inspector_"+a+"_"+n.PointIndex+"_"+d,h=document.getElementById(k),void 0==h&&(h=document.createElement("td"),h.setAttribute("align","center"),c.appendChild(h),l=document.createElement("span"),l.setAttribute("class",
"badge bg-light-blue-active"),l.setAttribute("id",k),l.textContent=getInspectorName(f.Inspector),h.appendChild(l),q=getStatusNode(f.Status,f.EnterTime,f.LeaveTime),q.setAttribute("id","Status_"+a+"_"+n.PointIndex+"_"+d),h.appendChild(q)));b++}}}}
function getStatusNode(a,d,e){var c=document.createElement("span");d=convertRecordTime(d)+" -> "+convertRecordTime(e);c.setAttribute("title",d);"0"==a?(c.setAttribute("title",""),c.setAttribute("class","badge bg-gray"),c.textContent="\u7121\u7d00\u9304"):"1"==a?(c.setAttribute("class","badge bg-green"),c.textContent="\u5b8c\u6210"):"2"==a?(c.setAttribute("class","badge bg-red"),c.textContent="\u5de1\u6aa2\u6642\u9593\u904e\u77ed"):"3"==a&&(c.setAttribute("class","badge bg-yellow-active"),c.textContent=
"\u5de1\u6aa2\u6642\u9593\u904e\u9577");return c}
function getStatusPath(a){Finished=a.Finished;Exceed=a.Exceed;Checked=a.Checked;var d=document.createElement("span");0==Finished&&0==Exceed&&0==Checked?(d.setAttribute("class","badge bg-gray"),d.textContent="\u7121\u7d00\u9304"):(a=convertRecordTime(a.StartTagEnterTime)+" -> "+convertRecordTime(a.EndTagEnterTime),d.setAttribute("title",a),1==Checked&&1==Exceed?(d.setAttribute("class","badge bg-red"),d.textContent="\u5de1\u6aa2\u8def\u7dda\u903e\u6642"):1==Checked&&1==Finished?(d.setAttribute("class",
"badge bg-green"),d.textContent="\u5de1\u6aa2\u8def\u7dda\u5b8c\u6210"):1==Checked&&(d.setAttribute("class","badge bg-green"),d.textContent="\u5de1\u6aa2\u8def\u7dda\u5df2\u6aa2\u67e5"));return d}function getCheckPointPath(a,d){var e=glInspectionGroupPath[a],c=null,b;for(b=0;b<e.length;b++)if(e[b].PointID==d){c=e[b];break}return c}
function add_exist_inspectiongroup(a,d,e,c){var b=document.getElementById("inspectiongroup_nav_tabs"),g=document.createElement("li");a==gl_active_group_index&&g.setAttribute("class","active");a=document.createElement("a");a.setAttribute("href","#inspectionpoint_table_"+d);a.setAttribute("data-toggle","tab");a.setAttribute("onclick","group_tab_onclick("+d+","+e+");return false;");d=document.createElement("span");d.setAttribute("class","badge bg-blue-active");d.textContent=c.GroupName;a.appendChild(d);
g.appendChild(a);b.appendChild(g)}
function create_inspectionpoint_table(a,d,e){var c=document.getElementById("inspectiongroup_tab_content"),b=document.createElement("div");0==e?b.setAttribute("class","tab-pane active"):b.setAttribute("class","tab-pane");b.setAttribute("id","inspectionpoint_table_"+a);c.appendChild(b);c=document.createElement("div");c.setAttribute("class","box");b.appendChild(c);b=document.createElement("div");b.setAttribute("class","box-header");c.appendChild(b);var g=document.createElement("H3");g.setAttribute("class",
"box-title");b.appendChild(g);var f=document.createElement("span");f.setAttribute("class","badge bg-green");f.setAttribute("id","Group_Status_Title_"+a);g.appendChild(f);f=document.createElement("span");f.setAttribute("class","badge bg-yellow-active");f.setAttribute("id","Group_StartEndTime_"+a);f.textContent=d.StartTime+" -> "+d.EndTime;g.appendChild(f);g=document.createElement("div");g.setAttribute("class","box-tools");b.appendChild(g);d=document.createElement("ul");d.setAttribute("class","pagination pagination-sm no-margin pull-right");
g.appendChild(d);b=document.createElement("li");d.appendChild(b);g=document.createElement("a");g.setAttribute("href","javascript:;");g.setAttribute("onclick","move_date_backward("+a+","+e+");return false;");g.textContent="\u00ab";b.appendChild(g);b=document.createElement("li");d.appendChild(b);g=document.createElement("a");g.setAttribute("href","#");g.setAttribute("id","Group_Status_Page_"+a);g.textContent="";b.appendChild(g);b=document.createElement("li");d.appendChild(b);d=document.createElement("a");
d.setAttribute("href","javascript:;");d.setAttribute("onclick","move_date_forward("+a+","+e+");return false;");d.textContent="\u00bb";b.appendChild(d);d=document.createElement("div");d.setAttribute("class","box-body no-padding");c.appendChild(d);e=document.createElement("table");e.setAttribute("class","table table-bordered");d.appendChild(e);d=document.createElement("thead");e.appendChild(d);c=document.createElement("tr");c.setAttribute("bgcolor","#cce6ff");c.setAttribute("id","table_head_"+a);d.appendChild(c);
d=document.createElement("th");d.setAttribute("style","width: 10px");d.textContent="#";c.appendChild(d);d=document.createElement("th");d.setAttribute("style","width: 50px");d.textContent="Date";c.appendChild(d);d=document.createElement("th");d.setAttribute("style","width: 100px; text-align:center");d.textContent="\u8a18\u9304";c.appendChild(d);d=document.createElement("th");d.setAttribute("style","width: 100px; text-align:center");d.textContent="\u5206\u6578";c.appendChild(d);c=document.createElement("tbody");
c.setAttribute("id","inspectionpoint_table_body_"+a);e.appendChild(c)}
function add_inspectionpoint_table_head_point(a,d){var e=document.getElementById("table_head_"+a);if(void 0==e)console.log("add_checkpoint_table_head() theadtrGroup == undefined");else{var c=document.createElement("th");c.setAttribute("style","text-align:center");var b=document.createElement("span");b.setAttribute("class","badge bg-light-blue-active");b.setAttribute("id","AnchorNodeId_"+a+"_"+d.PointIndex+"_"+d.AnchorNodeId);b.textContent=getNodeName(d.AnchorNodeId);c.appendChild(b);e.appendChild(c)}}
function add_inspectionpoint_table_head_traveltime(a,d){var e=document.getElementById("table_head_"+a);if(void 0==e)console.log("add_checkpoint_table_head() theadtrGroup == undefined");else{var c=document.createElement("th");c.setAttribute("style","text-align:center");c.setAttribute("id","PATH_"+a+"_"+d.PointIndex);var b=document.createElement("span");b.setAttribute("class","badge bg-aqua");c.appendChild(b);var g=document.createElement("i");g.setAttribute("class","fa fa-long-arrow-right");b.appendChild(g);
e.appendChild(c)}}
function add_history_row(a,d,e,c){var b=document.getElementById("inspectionpoint_table_body_"+a);if(void 0==b)console.log("add_history_row() checkpointGroup_table_body == undefined");else{var g=c.DateTime;e=c.Finished;var f=c.Exceed;c=c.Score;var n=0,h=document.createElement("tr");0==d%2&&h.setAttribute("bgcolor","#ebebe0");h.setAttribute("id","table_row_"+a+"_"+g);b.appendChild(h);h.appendChild(document.createElement("td"));h.cells[n].appendChild(document.createTextNode(""+d));n++;h.appendChild(document.createElement("td"));
h.cells[n].appendChild(document.createTextNode(convertToShowDate(g)));n++;a=document.createElement("td");a.setAttribute("align","center");h.appendChild(a);a=document.createElement("span");1==e?(a.setAttribute("class","badge bg-green"),a.textContent="\u5de1\u6aa2\u5df2\u5b8c\u6210"):1==f?(a.setAttribute("class","badge bg-red"),a.textContent="\u5de1\u6aa2\u5df2\u903e\u6642"):(a.setAttribute("class","badge bg-light-blue"),a.textContent="\u5de1\u6aa2\u5c1a\u672a\u958b\u59cb");h.cells[n].appendChild(a);
a=document.createElement("td");a.setAttribute("align","center");a.appendChild(document.createTextNode(c));h.appendChild(a)}}
function load_devices(){$.getJSON(gl_target_server+"/php/vilsnodes.php","devicescount=1&project_id="+project_id,function(a){gl_tag_num=parseInt(a.LOC_TAG_NUM);gl_anchor_num=parseInt(a.LOC_ANCHOR_NUM);gl_locator_num=parseInt(a.LOC_LOCATOR_NUM);gl_locator_load_index=gl_anchor_load_index=gl_tag_load_index=0}).success(function(){setTimeout(load_tags,10)}).error(function(){setTimeout(load_devices,1E3)}).complete(function(){})}
function load_tags(){gl_tag_load_index>=gl_tag_num?(gl_tag_load_index=0,setTimeout(load_anchors,10)):(0==gl_tag_load_index&&(glTags=[]),$.getJSON(gl_target_server+"/php/vilsnodes.php","loadtag=1&s="+gl_tag_load_index+"&count="+LOAD_DEVICE_NUM+"&project_id="+project_id,function(a){var d=parseInt(a.LOC_TAG_NUM);0==gl_tag_load_index&&0==d&&(gl_tag_load_index=gl_tag_num=0);for(var e=gl_tag_load_index;e<gl_tag_load_index+d;++e){var c=a["LOC_TAG_INDEX_"+e];void 0!=c&&(c=c.split(","),"1"===c[4]&&glTags.push(c))}gl_tag_load_index+=
d}).success(function(){gl_tag_load_index>=gl_tag_num?(gl_tag_load_index=0,setTimeout(load_anchors,10)):setTimeout(load_tags,10)}).error(function(){gl_tag_load_index=0;setTimeout(load_tags,1E3)}).complete(function(){}))}
function load_anchors(){gl_anchor_load_index>=gl_anchor_num?(gl_anchor_load_index=0,setTimeout(load_locators,10)):(0==gl_anchor_load_index&&(glAnchors=[]),$.getJSON(gl_target_server+"/php/vilsnodes.php","loadanchor=1&s="+gl_anchor_load_index+"&count="+LOAD_DEVICE_NUM+"&project_id="+project_id,function(a){for(var d=parseInt(a.LOC_ANCHOR_NUM),e=gl_anchor_load_index;e<gl_anchor_load_index+d;++e){var c="LOC_ANCHOR_INDEX_"+e;void 0!=a[c]&&null!=a[c]&&(c=a[c].split(","),glAnchors[e]={},glAnchors[e].itemid=
c[3],glAnchors[e].itemname=c[5],glAnchors[e].posX=c[7],glAnchors[e].posY=c[8],glAnchors[e].posZ=c[9],glAnchors[e].type="anchor")}gl_anchor_load_index+=d}).success(function(){gl_anchor_load_index>=gl_anchor_num?(gl_anchor_load_index=0,setTimeout(load_locators,10)):load_anchors()}).error(function(){gl_anchor_load_index=0;setTimeout(load_locators,10)}).complete(function(){}))}
function load_locators(){gl_locator_load_index>=gl_locator_num?(gl_locator_load_index=0,CurrentLoadIndex=1):(0==gl_locator_load_index&&(glLocator_List=[]),$.getJSON(gl_target_server+"/php/vilsnodes.php","loadlocator=1&s="+gl_locator_load_index+"&count="+LOAD_DEVICE_NUM+"&project_id="+project_id,function(a){for(var d=parseInt(a.LOC_LOCATOR_NUM),e=gl_anchor_num,c=gl_locator_load_index;c<gl_locator_load_index+d;++c){var b="LOC_LOCATOR_INDEX_"+c;void 0!=a[b]&&null!=a[b]&&(b=a[b].split(","),glAnchors[e+
c]={},glAnchors[e+c].itemid=b[3],glAnchors[e+c].itemname=b[5],glAnchors[e+c].posX=b[7],glAnchors[e+c].posY=b[8],glAnchors[e+c].posZ=b[9],glAnchors[e+c].type="locator")}gl_locator_load_index+=d}).success(function(){gl_locator_load_index>=gl_locator_num?(gl_locator_load_index=0,CurrentLoadIndex=1):load_locators()}).error(function(){gl_locator_load_index=0;CurrentLoadIndex=1}).complete(function(){}))}function group_tab_onclick(a,d){load_inspectiongroup_dailydata(d)}
function move_date_forward(a,d){var e=glTargetEndDate[a],c=moment(e,"YYYYMMDD").add(30,"day").format("YYYYMMDD");glTargetStartDate[a]=e;glTargetEndDate[a]=c;load_inspectiongroup_dailydata(d)}function move_date_backward(a,d){var e=glTargetStartDate[a],c=moment(e,"YYYYMMDD").subtract(30,"day").format("YYYYMMDD");glTargetStartDate[a]=c;glTargetEndDate[a]=e;load_inspectiongroup_dailydata(d)}
function getNodeName(a){for(var d=a,e=0;e<glAnchors.length;e++)if(glAnchors[e].itemid==a){d=glAnchors[e].itemname;break}return d}function getInspectorName(a){for(var d=a,e=0;e<glTags.length;e++){var c=glTags[e],b=c[5];if(c[3]===a){d=b;break}}return d}function isANumber(a){return!/\D/.test(a)}function getTodayDate(){var a=new Date;return today=""+a.getFullYear()+(a.getMonth()+1)+a.getDate()}function getTargetDate(a){return moment().add(a,"d").format("YYYYMMDD")}
function convertToShowDate(a){return moment(a,"YYYYMMDD").format("YYYY/MM/DD")}function convertRecordTime(a){return moment(a,"YYYY-MM-DD HH:mm:ss").format("HH:mm:ss")}function open_inspection_history_page(){window.open("/index.php/vilsinspectionhistory/"+project_id,"_blank").focus()};
