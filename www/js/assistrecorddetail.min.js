var $jscomp={scope:{},findInternal:function(a,c,d){a instanceof String&&(a=String(a));for(var g=a.length,e=0;e<g;e++){var h=a[e];if(c.call(d,h,e,a))return{i:e,v:h}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[c]=d.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,d,g){if(c){d=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var e=a[g];e in d||(d[e]={});d=d[e]}a=a[a.length-1];g=d[a];c=c(g);c!=g&&null!=c&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,d,g){var e=this.length||0;0>d&&(d=Math.max(0,e+d));if(null==g||g>e)g=e;g=Number(g);0>g&&(g=Math.max(0,e+g));for(d=Number(d||0);d<g;d++)this[d]=a;return this}},"es6-impl","es3");
$jscomp.checkStringArgs=function(a,c,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,d){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,d||0)}},"es6-impl","es3");
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a,c){function d(){return new Date(Date.UTC.apply(Date,arguments))}function g(){var b=new Date;return d(b.getFullYear(),b.getMonth(),b.getDate())}function e(b,a){return b.getUTCFullYear()===a.getUTCFullYear()&&b.getUTCMonth()===a.getUTCMonth()&&b.getUTCDate()===a.getUTCDate()}function h(b,f){return function(){f!==c&&a.fn.datepicker.deprecated(f);return this[b].apply(this,
arguments)}}function k(b,f){function c(b,a){return a.toLowerCase()}var d=a(b).data(),e={},g,h=new RegExp("^"+f.toLowerCase()+"([A-Z])");f=new RegExp("^"+f.toLowerCase());for(var q in d)f.test(q)&&(g=q.replace(h,c),e[g]=d[q]);return e}function v(b){var f={};if(!r[b]&&(b=b.split("-")[0],!r[b]))return;var c=r[b];a.each(E,function(b,a){a in c&&(f[a]=c[a])});return f}var A=function(){var b={get:function(b){return this.slice(b)[0]},contains:function(b){b=b&&b.valueOf();for(var a=0,c=this.length;a<c;a++)if(0<=
this[a].valueOf()-b&&864E5>this[a].valueOf()-b)return a;return-1},remove:function(b){this.splice(b,1)},replace:function(b){b&&(a.isArray(b)||(b=[b]),this.clear(),this.push.apply(this,b))},clear:function(){this.length=0},copy:function(){var b=new A;b.replace(this);return b}};return function(){var f=[];f.push.apply(f,arguments);a.extend(f,b);return f}}(),z=function(b,f){a.data(b,"datepicker",this);this._process_options(f);this.dates=new A;this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=
a(b);this.inputField=(this.isInput=this.element.is("input"))?this.element:this.element.find("input");(this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1)&&0===this.component.length&&(this.component=!1);this.isInline=!this.component&&this.element.is("div");this.picker=a(p.template);this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow);this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow);
this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(b,a){return Number(a)+1});this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,
daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled});this._allow_update=!1;this.setViewMode(this.o.startView);this._allow_update=!0;this.fillDow();this.fillMonths();this.update();this.isInline&&this.show()};z.prototype={constructor:z,_resolveViewName:function(b){a.each(p.viewModes,function(f,c){if(b===f||-1!==a.inArray(b,c.names))return b=f,!1});return b},_resolveDaysOfWeek:function(b){a.isArray(b)||(b=b.split(/[,\s]*/));return a.map(b,Number)},_check_template:function(b){try{return b===
c||""===b?!1:0>=(b.match(/[<>]/g)||[]).length?!0:0<a(b).length}catch(f){return!1}},_process_options:function(b){this._o=a.extend({},this._o,b);var f=this.o=a.extend({},this._o);b=f.language;r[b]||(b=b.split("-")[0],r[b]||(b=B.language));f.language=b;f.startView=this._resolveViewName(f.startView);f.minViewMode=this._resolveViewName(f.minViewMode);f.maxViewMode=this._resolveViewName(f.maxViewMode);f.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,f.startView));!0!==f.multidate&&(f.multidate=
Number(f.multidate)||!1,!1!==f.multidate&&(f.multidate=Math.max(0,f.multidate)));f.multidateSeparator=String(f.multidateSeparator);f.weekStart%=7;f.weekEnd=(f.weekStart+6)%7;var c=p.parseFormat(f.format);-Infinity!==f.startDate&&(f.startDate=f.startDate?f.startDate instanceof Date?this._local_to_utc(this._zero_time(f.startDate)):p.parseDate(f.startDate,c,f.language,f.assumeNearbyYear):-Infinity);Infinity!==f.endDate&&(f.endDate=f.endDate?f.endDate instanceof Date?this._local_to_utc(this._zero_time(f.endDate)):
p.parseDate(f.endDate,c,f.language,f.assumeNearbyYear):Infinity);f.daysOfWeekDisabled=this._resolveDaysOfWeek(f.daysOfWeekDisabled||[]);f.daysOfWeekHighlighted=this._resolveDaysOfWeek(f.daysOfWeekHighlighted||[]);f.datesDisabled=f.datesDisabled||[];a.isArray(f.datesDisabled)||(f.datesDisabled=f.datesDisabled.split(","));f.datesDisabled=a.map(f.datesDisabled,function(b){return p.parseDate(b,c,f.language,f.assumeNearbyYear)});b=String(f.orientation).toLowerCase().split(/\s+/g);var e=f.orientation.toLowerCase();
b=a.grep(b,function(b){return/^auto|left|right|top|bottom$/.test(b)});f.orientation={x:"auto",y:"auto"};if(e&&"auto"!==e)if(1===b.length)switch(b[0]){case "top":case "bottom":f.orientation.y=b[0];break;case "left":case "right":f.orientation.x=b[0]}else e=a.grep(b,function(b){return/^left|right$/.test(b)}),f.orientation.x=e[0]||"auto",e=a.grep(b,function(b){return/^top|bottom$/.test(b)}),f.orientation.y=e[0]||"auto";f.defaultViewDate instanceof Date||"string"===typeof f.defaultViewDate?f.defaultViewDate=
p.parseDate(f.defaultViewDate,c,f.language,f.assumeNearbyYear):f.defaultViewDate?(b=f.defaultViewDate.year||(new Date).getFullYear(),f.defaultViewDate=d(b,f.defaultViewDate.month||0,f.defaultViewDate.day||1)):f.defaultViewDate=g()},_events:[],_secondaryEvents:[],_applyEvents:function(b){for(var a=0,d,e,g;a<b.length;a++)d=b[a][0],2===b[a].length?(e=c,g=b[a][1]):3===b[a].length&&(e=b[a][1],g=b[a][2]),d.on(g,e)},_unapplyEvents:function(b){for(var a=0,d,e,g;a<b.length;a++)d=b[a][0],2===b[a].length?(g=
c,e=b[a][1]):3===b[a].length&&(g=b[a][1],e=b[a][2]),d.off(e,g)},_buildEvents:function(){var b={keyup:a.proxy(function(b){-1===a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this),paste:a.proxy(this.paste,this)};!0===this.o.showOnFocus&&(b.focus=a.proxy(this.show,this));this._events=this.isInput?[[this.element,b]]:this.component&&this.inputField.length?[[this.inputField,b],[this.component,{click:a.proxy(this.show,this)}]]:[[this.element,{click:a.proxy(this.show,
this),keydown:a.proxy(this.keydown,this)}]];this._events.push([this.element,"*",{blur:a.proxy(function(b){this._focused_from=b.target},this)}],[this.element,{blur:a.proxy(function(b){this._focused_from=b.target},this)}]);this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":a.proxy(function(b){this.update(b.date)},this)}]);this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[this.picker,".prev, .next",{click:a.proxy(this.navArrowsClick,this)}],[this.picker,
".day:not(.disabled)",{click:a.proxy(this.dayCellClick,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{"mousedown touchstart":a.proxy(function(b){this.element.is(b.target)||this.element.find(b.target).length||this.picker.is(b.target)||this.picker.find(b.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();
this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,f){var c=f||this.dates.get(-1),c=this._utc_to_local(c);this.element.trigger({applyid:this.applyid,type:b,date:c,viewMode:this.viewMode,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(b,a){0===arguments.length?(b=this.dates.length-1,a=this.o.format):"string"===typeof b&&(a=b,b=this.dates.length-1);a=a||this.o.format;var f=this.dates.get(b);return p.formatDate(f,
a,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&a(this.element).blur(),this},hide:function(){if(this.isInline||!this.picker.is(":visible"))return this;this.focusDate=
null;this.picker.hide().detach();this._detachSecondaryEvents();this.setViewMode(this.o.startView);this.o.forceParse&&this.inputField.val()&&this.setValue();this._trigger("hide");return this},destroy:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date;return this},paste:function(b){var f;if(b.originalEvent.clipboardData&&b.originalEvent.clipboardData.types&&-1!==a.inArray("text/plain",
b.originalEvent.clipboardData.types))f=b.originalEvent.clipboardData.getData("text/plain");else if(window.clipboardData)f=window.clipboardData.getData("Text");else return;this.setDate(f);this.update();b.preventDefault()},_utc_to_local:function(b){if(!b)return b;var a=new Date(b.getTime()+6E4*b.getTimezoneOffset());a.getTimezoneOffset()!==b.getTimezoneOffset()&&(a=new Date(b.getTime()+6E4*a.getTimezoneOffset()));return a},_local_to_utc:function(b){return b&&new Date(b.getTime()-6E4*b.getTimezoneOffset())},
_zero_time:function(b){return b&&new Date(b.getFullYear(),b.getMonth(),b.getDate())},_zero_utc_time:function(b){return b&&d(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate())},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(b){return new Date(b)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var b=this.dates.get(-1);return b!==c?new Date(b):null},clearDates:function(){this.inputField.val("");
this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()},setDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,b);this._trigger("changeDate");this.setValue();return this},setUTCDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.setDates.apply(this,a.map(b,this._utc_to_local));return this},setDate:h("setDates"),setUTCDate:h("setUTCDates"),remove:h("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),
setValue:function(){var b=this.getFormattedDate();this.inputField.val(b);return this},getFormattedDate:function(b){b===c&&(b=this.o.format);var f=this.o.language;return a.map(this.dates,function(a){return p.formatDate(a,b,f)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(b){this._process_options({startDate:b});this.update();this.updateNavArrows();return this},getEndDate:function(){return this.o.endDate},setEndDate:function(b){this._process_options({endDate:b});
this.update();this.updateNavArrows();return this},setDaysOfWeekDisabled:function(b){this._process_options({daysOfWeekDisabled:b});this.update();return this},setDaysOfWeekHighlighted:function(b){this._process_options({daysOfWeekHighlighted:b});this.update();return this},setDatesDisabled:function(b){this._process_options({datesDisabled:b});this.update();return this},place:function(){if(this.isInline)return this;var b=this.picker.outerWidth(),f=this.picker.outerHeight(),c=a(this.o.container),d=c.width(),
e="body"===this.o.container?a(document).scrollTop():c.scrollTop(),g=c.offset(),h=[0];this.element.parents().each(function(){var b=a(this).css("z-index");"auto"!==b&&0!==Number(b)&&h.push(Number(b))});var c=Math.max.apply(Math,h)+this.o.zIndexOffset,q=this.component?this.component.parent().offset():this.element.offset(),n=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),m=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),k=q.left-g.left,g=q.top-g.top;
"body"!==this.o.container&&(g+=e);this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(k-=b-m)):0>q.left?(this.picker.addClass("datepicker-orient-left"),k-=q.left-10):k+b>d?(this.picker.addClass("datepicker-orient-right"),k+=m-b):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");
b=this.o.orientation.y;"auto"===b&&(b=0>-e+g-f?"bottom":"top");this.picker.addClass("datepicker-orient-"+b);g="top"===b?g-(f+parseInt(this.picker.css("padding-top"))):g+n;this.o.rtl?this.picker.css({top:g,right:d-(k+m),zIndex:c}):this.picker.css({top:g,left:k,zIndex:c});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var b=this.dates.copy(),f=[],c=!1;arguments.length?(a.each(arguments,a.proxy(function(b,a){a instanceof Date&&(a=this._local_to_utc(a));f.push(a)},
this)),c=!0):(f=(f=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?f.split(this.o.multidateSeparator):[f],delete this.element.data().date);f=a.map(f,a.proxy(function(b){return p.parseDate(b,this.o.format,this.o.language,this.o.assumeNearbyYear)},this));f=a.grep(f,a.proxy(function(b){return!this.dateWithinRange(b)||!b},this),!0);this.dates.replace(f);this.o.updateViewDate&&(this.viewDate=this.dates.length?new Date(this.dates.get(-1)):this.viewDate<
this.o.startDate?new Date(this.o.startDate):this.viewDate>this.o.endDate?new Date(this.o.endDate):this.o.defaultViewDate);c?(this.setValue(),this.element.change()):this.dates.length&&String(b)!==String(this.dates)&&c&&(this._trigger("changeDate"),this.element.change());!this.dates.length&&b.length&&(this._trigger("clearDate"),this.element.change());this.fill();return this},fillDow:function(){if(this.o.showWeekDays){var b=this.o.weekStart,f="<tr>";for(this.o.calendarWeeks&&(f+='<th class="cw">&#160;</th>');b<
this.o.weekStart+7;)f+='<th class="dow',-1!==a.inArray(b,this.o.daysOfWeekDisabled)&&(f+=" disabled"),f+='">'+r[this.o.language].daysMin[b++%7]+"</th>";f+="</tr>";this.picker.find(".datepicker-days thead").append(f)}},fillMonths:function(){for(var b=this._utc_to_local(this.viewDate),a="",c,d=0;12>d;d++)c=b&&b.getMonth()===d?" focused":"",a+='<span class="month'+c+'">'+r[this.o.language].monthsShort[d]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(b){b&&b.length?this.range=
a.map(b,function(b){return b.valueOf()}):delete this.range;this.fill()},getClassNames:function(b){var f=[],c=this.viewDate.getUTCFullYear(),d=this.viewDate.getUTCMonth(),h=g();b.getUTCFullYear()<c||b.getUTCFullYear()===c&&b.getUTCMonth()<d?f.push("old"):(b.getUTCFullYear()>c||b.getUTCFullYear()===c&&b.getUTCMonth()>d)&&f.push("new");this.focusDate&&b.valueOf()===this.focusDate.valueOf()&&f.push("focused");this.o.todayHighlight&&e(b,h)&&f.push("today");-1!==this.dates.contains(b)&&f.push("active");
this.dateWithinRange(b)||f.push("disabled");this.dateIsDisabled(b)&&f.push("disabled","disabled-date");-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekHighlighted)&&f.push("highlighted");this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&f.push("range"),-1!==a.inArray(b.valueOf(),this.range)&&f.push("selected"),b.valueOf()===this.range[0]&&f.push("range-start"),b.valueOf()===this.range[this.range.length-1]&&f.push("range-end"));return f},_fill_yearsView:function(b,f,d,e,g,h,k){var q="",
n=d/10;b=this.picker.find(b);d*=Math.floor(e/d);e=d+9*n;for(var m=Math.floor(this.viewDate.getFullYear()/n)*n,p=a.map(this.dates,function(b){return Math.floor(b.getUTCFullYear()/n)*n}),l,r,t,u=d-n;u<=e+n;u+=n)l=[f],r=null,u===d-n?l.push("old"):u===e+n&&l.push("new"),-1!==a.inArray(u,p)&&l.push("active"),(u<g||u>h)&&l.push("disabled"),u===m&&l.push("focused"),k!==a.noop&&(t=k(new Date(u,0,1)),t===c?t={}:"boolean"===typeof t?t={enabled:t}:"string"===typeof t&&(t={classes:t}),!1===t.enabled&&l.push("disabled"),
t.classes&&(l=l.concat(t.classes.split(/\s+/))),t.tooltip&&(r=t.tooltip)),q+='<span class="'+l.join(" ")+'"'+(r?' title="'+r+'"':"")+">"+u+"</span>";b.find(".datepicker-switch").text(d+"-"+e);b.find("td").html(q)},fill:function(){var b=new Date(this.viewDate),f=b.getUTCFullYear(),e=b.getUTCMonth(),g=-Infinity!==this.o.startDate?this.o.startDate.getUTCFullYear():-Infinity,h=-Infinity!==this.o.startDate?this.o.startDate.getUTCMonth():-Infinity,k=Infinity!==this.o.endDate?this.o.endDate.getUTCFullYear():
Infinity,y=Infinity!==this.o.endDate?this.o.endDate.getUTCMonth():Infinity,q=r[this.o.language].today||r.en.today||"",n=r[this.o.language].clear||r.en.clear||"",m=r[this.o.language].titleFormat||r.en.titleFormat,w,l;if(!isNaN(f)&&!isNaN(e)){this.picker.find(".datepicker-days .datepicker-switch").text(p.formatDate(b,m,this.o.language));this.picker.find("tfoot .today").text(q).css("display",!0===this.o.todayBtn||"linked"===this.o.todayBtn?"table-cell":"none");this.picker.find("tfoot .clear").text(n).css("display",
!0===this.o.clearBtn?"table-cell":"none");this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"===typeof this.o.title&&""!==this.o.title?"table-cell":"none");this.updateNavArrows();this.fillMonths();b=d(f,e,0);e=b.getUTCDate();b.setUTCDate(e-(b.getUTCDay()-this.o.weekStart+7)%7);e=new Date(b);100>b.getUTCFullYear()&&e.setUTCFullYear(b.getUTCFullYear());e.setUTCDate(e.getUTCDate()+42);e=e.valueOf();for(q=[];b.valueOf()<e;){n=b.getUTCDay();if(n===this.o.weekStart&&(q.push("<tr>"),
this.o.calendarWeeks)){var m=new Date(+b+(this.o.weekStart-n-7)%7*864E5),m=new Date(Number(m)+(11-m.getUTCDay())%7*864E5),x=new Date(Number(x=d(m.getUTCFullYear(),0,1))+(11-x.getUTCDay())%7*864E5);q.push('<td class="cw">'+((m-x)/864E5/7+1)+"</td>")}m=this.getClassNames(b);m.push("day");var t=b.getUTCDate();this.o.beforeShowDay!==a.noop&&(l=this.o.beforeShowDay(this._utc_to_local(b),this.o.applyid),l===c?l={}:"boolean"===typeof l?l={enabled:l}:"string"===typeof l&&(l={classes:l}),!1===l.enabled&&m.push("disabled"),
l.classes&&(m=m.concat(l.classes.split(/\s+/))),l.tooltip&&(w=l.tooltip),l.content&&(t=l.content));m=a.isFunction(a.uniqueSort)?a.uniqueSort(m):a.unique(m);l=m.indexOf("noactive");0<=l&&(m.splice(l,1),l=m.indexOf("active"),0<=l&&m.splice(l,1));q.push('<td class="'+m.join(" ")+'"'+(w?' title="'+w+'"':"")+' data-date="'+b.getTime().toString()+'">'+t+"</td>");w=null;n===this.o.weekEnd&&q.push("</tr>");b.setUTCDate(b.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(q.join(""));w=r[this.o.language].monthsTitle||
r.en.monthsTitle||"Months";var u=this.picker.find(".datepicker-months").find(".datepicker-switch").text(2>this.o.maxViewMode?w:f).end().find("tbody span").removeClass("active");a.each(this.dates,function(b,a){a.getUTCFullYear()===f&&u.eq(a.getUTCMonth()).addClass("active")});(f<g||f>k)&&u.addClass("disabled");f===g&&u.slice(0,h).addClass("disabled");f===k&&u.slice(y+1).addClass("disabled");if(this.o.beforeShowMonth!==a.noop){var F=this;a.each(u,function(b,d){var e=F.o.beforeShowMonth(new Date(f,b,
1));e===c?e={}:"boolean"===typeof e?e={enabled:e}:"string"===typeof e&&(e={classes:e});!1!==e.enabled||a(d).hasClass("disabled")||a(d).addClass("disabled");e.classes&&a(d).addClass(e.classes);e.tooltip&&a(d).prop("title",e.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,f,g,k,this.o.beforeShowYear);this._fill_yearsView(".datepicker-decades","decade",100,f,g,k,this.o.beforeShowDecade);this._fill_yearsView(".datepicker-centuries","century",1E3,f,g,k,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var b=
new Date(this.viewDate),a=b.getUTCFullYear(),b=b.getUTCMonth(),c=-Infinity!==this.o.startDate?this.o.startDate.getUTCFullYear():-Infinity,d=-Infinity!==this.o.startDate?this.o.startDate.getUTCMonth():-Infinity,e=Infinity!==this.o.endDate?this.o.endDate.getUTCFullYear():Infinity,g=Infinity!==this.o.endDate?this.o.endDate.getUTCMonth():Infinity,h,k,n=1;switch(this.viewMode){case 0:h=a<=c&&b<=d;k=a>=e&&b>=g;break;case 4:n*=10;case 3:n*=10;case 2:n*=10;case 1:h=Math.floor(a/n)*n<=c,k=Math.floor(a/n)*
n+n>=e}this.picker.find(".prev").toggleClass("disabled",h);this.picker.find(".next").toggleClass("disabled",k)}},click:function(b){b.preventDefault();b.stopPropagation();var f;f=a(b.target);f.hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1);f.hasClass("today")&&!f.hasClass("day")&&(this.setViewMode(0),this._setDate(g(),"linked"===this.o.todayBtn?null:"view"));f.hasClass("clear")&&this.clearDates();!f.hasClass("disabled")&&(f.hasClass("month")||f.hasClass("year")||
f.hasClass("decade")||f.hasClass("century"))&&(this.viewDate.setUTCDate(1),1===this.viewMode?(b=f.parent().find("span").index(f),f=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(b)):(b=0,f=Number(f.text()),this.viewDate.setUTCFullYear(f)),this._trigger(p.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(d(f,b,1)):(this.setViewMode(this.viewMode-1),this.fill()));this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus();delete this._focused_from},
dayCellClick:function(b){b=a(b.currentTarget).data("date");b=new Date(b);this.o.updateViewDate&&(b.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),b.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate));this._setDate(b)},navArrowsClick:function(b){b=a(b.currentTarget).hasClass("prev")?-1:1;0!==this.viewMode&&(b*=12*p.viewModes[this.viewMode].navStep);this.viewDate=this.moveMonth(this.viewDate,b);this._trigger(p.viewModes[this.viewMode].e,
this.viewDate);this.fill()},_toggle_multidate:function(b){var a=this.dates.contains(b);b||this.dates.clear();-1!==a?(!0===this.o.multidate||1<this.o.multidate||this.o.toggleActive)&&this.dates.remove(a):(!1===this.o.multidate&&this.dates.clear(),this.dates.push(b));if("number"===typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(b,a){a&&"date"!==a||this._toggle_multidate(b&&new Date(b));if(!a&&this.o.updateViewDate||"view"===a)this.viewDate=b&&
new Date(b);this.fill();this.setValue();a&&"view"===a||(this.applyid=this.o.applyid,this._trigger("changeDate"));this.inputField.trigger("change");!this.o.autoclose||a&&"date"!==a||this.hide()},moveDay:function(b,a){var c=new Date(b);c.setUTCDate(b.getUTCDate()+a);return c},moveWeek:function(b,a){return this.moveDay(b,7*a)},moveMonth:function(a,f){if(!a||isNaN(a.getTime()))return this.o.defaultViewDate;if(!f)return a;var c=new Date(a.valueOf()),d=c.getUTCDate(),e=c.getUTCMonth(),g=Math.abs(f),h;f=
0<f?1:-1;if(1===g)g=-1===f?function(){return c.getUTCMonth()===e}:function(){return c.getUTCMonth()!==h},h=e+f,c.setUTCMonth(h),h=(h+12)%12;else{for(var k=0;k<g;k++)c=this.moveMonth(c,f);h=c.getUTCMonth();c.setUTCDate(d);g=function(){return h!==c.getUTCMonth()}}for(;g();)c.setUTCDate(--d),c.setUTCMonth(h);return c},moveYear:function(a,f){return this.moveMonth(a,12*f)},moveAvailableDate:function(a,f,c){do{a=this[c](a,f);if(!this.dateWithinRange(a))return!1;c="moveDay"}while(this.dateIsDisabled(a));
return a},weekOfDateIsDisabled:function(b){return-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(b){return this.weekOfDateIsDisabled(b)||0<a.grep(this.o.datesDisabled,function(a){return e(b,a)}).length},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":visible")){var c=!1,d,e,g=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||
this.viewDate,this.fill()):this.hide();a.preventDefault();a.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;d=37===a.keyCode||38===a.keyCode?-1:1;if(0===this.viewMode)a.ctrlKey?(e=this.moveAvailableDate(g,d,"moveYear"))&&this._trigger("changeYear",this.viewDate):a.shiftKey?(e=this.moveAvailableDate(g,d,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===a.keyCode||39===a.keyCode?e=this.moveAvailableDate(g,
d,"moveDay"):this.weekOfDateIsDisabled(g)||(e=this.moveAvailableDate(g,d,"moveWeek"));else if(1===this.viewMode){if(38===a.keyCode||40===a.keyCode)d*=4;e=this.moveAvailableDate(g,d,"moveMonth")}else if(2===this.viewMode){if(38===a.keyCode||40===a.keyCode)d*=4;e=this.moveAvailableDate(g,d,"moveYear")}e&&(this.focusDate=this.viewDate=e,this.setValue(),this.fill(),a.preventDefault());break;case 13:if(!this.o.forceParse)break;g=this.focusDate||this.dates.get(-1)||this.viewDate;this.o.keyboardNavigation&&
(this._toggle_multidate(g),c=!0);this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(a.preventDefault(),a.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}c&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))}else if(40===a.keyCode||27===a.keyCode)this.show(),a.stopPropagation()},
setViewMode:function(a){this.viewMode=a;this.picker.children("div").hide().filter(".datepicker-"+p.viewModes[this.viewMode].clsName).show();this.updateNavArrows();this._trigger("changeViewMode",new Date(this.viewDate))}};var D=function(b,c){a.data(b,"datepicker",this);this.element=a(b);this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a});delete c.inputs;this.keepEmptyValues=c.keepEmptyValues;delete c.keepEmptyValues;C.call(a(this.inputs),c).on("changeDate",a.proxy(this.dateUpdated,this));
this.pickers=a.map(this.inputs,function(b){return a.data(b,"datepicker")});this.updateDates()};D.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.getUTCDate()});this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){if(!this.updating){this.updating=!0;var f=a.data(b.target,"datepicker");if(f!==c){var d=f.getUTCDate(),e=this.keepEmptyValues;b=
a.inArray(b.target,this.inputs);var g=b-1,h=b+1,k=this.inputs.length;if(-1!==b){a.each(this.pickers,function(a,b){b.getUTCDate()||b!==f&&e||b.setUTCDate(d)});if(d<this.dates[g])for(;0<=g&&d<this.dates[g];)this.pickers[g--].setUTCDate(d);else if(d>this.dates[h])for(;h<k&&d>this.dates[h];)this.pickers[h++].setUTCDate(d);this.updateDates();delete this.updating}}}},destroy:function(){a.map(this.pickers,function(a){a.destroy()});a(this.inputs).off("changeDate",this.dateUpdated);delete this.element.data().datepicker},
remove:h("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var G=a.fn.datepicker,C=function(b){var f=Array.apply(null,arguments);f.shift();var d;this.each(function(){var c=a(this),e=c.data("datepicker"),g="object"===typeof b&&b;if(!e){var e=k(this,"date"),h=a.extend({},B,e,g),h=v(h.language),g=a.extend({},B,h,e,g);c.hasClass("input-daterange")||g.inputs?(a.extend(g,{inputs:g.inputs||c.find("input").toArray()}),e=new D(this,g)):e=new z(this,g);c.data("datepicker",
e)}"string"===typeof b&&"function"===typeof e[b]&&(d=e[b].apply(e,f))});if(d===c||d instanceof z||d instanceof D)return this;if(1<this.length)throw Error("Using only allowed for the collection of a single element ("+b+" function)");return d};a.fn.datepicker=C;var B=a.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:a.noop,beforeShowMonth:a.noop,beforeShowYear:a.noop,beforeShowDecade:a.noop,beforeShowCentury:a.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],
daysOfWeekHighlighted:[],datesDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},
showWeekDays:!0,applyid:"__id__"},E=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=z;var r=a.fn.datepicker.dates={en:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),daysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),daysMin:"Su Mo Tu We Th Fr Sa".split(" "),months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},p={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1E3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,
parseFormat:function(a){if("function"===typeof a.toValue&&"function"===typeof a.toDisplay)return a;var c=a.replace(this.validParts,"\x00").split("\x00");a=a.match(this.validParts);if(!c||!c.length||!a||0===a.length)throw Error("Invalid date format.");return{separators:c,parts:a}},parseDate:function(b,d,e,h){function k(a,b){!0===b&&(b=10);100>a&&(a+=2E3,a>(new Date).getFullYear()+b&&(a-=100));return a}function v(){var a=this.slice(0,n[m].length),b=n[m].slice(0,a.length);return a.toLowerCase()===b.toLowerCase()}
if(!b)return c;if(b instanceof Date)return b;"string"===typeof d&&(d=p.parseFormat(d));if(d.toValue)return d.toValue(b,d,e);var y={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},q={yesterday:"-1d",today:"+0d",tomorrow:"+1d"},n,m;b in q&&(b=q[b]);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(b)){n=b.match(/([\-+]\d+)([dmwy])/gi);b=new Date;for(m=0;m<n.length;m++)d=n[m].match(/([\-+]\d+)([dmwy])/i),e=Number(d[1]),q=y[d[2].toLowerCase()],b=z.prototype[q](b,e);return z.prototype._zero_utc_time(b)}n=
b&&b.match(this.nonpunctuation)||[];var y={},w="yyyy yy M MM m mm d dd".split(" "),q={yyyy:function(a,b){return a.setUTCFullYear(h?k(b,h):b)},m:function(a,b){if(isNaN(a))return a;for(--b;0>b;)b+=12;b%=12;for(a.setUTCMonth(b);a.getUTCMonth()!==b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}},l;q.yy=q.yyyy;q.M=q.MM=q.mm=q.m;q.dd=q.d;b=g();var x=d.parts.slice();n.length!==x.length&&(x=a(x).filter(function(b,c){return-1!==a.inArray(c,w)}).toArray());if(n.length===x.length){var t;
m=0;for(t=x.length;m<t;m++){l=parseInt(n[m],10);d=x[m];if(isNaN(l))switch(d){case "MM":l=a(r[e].months).filter(v);l=a.inArray(l[0],r[e].months)+1;break;case "M":l=a(r[e].monthsShort).filter(v),l=a.inArray(l[0],r[e].monthsShort)+1}y[d]=l}for(m=0;m<w.length;m++)d=w[m],d in y&&!isNaN(y[d])&&(e=new Date(b),q[d](e,y[d]),isNaN(e)||(b=e))}return b},formatDate:function(b,c,d){if(!b)return"";"string"===typeof c&&(c=p.parseFormat(c));if(c.toDisplay)return c.toDisplay(b,c,d);d={d:b.getUTCDate(),D:r[d].daysShort[b.getUTCDay()],
DD:r[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:r[d].monthsShort[b.getUTCMonth()],MM:r[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};d.dd=(10>d.d?"0":"")+d.d;d.mm=(10>d.m?"0":"")+d.m;b=[];for(var e=a.extend([],c.separators),g=0,h=c.parts.length;g<=h;g++)e.length&&b.push(e.shift()),b.push(d[c.parts[g]]);return b.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+B.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+
B.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};p.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+p.headTemplate+"<tbody></tbody>"+p.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+
p.headTemplate+p.contTemplate+p.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+"</table></div></div>";a.fn.datepicker.DPGlobal=p;a.fn.datepicker.noConflict=function(){a.fn.datepicker=G;return this};a.fn.datepicker.version="1.7.1";a.fn.datepicker.deprecated=function(a){var c=window.console;
c&&c.warn&&c.warn("DEPRECATED: "+a)};a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),C.call(c,"show"))});a(function(){C.call(a('[data-provide="datepicker-inline"]'))})});var PreLoadIndex=-1,CurrentLoadIndex=0,LOAD_STATE_END=9999,gl_user_nameinfo=[],gl_userids=[],gl_assist={},gl_assistevent={},gl_assisteventrecords=[],glResponseImage_List={};check_loading_status();
function check_loading_status(){switch(CurrentLoadIndex){case 0:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,gl_user_nameinfo=[],gl_userids=[],load_assist(gl_assistid));break;case 1:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_assistevent(gl_assisteventid));
break;case 2:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_user_nameinfo());break;case 3:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,show_assistevent(),CurrentLoadIndex+=1);break;case 4:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+
PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_assisteventrecords(gl_assisteventid,gl_assistid));break;case 5:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=CurrentLoadIndex,load_user_nameinfo());break;case 6:PreLoadIndex!=CurrentLoadIndex&&(console.log("check_loading_status() PreLoadIndex:"+PreLoadIndex+" != CurrentLoadIndex:"+CurrentLoadIndex),PreLoadIndex=
CurrentLoadIndex,show_assisteventrecords(),CurrentLoadIndex=LOAD_STATE_END)}CurrentLoadIndex!=LOAD_STATE_END?setTimeout(check_loading_status,100):console.log("check_loading_status() Stop.")}
function load_assist(a){var c=gl_target_server+"/php/assist.php";gl_assist={};$.getJSON(c,"loadassist=1&project_id="+project_id+"&assistid="+a,function(a){a.id=parseInt(a.id);gl_assist=a;add_user(gl_assist.userid)}).success(function(){CurrentLoadIndex+=1}).error(function(){CurrentLoadIndex+=1}).complete(function(){})}
function load_assistevent(a){var c=gl_target_server+"/php/assist.php";gl_assistevent={};$.getJSON(c,"loadassistevent=1&project_id="+project_id+"&assisteventid="+a,function(a){a.id=parseInt(a.id);a.assistid=parseInt(a.assistid);gl_assistevent=a;add_user(gl_assistevent.userid)}).success(function(){CurrentLoadIndex+=1}).error(function(){CurrentLoadIndex+=1}).complete(function(){})}
function load_user_nameinfo(){0==gl_userids.length?CurrentLoadIndex+=1:$.getJSON(gl_target_server+"/php/vilsnodes.php","loadusername=1&project_id="+project_id+"&user="+gl_userids.toString(),function(a){$.each(a,function(a,d){d.userid=parseInt(d.userid);gl_user_nameinfo.push(d)})}).success(function(){CurrentLoadIndex+=1}).error(function(){}).complete(function(){})}function add_user(a){for(var c=!1,d=0;d<gl_userids.length;++d)if(gl_userids[d]==a){c=!0;break}0==c&&0<a&&gl_userids.push(a)}
function show_assistevent(){for(var a=document.getElementById("ASSIST_EVENT_TABLE_BODY");a.firstChild;)a.removeChild(a.firstChild);show_assistevent_data(a,gl_assistevent);$("#div_calendar_"+gl_assistevent.id).datepicker({applyid:gl_assistevent.id,language:"zh-TW",weekStart:1,beforeShowDay:function(a,d){return checkValidDate(a,gl_assistevent,!1,!1)}})}
function show_assistevent_data(a,c){var d=0,g=document.createElement("tr");g.setAttribute("id",c.id+"_TABLE_ROW");a.appendChild(g);var e=document.createElement("tr");e.setAttribute("id",c.id+"_TABLE_ROW_EXTRA");a.appendChild(e);g.appendChild(document.createElement("td"));e=document.createElement("div");e.appendChild(document.createTextNode(c.datetime));g.cells[d].appendChild(e);d++;g.appendChild(document.createElement("td"));e=document.createElement("div");e.appendChild(document.createTextNode(gl_assist.title));
g.cells[d].appendChild(e);d++;g.appendChild(document.createElement("td"));e=document.createElement("div");e.setAttribute("id","description_"+c.id);e.appendChild(document.createTextNode(gl_assist.description));g.cells[d].appendChild(e);d++;g.appendChild(document.createElement("td"));e=document.createElement("div");e.setAttribute("id","apply_description_"+c.id);e.appendChild(document.createTextNode(c.description));g.cells[d].appendChild(e);d++;g.appendChild(document.createElement("td"));g.cells[d].appendChild(document.createTextNode(getUserName(c.userid)));
d++;g.appendChild(document.createElement("td"));for(var e=c.eventtime.split(","),h=0;h<e.length;h++)g.cells[d].appendChild(create_time_item(e[h]));d++;e=document.createElement("td");g.appendChild(e);h=document.createElement("div");h.setAttribute("id","div_weekday_"+c.id);e.appendChild(h);var k=create_weekday_ui(c.id,c.weekday,!1);h.appendChild(k);h=document.createElement("div");h.setAttribute("id","div_calendar_"+c.id);e.appendChild(h);h=document.createElement("div");e.appendChild(h);e=document.createElement("span");
e.setAttribute("style","display:inline;padding:.2em .3em .3em;font-size:95%;line-height:2;position:relative;top:-1px;color:#fff;border-radius:2px;white-space:nowrap;background-image: linear-gradient(to bottom, #cc4400, #994411);");e.textContent="\u65e5\u671f";h.appendChild(e);e=document.createElement("span");e.textContent=":\u4ee3\u8868\u4e0d\u9700\u5354\u52a9\u65e5\u671f";h.appendChild(e);d++;g.appendChild(document.createElement("td"));e=document.createElement("div");e.setAttribute("id","storage_image_"+
c.id);0<c.imageids.length&&fetch_storage_image(c.id,c.imageids);g.cells[d].appendChild(e);d++;g.appendChild(document.createElement("td"));e=document.createElement("div");e.setAttribute("id","storage_file_"+c.id);0<c.fileids.length&&fetch_storage_file(c.id,c.fileids);g.cells[d].appendChild(e);d++;g.appendChild(document.createElement("td"));g.cells[d].appendChild(create_applyuser_label(c.applyusername));d++;g.appendChild(document.createElement("td"));g.cells[d].appendChild(create_relation_label(c.applyuserrelation));
d++;g.appendChild(document.createElement("td"));e=document.createElement("span");e.setAttribute("id","signoffstatus_"+c.id);0==c.signoffstatus?(e.textContent="\u7c3d\u6838\u4e2d",e.setAttribute("class","badge bg-blue")):1==c.signoffstatus?(e.textContent="\u5df2\u7c3d\u6838",e.setAttribute("class","badge bg-green")):99==c.signoffstatus&&(e.textContent="\u672a\u6838\u51c6",e.setAttribute("class","badge bg-red"));g.cells[d].appendChild(e);return 1}
function create_time_item(a){var c=document.createElement("div"),d=document.createElement("span");d.setAttribute("class","badge bg-yellow-active");d.textContent=a;c.appendChild(d);return c}function create_applyuser_label(a){var c=document.createElement("span");c.setAttribute("style","display:inline;padding:.2em .3em .3em;font-size:95%;font-weight:700;line-height:2;position:relative;top:-1px;color:#fff;border-radius:2px;white-space:nowrap;background-color:#f39c12;");c.textContent=a;return c}
function create_relation_label(a){var c=document.createElement("span");c.setAttribute("style","display:inline;padding:.2em .3em .3em;font-size:95%;font-weight:700;line-height:2;position:relative;top:-1px;color:#fff;border-radius:2px;white-space:nowrap;background-color:#00a65a;");c.textContent=a;return c}
function load_assisteventrecords(a,c){var d=gl_target_server+"/php/assist.php";gl_assisteventrecords=[];$.getJSON(d,"loadassisteventrecords=1&project_id="+project_id+"&assistid="+c+"&assisteventid="+a+"&count=5",function(a){$.each(a,function(a,c){add_user(c.userid);gl_assisteventrecords.push(c)})}).success(function(){CurrentLoadIndex+=1}).error(function(){}).complete(function(){})}
function show_assisteventrecords(){for(var a=document.getElementById("ASSIST_EVENTRECORD_TABLE_BODY"),c=0;c<gl_assisteventrecords.length;c++)record=gl_assisteventrecords[c],show_assistevent_record_item(a,c,record),load_assistevent_record_data(record)}
function show_assistevent_record_item(a,c,d){var g=document.createElement("tr");a.appendChild(g);1==c%2&&g.setAttribute("bgcolor","#f8f6ef");a=document.createElement("td");a.textContent=c+1;g.appendChild(a);c=document.createElement("td");c.textContent=d.eventday+" "+d.eventtime;g.appendChild(c);c=document.createElement("td");c.textContent=d.datetime;g.appendChild(c);c=document.createElement("td");c.setAttribute("id","record_account_"+d.id);g.appendChild(c);c=document.createElement("td");g.appendChild(c);
a=document.createElement("td");a.setAttribute("id","record_comment_"+d.id);g.appendChild(a);a=document.createElement("td");a.setAttribute("id","record_photo_"+d.id);g.appendChild(a);a=document.createElement("td");g.appendChild(a);0==d.results.length?(c.textContent="\u5c1a\u672a\u56de\u5831",a.textContent=""):(c.textContent="1,0"===d.results?"\u5df2\u5b8c\u6210":"\u672a\u5b8c\u6210",a.textContent=d.updatetime)}
function load_assistevent_record_data(a){var c=gl_target_server+"/php/survey.php";surveyevent={};$.getJSON(c,"loadsurveyeventrecord=1&project_id="+project_id+"&PushNotifyMessageRecorddbId="+a.PushNotifyMessageRecorddbId,function(a){surveyevent=a}).success(function(){load_assistevent_surveyresult(a,surveyevent)}).error(function(){}).complete(function(){})}
function load_assistevent_surveyresult(a,c){var d=gl_target_server+"/php/survey.php";surveyresult={};$.getJSON(d,"loadsurveyresult=1&project_id="+project_id+"&hashkey="+c.hashkey+"&messagehashkey="+a.messagehashkey,function(a){surveyresult=a}).success(function(){show_assistevent_record_data(a,c,surveyresult)}).error(function(){}).complete(function(){})}
function show_assistevent_record_data(a,c,d){console.log("show_assistevent_record_data() ");document.getElementById("record_account_"+a.id).textContent=getUserName(a.userid);document.getElementById("record_comment_"+a.id).textContent=d.comment;load_reponse_image(a.id,a.messagehashkey)}
function load_reponse_image(a,c){glResponseImage_List[a]=[];0!=c.length&&$.getJSON(gl_target_server+"/php/storage.php","loadnotifyimage=1&project_id="+project_id+"&messagehashkey="+c,function(c){$.each(c,function(c,d){glResponseImage_List[a].push(d)})}).success(function(){show_reponse_image(a)}).error(function(){}).complete(function(){})}
function show_reponse_image(a){for(var c=document.getElementById("record_photo_"+a),d=glResponseImage_List[a],g=0;g<d.length;g++){var e=d[g];console.log("show_reponse_image() description:"+e.description);var h=document.getElementById("reponse_image_"+a+"_"+e.imageuid);void 0==h&&(h=document.createElement("span"),h.setAttribute("id","reponse_image_"+a+"_"+e.imageuid),c.appendChild(h));update_reponse_image_item(a,e)}}
function update_reponse_image_item(a,c){var d="show_img_"+c.imageuid;if(void 0==document.getElementById(d)){var g=document.getElementById("reponse_image_"+a+"_"+c.imageuid),e=create_data_image(c.id,c.description,c.thumbpath,c.imagetype,c.imagesize);e.setAttribute("id",d);g.appendChild(e)}}
function create_weekday_ui(a,c,d){var g=document.createElement("div");g.setAttribute("class","box");g.setAttribute("style","background-image: linear-gradient(to bottom, #a9dbde, #e4eded);");var e=document.createElement("div");e.setAttribute("class","box-header with-border");g.appendChild(e);var h=document.createElement("div");h.appendChild(document.createTextNode("\u9031\u9593\u9ede\u540d"));h.setAttribute("style","text-align:center;");e.appendChild(h);h=document.createElement("div");h.setAttribute("class",
"box-body no-padding");g.appendChild(h);e=document.createElement("table");e.setAttribute("class","table table-bordered");e.setAttribute("style","background-image: linear-gradient(to bottom, #e4eded, #e4eded);");h.appendChild(e);h=document.createElement("thead");e.appendChild(h);h=document.createElement("tr");e.appendChild(h);var k=document.createElement("th");k.textContent="\u4e00";h.appendChild(k);k=document.createElement("th");k.textContent="\u4e8c";h.appendChild(k);k=document.createElement("th");
k.textContent="\u4e09";h.appendChild(k);k=document.createElement("th");k.textContent="\u56db";h.appendChild(k);k=document.createElement("th");k.textContent="\u4e94";h.appendChild(k);k=document.createElement("th");k.textContent="\u516d";h.appendChild(k);k=document.createElement("th");k.textContent="\u65e5";h.appendChild(k);h=document.createElement("tbody");e.appendChild(h);e=document.createElement("tr");h.appendChild(e);for(h=1;7>=h;h++){var v=""+h;7==h&&(v="0");var A=!1;0<=c.indexOf(v)&&(A=!0);k=
document.createElement("td");v=create_checkbox(a,v,A,d);k.appendChild(v);e.appendChild(k)}return g}function create_checkbox(a,c,d,g){var e=document.createElement("input");e.setAttribute("id","uiid_checkbox_"+c+"_"+a);e.setAttribute("type","checkbox");e.setAttribute("onclick",'weekday_checkbox_click("'+a+'","'+c+'")');d&&e.setAttribute("checked",d);g||e.setAttribute("disabled",!0);return e}
function weekday_checkbox_click(a,c){var d=document.getElementById("uiid_checkbox_"+c+"_"+a).checked,g=get_assistevent(a),e=g.weekday.indexOf(c);d?0>e&&(g.weekday.push(c),check_invaliddate(g,c)):0<=e&&(g.weekday.splice(e,1),check_validdate(g,c));console.log("weekday_checkbox_click() day:"+c+" applyid:"+a+" checkd:"+d+" weekday:"+g.weekday);$("#div_calendar_"+a).datepicker("setDate",null)}
function check_validdate(a,c){console.log("check_validdate() assistevent.validdate.length:"+a.validdate.length);for(var d=a.validdate.length;d--;){var g=a.validdate[d],e=moment(g).day();console.log("check_validdate() existed_date:"+g+" dow:"+e+" day:"+c);e==c&&(console.log("check_validdate() \u79fb\u9664\u9019\u500b\u65e5\u671f existed_date:"+g),a.validdate.splice(d,1))}}
function check_invaliddate(a,c){console.log("check_invaliddate() assistevent.invaliddate.length:"+a.invaliddate.length);for(var d=a.invaliddate.length;d--;){var g=a.invaliddate[d],e=moment(g).day();console.log("check_invaliddate() existed_date:"+g+" dow:"+e+" day:"+c);e==c&&(console.log("check_invaliddate() \u79fb\u9664\u9019\u500b\u65e5\u671f existed_date:"+g),a.invaliddate.splice(d,1))}}
function checkValidDate(a,c,d,g){var e=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2);a=a.getDay();a=c.weekday.indexOf(""+a);if(e>c.deadline)return{enabled:d,classes:"active"};if(0<=a){if(g)return g=!0,a=c.invaliddate.indexOf(e),0<=a?(c.invaliddate.splice(a,1),g=!1):c.invaliddate.push(e),0==g?(a=c.validdate.indexOf(e),0>a&&c.validdate.push(e)):(a=c.validdate.indexOf(e),0<=a&&c.validdate.splice(a,1)),g?{enabled:d,classes:"active"}:{enabled:d,classes:"noactive"};
a=c.invaliddate.indexOf(e);return 0<=a?{enabled:d,classes:"active"}:{enabled:d,classes:"noactive"}}if(g)return g=!1,a=c.validdate.indexOf(e),0<=a?(c.validdate.splice(a,1),g=!0):c.validdate.push(e),g?(a=c.invaliddate.indexOf(e),0>a&&c.invaliddate.push(e)):(a=c.invaliddate.indexOf(e),0<=a&&c.invaliddate.splice(a,1)),g?{enabled:d,classes:"active"}:{enabled:d,classes:"noactive"};a=c.validdate.indexOf(e);return 0<=a?{enabled:d,classes:"noactive"}:{enabled:d,classes:"active"}}
function fetch_storage_image(a,c){$.getJSON(gl_target_server+"/php/storage.php","loadsingleimage=1&project_id="+project_id+"&imageuid="+c,function(c){c=create_data_image(c.id,c.imagename,c.thumbpath,c.imagetype,c.imagesize);document.getElementById("storage_image_"+a).appendChild(c)}).success(function(){}).error(function(){}).complete(function(){})}
function fetch_storage_file(a,c){$.getJSON(gl_target_server+"/php/storage.php","loadsinglefile=1&project_id="+project_id+"&fileuid="+c,function(c){c=create_data_file(c.id,c.filename,c.filetype,c.filesize);document.getElementById("storage_file_"+a).appendChild(c)}).success(function(){}).error(function(){}).complete(function(){})}
function create_data_image(a,c,d,g,e){d=document.createElement("ul");d.setAttribute("class","mailbox-attachments clearfix");g=document.createElement("li");d.appendChild(g);var h=document.createElement("span");h.setAttribute("class","mailbox-attachment-icon has-img");g.appendChild(h);var k=document.createElement("img");k.setAttribute("src","/php/downloadfile.php?loadthumb=1&project_id="+project_id+"&imageid="+a);k.setAttribute("alt","Attachment");h.appendChild(k);h=document.createElement("div");h.setAttribute("class",
"mailbox-attachment-info");g.appendChild(h);g=document.createElement("a");g.setAttribute("href","/php/downloadfile.php?project_id="+project_id+"&imageid="+a);g.setAttribute("class","mailbox-attachment-name");h.appendChild(g);h=document.createElement("i");h.setAttribute("class","fa fa-camera");g.appendChild(h);g.appendChild(document.createTextNode("  "+c));c=document.createElement("span");c.setAttribute("class","mailbox-attachment-size");c.textContent=convertFileSize(parseInt(e));g.appendChild(c);
e=document.createElement("a");e.setAttribute("href","/php/downloadfile.php?project_id="+project_id+"&imageid="+a);e.setAttribute("class","btn btn-default btn-xs pull-right");c.appendChild(e);a=document.createElement("i");a.setAttribute("class","fa fa-cloud-download");e.appendChild(a);return d}function convertFileSize(a){return 1048576<a?(Math.round(100*a/1048576)/100).toString()+"MB":(Math.round(100*a/1024)/100).toString()+"KB"}
function create_data_file(a,c,d,g){var e=document.createElement("ul");e.setAttribute("class","mailbox-attachments clearfix");var h=document.createElement("li");e.appendChild(h);var k=document.createElement("span");k.setAttribute("class","mailbox-attachment-icon");h.appendChild(k);k.appendChild(create_filetype_icon(d));d=document.createElement("div");d.setAttribute("class","mailbox-attachment-info");h.appendChild(d);h=document.createElement("a");h.setAttribute("href","/php/downloadfile.php?project_id="+
project_id+"&fileid="+a);h.setAttribute("class","mailbox-attachment-name");d.appendChild(h);d=document.createElement("i");d.setAttribute("class","fa fa-paperclip");h.appendChild(d);h.appendChild(document.createTextNode("  "+c));c=document.createElement("span");c.setAttribute("class","mailbox-attachment-size");c.textContent=convertFileSize(parseInt(g));h.appendChild(c);g=document.createElement("a");g.setAttribute("href","/php/downloadfile.php?project_id="+project_id+"&fileid="+a);g.setAttribute("class",
"btn btn-default btn-xs pull-right");c.appendChild(g);a=document.createElement("i");a.setAttribute("class","fa fa-cloud-download");g.appendChild(a);return e}
function create_filetype_icon(a){var c=document.createElement("i");a.includes("video")?c.setAttribute("class","fa fa-file-movie-o"):a.includes("audio")?c.setAttribute("class","fa fa-file-audio-o"):a.includes("application/pdf")?c.setAttribute("class","fa fa-file-pdf-o"):a.includes("application/zip")?c.setAttribute("class","fa fa-file-zip-o"):a.includes("ms-excel")?c.setAttribute("class","fa fa-file-excel-o"):a.includes("officedocument.wordprocessingml.document")?c.setAttribute("class","fa fa-file-word-o"):
a.includes("officedocument.presentationml.presentation")?c.setAttribute("class","fa fa-file-powerpoint-o"):a.includes("image")?c.setAttribute("class","fa fa-file-photo-o"):c.setAttribute("class","fa fa-file");return c}function convertFileSize(a){return a=1048576<a?(Math.round(100*a/1048576)/100).toString()+"MB":(Math.round(100*a/1024)/100).toString()+"KB"}function getUserName(a){for(var c="",d=0;d<gl_user_nameinfo.length;++d){var g=gl_user_nameinfo[d];if(g.userid==a){c=g.name;break}}return c}
function clearChildView(a){a=document.getElementById(a);if(null!=a)for(;a.firstChild;)a.removeChild(a.firstChild);return a}function show_assistresult(a,c,d){window.open("/index.php/vilsassistresult/"+a+"?assistid="+c+"&hashkey="+d,"_blank").focus()}function open_assistrecords_page(){window.open("/index.php/vilsassistrecords/"+project_id,"_blank").focus()};
